!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("binaryen")):"function"==typeof define&&define.amd?define(["binaryen"],t):"object"==typeof exports?exports.assemblyscript=t(require("binaryen")):e.assemblyscript=t(e.binaryen)}("undefined"!=typeof self?self:this,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=47)}([function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),c=r(11),u=r(4),p=r(3);t.PATH_DELIMITER="/",t.PARENT_SUBST="..",t.GETTER_PREFIX="get:",t.SETTER_PREFIX="set:",t.INSTANCE_DELIMITER="#",t.STATIC_DELIMITER=".",t.INNER_DELIMITER="~",t.LIBRARY_SUBST="~lib",t.LIBRARY_PREFIX=t.LIBRARY_SUBST+t.PATH_DELIMITER;var l,h,d=function(){return function(){}}(),f=function(){return function(){}}(),_=function(){return function(){}}(),m=new Map,y=function(e){function r(t){void 0===t&&(t=null);var r=e.call(this,t)||this;return r.diagnosticsOffset=0,r.elementsLookup=new Map,r.typesLookup=m,r.typeAliases=new Map,r.fileLevelExports=new Map,r.moduleLevelExports=new Map,r.arrayPrototype=null,r.stringInstance=null,r.resolvedThisExpression=null,r.resolvedElementExpression=null,r.sources=[],r}return i(r,e),r.prototype.getSource=function(e){for(var t=this.sources,r=0,n=t.length;r<n;++r){var i=t[r];if(i.normalizedPath==e)return i}return null},r.prototype.lookupSourceByPath=function(e){return this.getSource(e+".ts")||this.getSource(e+"/index.ts")||this.getSource(t.LIBRARY_PREFIX+e+".ts")||this.getSource(t.LIBRARY_PREFIX+e+"/index.ts")},r.prototype.initialize=function(e){this.options=e,this.typesLookup=new Map([["i8",c.Type.i8],["i16",c.Type.i16],["i32",c.Type.i32],["i64",c.Type.i64],["isize",e.isizeType],["u8",c.Type.u8],["u16",c.Type.u16],["u32",c.Type.u32],["u64",c.Type.u64],["usize",e.usizeType],["bool",c.Type.bool],["f32",c.Type.f32],["f64",c.Type.f64],["void",c.Type.void],["number",c.Type.f64],["boolean",c.Type.bool]]);for(var t=new Map,r=new Array,n=new Array,i=0,p=this.sources.length;i<p;++i)for(var h=this.sources[i].statements,d=0,f=h.length;d<f;++d){var _=h[d];switch(_.kind){case u.NodeKind.CLASSDECLARATION:this.initializeClass(_,n);break;case u.NodeKind.ENUMDECLARATION:this.initializeEnum(_);break;case u.NodeKind.EXPORT:this.initializeExports(_,t);break;case u.NodeKind.FUNCTIONDECLARATION:this.initializeFunction(_);break;case u.NodeKind.IMPORT:this.initializeImports(_,t,r);break;case u.NodeKind.INTERFACEDECLARATION:this.initializeInterface(_);break;case u.NodeKind.NAMESPACEDECLARATION:this.initializeNamespace(_,n);break;case u.NodeKind.TYPEDECLARATION:this.initializeTypeAlias(_);break;case u.NodeKind.VARIABLE:this.initializeVariables(_)}}for(i=0;i<r.length;){var m=r[i];(I=this.tryResolveImport(m.referencedName,t))?(this.elementsLookup.set(m.internalName,I),r.splice(i,1)):(I=this.tryResolveImport(m.referencedNameAlt,t))?(this.elementsLookup.set(m.internalName,I),r.splice(i,1)):(this.error(s.DiagnosticCode.Module_0_has_no_exported_member_1,m.declaration.range,m.declaration.parent.path.value,m.declaration.externalName.text),++i)}try{for(var y=a(t),g=y.next();!g.done;g=y.next()){var E=o(g.value,2),T=E[0],v=E[1],A=v,I=void 0;do{if(!A.isReExport){(I=this.elementsLookup.get(A.referencedName))||(I=this.elementsLookup.get(A.member.name.text))?this.setExportAndCheckLibrary(T,I,A.member.externalName):this.error(s.DiagnosticCode.Cannot_find_name_0,v.member.range,v.member.name.text);break}if(I=this.fileLevelExports.get(A.referencedName)){this.setExportAndCheckLibrary(T,I,A.member.externalName);break}(A=t.get(A.referencedName))||this.error(s.DiagnosticCode.Module_0_has_no_exported_member_1,v.member.externalName.range,v.member.parent.path.value,v.member.externalName.text)}while(A)}}catch(e){w={error:e}}finally{try{g&&!g.done&&(U=y.return)&&U.call(y)}finally{if(w)throw w.error}}for(i=0,p=n.length;i<p;++i){var b=n[i].declaration,N=assert(b.extendsType),C=this.resolveIdentifier(N.name,null);C&&(C.kind==l.CLASS_PROTOTYPE?n[i].basePrototype=C:this.error(s.DiagnosticCode.A_class_may_only_extend_another_class,N.range))}var S=e.globalAliases;if(S)try{for(var O=a(S),k=O.next();!k.done;k=O.next()){var L=o(k.value,2),x=L[0],R=L[1];(I=this.elementsLookup.get(R))&&this.elementsLookup.set(x,I)}}catch(e){D={error:e}}finally{try{k&&!k.done&&(F=O.return)&&F.call(O)}finally{if(D)throw D.error}}var B=this.elementsLookup.get("Array");B&&(assert(B.kind==l.CLASS_PROTOTYPE),this.arrayPrototype=B);var w,U,D,F,M=this.elementsLookup.get("String");if(M){assert(M.kind==l.CLASS_PROTOTYPE);var P=M.resolve(null);if(P)if(this.typesLookup.has("string")){var G=M.declaration;this.error(s.DiagnosticCode.Duplicate_identifier_0,G.name.range,G.programLevelInternalName)}else this.stringInstance=P,this.typesLookup.set("string",P.type)}},r.prototype.tryResolveImport=function(e,t){for(var r,n=this.fileLevelExports;;){if(r=n.get(e))return r;var i=t.get(e);if(!i)return null;if(!i.isReExport)return this.elementsLookup.get(i.referencedName);e=i.referencedName}},r.prototype.checkGlobalOptions=function(e,t){var r=t.parent;if(e.is(h.GLOBAL)||t.range.source.isLibrary&&e.is(h.EXPORT)&&(assert(r).kind==u.NodeKind.SOURCE||r.kind==u.NodeKind.VARIABLE&&assert(r.parent).kind==u.NodeKind.SOURCE)){var n=t.name.text;this.elementsLookup.has(n)?this.error(s.DiagnosticCode.Duplicate_identifier_0,t.name.range,e.internalName):(e.set(h.GLOBAL),this.elementsLookup.set(n,e),e.is(h.BUILTIN)&&(e.internalName=n))}},r.prototype.initializeClass=function(e,t,r){void 0===r&&(r=null);var n=e.fileLevelInternalName;if(this.elementsLookup.has(n))this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,n);else{var i=e.name.text,a=new R(this,i,n,e);a.namespace=r,this.elementsLookup.set(n,a);var o=e.implementsTypes;if(o){var c=o.length;if(a.is(h.UNMANAGED))c&&this.error(s.DiagnosticCode.Structs_cannot_implement_interfaces,u.Range.join(e.name.range,o[c-1].range));else if(c)for(var p=0;p<c;++p)this.error(s.DiagnosticCode.Operation_not_supported,o[p].range)}if(e.extendsType&&t.push(a),r){if(r.members){if(r.members.has(i))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,n)}else r.members=new Map;r.members.set(i,a),r.is(h.MODULE_EXPORT)&&a.is(h.EXPORT)&&a.set(h.MODULE_EXPORT)}else if(a.is(h.EXPORT)){if(this.fileLevelExports.has(n))return void this.error(s.DiagnosticCode.Export_declaration_conflicts_with_exported_declaration_of_0,e.name.range,n);if(this.fileLevelExports.set(n,a),a.is(h.EXPORT)&&e.range.source.isEntry){if(this.moduleLevelExports.has(n))return void this.error(s.DiagnosticCode.Export_declaration_conflicts_with_exported_declaration_of_0,e.name.range,n);a.set(h.MODULE_EXPORT),this.moduleLevelExports.set(n,a)}}for(var l=e.members,d=(p=0,l.length);p<d;++p){var f=l[p];switch(f.kind){case u.NodeKind.FIELDDECLARATION:this.initializeField(f,a);break;case u.NodeKind.METHODDECLARATION:f.isAny(h.GET|h.SET)?this.initializeAccessor(f,a):this.initializeMethod(f,a);break;default:throw new Error("class member expected")}}this.checkGlobalOptions(a,e)}},r.prototype.initializeField=function(e,t){var r=e.name.text,n=e.fileLevelInternalName;if(e.is(h.STATIC)){if(this.elementsLookup.has(n))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,n);if(t.members){if(t.members.has(r))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,n)}else t.members=new Map;var i=new I(this,r,n,c.Type.void,e);t.members.set(r,i),this.elementsLookup.set(n,i)}else{if(t.instanceMembers){if(t.instanceMembers.has(r))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,n)}else t.instanceMembers=new Map;var a=new k(t,r,n,e);t.instanceMembers.set(r,a)}},r.prototype.initializeMethod=function(e,t){var r=e.name.text,n=e.fileLevelInternalName,i=null;if(e.is(h.STATIC)){if(assert(e.name.kind!=u.NodeKind.CONSTRUCTOR),this.elementsLookup.has(n))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,n);if(t.members){if(t.members.has(r))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,n)}else t.members=new Map;i=new C(this,r,n,e,t),t.members.set(r,i),this.elementsLookup.set(n,i),t.is(h.MODULE_EXPORT)&&i.set(h.MODULE_EXPORT)}else{if(t.instanceMembers){if(t.instanceMembers.has(r))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,n)}else t.instanceMembers=new Map;i=new C(this,r,n,e,t),e.name.kind==u.NodeKind.CONSTRUCTOR?t.constructorPrototype?this.error(s.DiagnosticCode.Multiple_constructor_implementations_are_not_allowed,e.name.range):(i.set(h.CONSTRUCTOR),t.constructorPrototype=i):t.instanceMembers.set(r,i),t.is(h.MODULE_EXPORT)&&i.set(h.MODULE_EXPORT)}this.checkOperators(e.decorators,i,t)},r.prototype.checkOperators=function(e,t,r){if(e)for(var n=0,i=e.length;n<i;++n){var a=e[n];if(a.decoratorKind==u.DecoratorKind.OPERATOR){if(!t){this.error(s.DiagnosticCode.Operation_not_supported,a.range);continue}var o=a.arguments&&a.arguments.length||0;if(1==o){var c=a.arguments[0];if(c.kind==u.NodeKind.LITERAL&&c.literalKind==u.LiteralKind.STRING)switch(c.value){case"[]":r.fnIndexedGet=t.simpleName;break;case"[]=":r.fnIndexedSet=t.simpleName;break;case"+":r.fnConcat=t.simpleName;break;case"-":r.fnSubtract=t.simpleName;break;case"*":r.fnMultiply=t.simpleName;break;case"/":r.fnDivide=t.simpleName;break;case"%":r.fnFractional=t.simpleName;break;case"&":r.fnBitwiseAnd=t.simpleName;break;case"|":r.fnBitwiseOr=t.simpleName;break;case"^":r.fnBitwiseXor=t.simpleName;break;case"==":r.fnEquals=t.simpleName;break;case"!=":r.fnNotEquals=t.simpleName;break;case">":r.fnGreaterThan=t.simpleName;break;case">=":r.fnGreaterThanEquals=t.simpleName;break;case"<":r.fnLessThan=t.simpleName;break;case"<=":r.fnLessThanEquals=t.simpleName;break;default:this.error(s.DiagnosticCode.Operation_not_supported,c.range)}else this.error(s.DiagnosticCode.String_literal_expected,c.range)}else this.error(s.DiagnosticCode.Expected_0_arguments_but_got_1,a.range,"1",o.toString(0))}else a.decoratorKind!=u.DecoratorKind.CUSTOM&&this.error(s.DiagnosticCode.Operation_not_supported,a.range)}},r.prototype.initializeAccessor=function(e,r){var n=e.name.text,i=e.fileLevelInternalName,a=this.elementsLookup.get(i),o=e.is(h.GET),c=!1;if(a){if(a.kind!=l.PROPERTY||null!=(o?a.getterPrototype:a.setterPrototype))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,i)}else a=new x(this,n,i,r),c=!0;var u=(o?t.GETTER_PREFIX:t.SETTER_PREFIX)+n;if(e.is(h.STATIC)){var p=r.internalName+t.STATIC_DELIMITER+u;if(this.elementsLookup.has(p))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,p);var d=new C(this,u,p,e,null);if(o?a.getterPrototype=d:a.setterPrototype=d,c){if(r.members){if(r.members.has(n))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,p)}else r.members=new Map;r.members.set(n,a)}else assert(r.members&&r.members.has(n));this.elementsLookup.set(i,a),r.is(h.MODULE_EXPORT)&&a.set(h.MODULE_EXPORT)}else{var f=r.internalName+t.INSTANCE_DELIMITER+u;if(r.instanceMembers){if(r.instanceMembers.has(u))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,i)}else r.instanceMembers=new Map;var _=new C(this,u,f,e,r);o?a.getterPrototype=_:a.setterPrototype=_,r.instanceMembers.set(u,a),this.elementsLookup.set(i,a),r.is(h.MODULE_EXPORT)&&a.set(h.MODULE_EXPORT)}},r.prototype.initializeEnum=function(e,t){void 0===t&&(t=null);var r=e.fileLevelInternalName;if(this.elementsLookup.has(r))this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,r);else{var n=e.name.text,i=new T(this,n,r,e);if(i.namespace=t,this.elementsLookup.set(r,i),t){if(t.members){if(t.members.has(n))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,r)}else t.members=new Map;t.members.set(n,i),t.is(h.MODULE_EXPORT)&&i.set(h.MODULE_EXPORT)}else if(i.is(h.EXPORT)){if(this.fileLevelExports.has(r))return void this.error(s.DiagnosticCode.Export_declaration_conflicts_with_exported_declaration_of_0,e.name.range,r);if(this.fileLevelExports.set(r,i),e.range.source.isEntry){if(this.moduleLevelExports.has(r))return void this.error(s.DiagnosticCode.Export_declaration_conflicts_with_exported_declaration_of_0,e.name.range,r);i.set(h.MODULE_EXPORT),this.moduleLevelExports.set(r,i)}}for(var a=e.values,o=0,c=a.length;o<c;++o)this.initializeEnumValue(a[o],i);this.checkGlobalOptions(i,e)}},r.prototype.initializeEnumValue=function(e,t){var r=e.name.text,n=e.fileLevelInternalName,i=t.is(h.MODULE_EXPORT);if(t.members){if(t.members.has(r))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,n)}else t.members=new Map;var a=new v(t,this,r,n,e);t.members.set(r,a),i&&a.set(h.MODULE_EXPORT)},r.prototype.initializeExports=function(e,t){for(var r=e.members,n=0,i=r.length;n<i;++n)this.initializeExport(r[n],e.internalPath,t)},r.prototype.setExportAndCheckLibrary=function(e,t,r){this.fileLevelExports.set(e,t),r.range.source.isLibrary&&(this.elementsLookup.has(r.text)?this.error(s.DiagnosticCode.Export_declaration_conflicts_with_exported_declaration_of_0,r.range,r.text):(t.internalName=r.text,this.elementsLookup.set(r.text,t)))},r.prototype.initializeExport=function(e,r,n){var i,a,o,c=e.range.source.internalPath+t.PATH_DELIMITER+e.externalName.text;if(this.fileLevelExports.has(c))this.error(s.DiagnosticCode.Export_declaration_conflicts_with_exported_declaration_of_0,e.externalName.range,c);else if(null==r){if(i=e.range.source.internalPath+t.PATH_DELIMITER+e.name.text,a=this.elementsLookup.get(i))return void this.setExportAndCheckLibrary(c,a,e.externalName);if(n.has(c))return void this.error(s.DiagnosticCode.Export_declaration_conflicts_with_exported_declaration_of_0,e.externalName.range,c);(o=new d).isReExport=!1,o.referencedName=i,o.member=e,n.set(c,o)}else{if(i=r+t.PATH_DELIMITER+e.name.text,a=this.elementsLookup.get(i))return void this.setExportAndCheckLibrary(c,a,e.externalName);for(var u=new Set;o=n.get(i);){if(!o.isReExport){if(a=this.elementsLookup.get(o.referencedName))return void this.setExportAndCheckLibrary(c,a,e.externalName);break}if(a=this.fileLevelExports.get(o.referencedName))return void this.setExportAndCheckLibrary(c,a,e.externalName);if(i=o.referencedName,u.has(o))break;u.add(o)}if(n.has(c))return void this.error(s.DiagnosticCode.Export_declaration_conflicts_with_exported_declaration_of_0,e.externalName.range,c);(o=new d).isReExport=!0,o.referencedName=i,o.member=e,n.set(c,o)}},r.prototype.initializeFunction=function(e,t){void 0===t&&(t=null);var r=e.fileLevelInternalName;if(this.elementsLookup.has(r))this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,r);else{var n=e.name.text,i=new C(this,n,r,e,null);if(i.namespace=t,this.elementsLookup.set(r,i),t){if(t.members){if(t.members.has(n))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,r)}else t.members=new Map;t.members.set(n,i),t.is(h.MODULE_EXPORT)&&i.is(h.EXPORT)&&i.set(h.MODULE_EXPORT)}else if(i.is(h.EXPORT)){if(this.fileLevelExports.has(r))return void this.error(s.DiagnosticCode.Export_declaration_conflicts_with_exported_declaration_of_0,e.name.range,r);if(this.fileLevelExports.set(r,i),e.range.source.isEntry){if(this.moduleLevelExports.has(r))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,r);i.set(h.MODULE_EXPORT),this.moduleLevelExports.set(r,i)}}this.checkGlobalOptions(i,e)}},r.prototype.initializeImports=function(e,r,n){var i=e.declarations;if(i)for(var a=0,o=i.length;a<o;++a)this.initializeImport(i[a],e.internalPath,r,n);else if(e.namespaceName){var c=e.range.source.internalPath+t.PATH_DELIMITER+e.namespaceName.text;if(this.elementsLookup.has(c))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.namespaceName.range,c);this.error(s.DiagnosticCode.Operation_not_supported,e.range)}},r.prototype.initializeImport=function(e,r,n,i){var a=e.fileLevelInternalName;if(this.elementsLookup.has(a))this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,a);else{var o,c=r+t.PATH_DELIMITER+e.externalName.text;if(o=this.fileLevelExports.get(c))this.elementsLookup.set(a,o);else{var u=t.PATH_DELIMITER+"index",p=new f;p.internalName=a,r.endsWith(u)?(p.referencedName=c,p.referencedNameAlt=r.substring(0,r.length-u.length+1)+e.externalName.text):(p.referencedName=c,p.referencedNameAlt=r+u+t.PATH_DELIMITER+e.externalName.text),p.declaration=e,i.push(p)}}},r.prototype.initializeInterface=function(e,t){void 0===t&&(t=null);var r=e.fileLevelInternalName;if(this.elementsLookup.has(r))this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,r);else{var n=new w(this,e.name.text,r,e);if(n.namespace=t,this.elementsLookup.set(r,n),t){if(t.members){if(t.members.has(n.internalName))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,r)}else t.members=new Map;t.members.set(n.internalName,n),t.is(h.MODULE_EXPORT)&&n.is(h.EXPORT)&&n.set(h.MODULE_EXPORT)}else if(n.is(h.EXPORT)){if(this.fileLevelExports.has(r))return void this.error(s.DiagnosticCode.Export_declaration_conflicts_with_exported_declaration_of_0,e.name.range,r);if(this.fileLevelExports.set(r,n),e.range.source.isEntry){if(this.moduleLevelExports.has(r))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,r);n.set(h.MODULE_EXPORT),this.moduleLevelExports.set(r,n)}}for(var i=e.members,a=0,o=i.length;a<o;++a){var c=i[a];switch(c.kind){case u.NodeKind.FIELDDECLARATION:this.initializeField(c,n);break;case u.NodeKind.METHODDECLARATION:c.isAny(h.GET|h.SET)?this.initializeAccessor(c,n):this.initializeMethod(c,n);break;default:throw new Error("interface member expected")}}this.checkGlobalOptions(n,e)}},r.prototype.initializeNamespace=function(e,t,r){void 0===r&&(r=null);var n=e.fileLevelInternalName,i=e.name.text,a=this.elementsLookup.get(n);if(a||((a=new E(this,i,n,e)).namespace=r,this.elementsLookup.set(n,a),this.checkGlobalOptions(a,e)),r){if(r.members){if(r.members.has(i))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,n)}else r.members=new Map;r.members.set(i,a),r.is(h.MODULE_EXPORT)&&a.is(h.EXPORT)&&a.set(h.MODULE_EXPORT)}else if(a.is(h.EXPORT)){var o=this.fileLevelExports.get(n);if(o?(o.is(h.EXPORT)||this.error(s.DiagnosticCode.Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local,e.name.range,a.internalName),a=o):this.fileLevelExports.set(n,a),e.range.source.isEntry){if(this.moduleLevelExports.has(n))return void this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,n);a.set(h.MODULE_EXPORT),this.moduleLevelExports.set(n,a)}}for(var c=e.members,p=0,l=c.length;p<l;++p)switch(c[p].kind){case u.NodeKind.CLASSDECLARATION:this.initializeClass(c[p],t,a);break;case u.NodeKind.ENUMDECLARATION:this.initializeEnum(c[p],a);break;case u.NodeKind.FUNCTIONDECLARATION:this.initializeFunction(c[p],a);break;case u.NodeKind.INTERFACEDECLARATION:this.initializeInterface(c[p],a);break;case u.NodeKind.NAMESPACEDECLARATION:this.initializeNamespace(c[p],t,a);break;case u.NodeKind.TYPEDECLARATION:this.error(s.DiagnosticCode.Operation_not_supported,c[p].range);break;case u.NodeKind.VARIABLE:this.initializeVariables(c[p],a);break;default:throw new Error("namespace member expected")}},r.prototype.initializeTypeAlias=function(e,t){void 0===t&&(t=null);var r=e.name.text;if(this.typesLookup.has(r)||this.typeAliases.has(r))this.error(s.DiagnosticCode.Duplicate_identifier_0,e.name.range,r);else{var n=new _;n.typeParameters=e.typeParameters,n.type=e.type,this.typeAliases.set(r,n)}},r.prototype.initializeVariables=function(e,t){void 0===t&&(t=null);for(var r=e.declarations,n=0,i=r.length;n<i;++n){var a=r[n],o=a.fileLevelInternalName;if(this.elementsLookup.has(o))this.error(s.DiagnosticCode.Duplicate_identifier_0,a.name.range,o);else{var u=a.name.text,p=new I(this,u,o,c.Type.void,a);if(p.namespace=t,this.elementsLookup.set(o,p),t){if(t.members){if(t.members.has(u)){this.error(s.DiagnosticCode.Duplicate_identifier_0,a.name.range,o);continue}}else t.members=new Map;t.members.set(u,p),t.is(h.MODULE_EXPORT)&&p.is(h.EXPORT)&&p.set(h.MODULE_EXPORT)}else if(p.is(h.EXPORT)&&(this.fileLevelExports.has(o)?this.error(s.DiagnosticCode.Duplicate_identifier_0,a.name.range,o):this.fileLevelExports.set(o,p),a.range.source.isEntry)){if(this.moduleLevelExports.has(o)){this.error(s.DiagnosticCode.Duplicate_identifier_0,a.name.range,o);continue}p.set(h.MODULE_EXPORT),this.moduleLevelExports.set(o,p)}this.checkGlobalOptions(p,a)}}},r.prototype.resolveSignature=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=!0);var n=e.explicitThisType,i=null;if(n&&!(i=this.resolveType(n,t,r)))return null;for(var a=e.parameterTypes,o=a.length,s=new Array(o),p=new Array(o),l=0,h=!1,d=0;d<o;++d){var f=a[d];switch(f.parameterKind){case u.ParameterKind.DEFAULT:l=d+1;break;case u.ParameterKind.REST:assert(d==o),h=!0}var _=this.resolveType(assert(f.type),t,r);if(!_)return null;s[d]=_,p[d]=f.name.text}var m,y=e.returnType;if(y){if(!(m=this.resolveType(y,t,r)))return null}else m=c.Type.void;var g=new c.Signature(s,m,i);return g.parameterNames=p,g.requiredParameters=l,g.hasRest=h,g},r.prototype.resolveType=function(e,r,n){if(void 0===r&&(r=null),void 0===n&&(n=!0),e.kind==u.NodeKind.SIGNATURE){var i=this.resolveSignature(e,r,n);return i?c.Type.u32.asFunction(i):null}var a,o=e,p=o.name.text,h=p,d=o.range.source.internalPath+t.PATH_DELIMITER+p;if((a=this.elementsLookup.get(d))||(a=this.elementsLookup.get(h)))switch(a.kind){case l.CLASS_PROTOTYPE:var f=a.resolveUsingTypeArguments(o.typeArguments,r,null);return f?f.type:null}var _,m=this.typeAliases.get(p);if(m)return this.resolveType(m.type,r,n);if(o.typeArguments){for(var y=o.typeArguments.length,g=new Array(y),E=0;E<y;++E){var T=this.resolveType(o.typeArguments[E],r,n);if(!T)return null;g[E]=T}if(y){var v=c.typesToString(g);v.length&&(d+="<"+v+">",h+="<"+v+">")}else if(r){var A=r.get(h);if(A)return A}}return(_=this.typesLookup.get(d))||(_=this.typesLookup.get(h))?_:(n&&this.error(s.DiagnosticCode.Cannot_find_name_0,o.name.range,h),null)},r.prototype.resolveTypeArguments=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var i=e.length,a=t?t.length:0;if(i!=a)return a?this.error(s.DiagnosticCode.Expected_0_type_arguments_but_got_1,u.Range.join(t[0].range,t[a-1].range),i.toString(10),a.toString(10)):n&&this.error(s.DiagnosticCode.Expected_0_type_arguments_but_got_1,n.range.atEnd,i.toString(10),"0"),null;for(var o=new Array(i),c=0;c<i;++c){var p=this.resolveType(t[c],r,!0);if(!p)return null;o[c]=p}return o},r.prototype.resolveIdentifier=function(e,r,n){void 0===n&&(n=null);var i,a,o=e.text;if(n){if(n.members&&(i=n.members.get(o))&&i.kind==l.ENUMVALUE)return this.resolvedThisExpression=null,this.resolvedElementExpression=null,i}else if(r){if(i=r.flow.getScopedLocal(o))return this.resolvedThisExpression=null,this.resolvedElementExpression=null,i;if(a=r.prototype.namespace)do{if(i=this.elementsLookup.get(a.internalName+t.STATIC_DELIMITER+o))return this.resolvedThisExpression=null,this.resolvedElementExpression=null,i}while(a=a.namespace)}return(i=this.elementsLookup.get(e.range.source.internalPath+t.PATH_DELIMITER+o))?(this.resolvedThisExpression=null,this.resolvedElementExpression=null,i):(i=this.elementsLookup.get(o))?(this.resolvedThisExpression=null,this.resolvedElementExpression=null,i):(this.error(s.DiagnosticCode.Cannot_find_name_0,e.range,o),null)},r.prototype.resolvePropertyAccess=function(e,t){var r=e.expression,n=this.resolveExpression(r,t);if(!n)return null;var i=e.property.text;switch(n.kind){case l.GLOBAL:case l.LOCAL:case l.FIELD:if(!(c=n.type.classReference))return this.error(s.DiagnosticCode.Property_0_does_not_exist_on_type_1,e.property.range,i,n.type.toString()),null;n=c;break;case l.PROPERTY:var a=assert(n.getterPrototype).resolve();if(!a)return null;if(!(c=a.signature.returnType.classReference))return this.error(s.DiagnosticCode.Property_0_does_not_exist_on_type_1,e.property.range,i,a.signature.returnType.toString()),null;n=c;break;case l.CLASS:if(this.resolvedElementExpression){var o=n.getIndexedGet();if(o){var c,u=o.resolve();if(!u)return null;if(!(c=u.signature.returnType.classReference))return this.error(s.DiagnosticCode.Property_0_does_not_exist_on_type_1,e.property.range,i,n.type.toString()),null;n=c}}}switch(n.kind){case l.CLASS_PROTOTYPE:case l.CLASS:for(;;){var p=void 0;if((h=n.members)&&(p=h.get(i)))return this.resolvedThisExpression=r,this.resolvedElementExpression=null,p;if(n.kind==l.CLASS_PROTOTYPE){if(!n.basePrototype)break;n=n.basePrototype}else{if(n.kind!=l.CLASS)break;if(!n.base)break;n=n.base}}break;default:var h;p=void 0;if((h=n.members)&&(p=h.get(i)))return this.resolvedThisExpression=r,this.resolvedElementExpression=null,p}return this.error(s.DiagnosticCode.Property_0_does_not_exist_on_type_1,e.property.range,i,n.internalName),null},r.prototype.resolveElementAccess=function(e,t){var r=e.expression,n=this.resolveExpression(r,t);if(!n)return null;switch(n.kind){case l.GLOBAL:case l.LOCAL:case l.FIELD:if(n=n.type.classReference)return this.resolvedThisExpression=r,this.resolvedElementExpression=e.elementExpression,n;break;case l.CLASS:var i=n.getIndexedGet();if(i){var a=i.resolve();if(!a)return null;if(n=a.signature.returnType.classReference)return this.resolvedThisExpression=r,this.resolvedElementExpression=e.elementExpression,n}}return this.error(s.DiagnosticCode.Operation_not_supported,r.range),null},r.prototype.resolveExpression=function(e,t){for(;e.kind==u.NodeKind.PARENTHESIZED;)e=e.expression;switch(e.kind){case u.NodeKind.ASSERTION:var r=this.resolveType(e.toType);if(r)if(c=r.classReference)return this.resolvedThisExpression=null,this.resolvedElementExpression=null,c;return null;case u.NodeKind.BINARY:throw new Error("not implemented");case u.NodeKind.THIS:return(n=t.memberOf)?(this.resolvedThisExpression=null,this.resolvedElementExpression=null,n):(this.error(s.DiagnosticCode._this_cannot_be_referenced_in_current_location,e.range),null);case u.NodeKind.SUPER:var n;return(n=t.memberOf)&&n.kind==l.CLASS&&(n=n.base)?(this.resolvedThisExpression=null,this.resolvedElementExpression=null,n):(this.error(s.DiagnosticCode._super_can_only_be_referenced_in_a_derived_class,e.range),null);case u.NodeKind.IDENTIFIER:return this.resolveIdentifier(e,t);case u.NodeKind.LITERAL:switch(e.literalKind){case u.LiteralKind.STRING:return this.resolvedThisExpression=e,this.resolvedElementExpression=null,this.stringInstance}break;case u.NodeKind.PROPERTYACCESS:return this.resolvePropertyAccess(e,t);case u.NodeKind.ELEMENTACCESS:return this.resolveElementAccess(e,t);case u.NodeKind.CALL:var i=e.expression,a=this.resolveExpression(i,t);if(!a)return null;if(a.kind==l.FUNCTION_PROTOTYPE){var o=a.resolveUsingTypeArguments(e.typeArguments,t.contextualTypeArguments,e);if(!o)return null;var c,p=o.signature.returnType;if(c=p.classReference)return c;var h=p.signatureReference;if(h){var d=h.cachedFunctionTarget;return d||(d=new O(this,h),h.cachedFunctionTarget=d),d}return this.error(s.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,i.range,a.internalName),null}}return this.error(s.DiagnosticCode.Operation_not_supported,e.range),null},r}(s.DiagnosticEmitter);t.Program=y,function(e){e[e.GLOBAL=0]="GLOBAL",e[e.LOCAL=1]="LOCAL",e[e.ENUM=2]="ENUM",e[e.ENUMVALUE=3]="ENUMVALUE",e[e.FUNCTION_PROTOTYPE=4]="FUNCTION_PROTOTYPE",e[e.FUNCTION=5]="FUNCTION",e[e.FUNCTION_TARGET=6]="FUNCTION_TARGET",e[e.CLASS_PROTOTYPE=7]="CLASS_PROTOTYPE",e[e.CLASS=8]="CLASS",e[e.INTERFACE_PROTOTYPE=9]="INTERFACE_PROTOTYPE",e[e.INTERFACE=10]="INTERFACE",e[e.FIELD_PROTOTYPE=11]="FIELD_PROTOTYPE",e[e.FIELD=12]="FIELD",e[e.PROPERTY=13]="PROPERTY",e[e.NAMESPACE=14]="NAMESPACE"}(l=t.ElementKind||(t.ElementKind={})),function(e){e[e.NONE=0]="NONE",e[e.IMPORT=1]="IMPORT",e[e.EXPORT=2]="EXPORT",e[e.DECLARE=4]="DECLARE",e[e.CONST=8]="CONST",e[e.LET=16]="LET",e[e.STATIC=32]="STATIC",e[e.READONLY=64]="READONLY",e[e.ABSTRACT=128]="ABSTRACT",e[e.PUBLIC=256]="PUBLIC",e[e.PRIVATE=512]="PRIVATE",e[e.PROTECTED=1024]="PROTECTED",e[e.GET=2048]="GET",e[e.SET=4096]="SET",e[e.GLOBAL=8192]="GLOBAL",e[e.BUILTIN=16384]="BUILTIN",e[e.UNMANAGED=32768]="UNMANAGED",e[e.SEALED=65536]="SEALED",e[e.AMBIENT=131072]="AMBIENT",e[e.GENERIC=262144]="GENERIC",e[e.GENERIC_CONTEXT=524288]="GENERIC_CONTEXT",e[e.INSTANCE=1048576]="INSTANCE",e[e.CONSTRUCTOR=2097152]="CONSTRUCTOR",e[e.ARROW=4194304]="ARROW",e[e.MODULE_EXPORT=8388608]="MODULE_EXPORT",e[e.MODULE_IMPORT=16777216]="MODULE_IMPORT",e[e.COMPILED=33554432]="COMPILED",e[e.INLINED=67108864]="INLINED",e[e.SCOPED=134217728]="SCOPED",e[e.TRAMPOLINE=268435456]="TRAMPOLINE"}(h=t.CommonFlags||(t.CommonFlags={}));var g=function(){function e(e,t,r){this.flags=h.NONE,this.members=null,this.namespace=null,this.program=e,this.simpleName=t,this.internalName=r}return e.prototype.is=function(e){return(this.flags&e)==e},e.prototype.isAny=function(e){return 0!=(this.flags&e)},e.prototype.set=function(e){this.flags|=e},e}();t.Element=g;var E=function(e){function t(t,r,n,i){var a=e.call(this,t,r,n)||this;return a.kind=l.NAMESPACE,a.declaration=i,a.flags=i.flags,a}return i(t,e),t}(g);t.Namespace=E;var T=function(e){function t(t,r,n,i){var a=e.call(this,t,r,n)||this;return a.kind=l.ENUM,a.declaration=i,a.flags=i.flags,a}return i(t,e),t}(g);t.Enum=T;var v=function(e){function t(t,r,n,i,a){var o=e.call(this,r,n,i)||this;return o.kind=l.ENUMVALUE,o.constantValue=0,o.enum=t,o.declaration=a,o}return i(t,e),t}(g);t.EnumValue=v,function(e){e[e.NONE=0]="NONE",e[e.INTEGER=1]="INTEGER",e[e.FLOAT=2]="FLOAT"}(t.ConstantValueKind||(t.ConstantValueKind={}));var A=function(e){function t(t,r,n,i,a){var o=e.call(this,t,r,n)||this;return o.constantValueKind=0,o.type=i,o.declaration=a,o}return i(t,e),t.prototype.withConstantIntegerValue=function(e,t){return this.constantValueKind=1,this.constantIntegerValue=i64_new(e,t),this.set(h.CONST|h.INLINED),this},t.prototype.withConstantFloatValue=function(e){return this.constantValueKind=2,this.constantFloatValue=e,this.set(h.CONST|h.INLINED),this},t}(g);t.VariableLikeElement=A;var I=function(e){function t(t,r,n,i,a){var o=e.call(this,t,r,n,i,a)||this;return o.kind=l.GLOBAL,o.flags=a?a.flags:h.NONE,o.type=i,o}return i(t,e),t}(A);t.Global=I;var b=function(){return function(e,t,r){void 0===r&&(r=null),this.name=e,this.type=t,this.initializer=r}}();t.Parameter=b;var N=function(e){function t(t,r,n,i,a){void 0===a&&(a=null);var o=e.call(this,t,r,r,i,a)||this;return o.kind=l.LOCAL,o.scopedGlobal=null,o.index=n,o}return i(t,e),t}(A);t.Local=N;var C=function(e){function r(t,r,n,i,a){void 0===a&&(a=null);var o=e.call(this,t,r,n)||this;return o.kind=l.FUNCTION_PROTOTYPE,o.instances=new Map,o.classTypeArguments=null,o.declaration=i,o.flags=i.flags,o.classPrototype=a,o}return i(r,e),r.prototype.resolve=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var r=e?c.typesToString(e):"",n=this.instances.get(r);if(n)return n;var i=this.declaration,s=this.is(h.INSTANCE),p=this.classPrototype,l=t;if(t=new Map,l)try{for(var d=a(l),f=d.next();!f.done;f=d.next()){var _=o(f.value,2),m=_[0],y=_[1];t.set(m,y)}}catch(e){P={error:e}}finally{try{f&&!f.done&&(G=d.return)&&G.call(d)}finally{if(P)throw P.error}}var g=this.classTypeArguments;if(g){assert(this.is(h.INSTANCE));var E=assert(p).declaration.typeParameters,T=E.length;assert(T==g.length);for(var v=0;v<T;++v)t.set(E[v].name.text,g[v])}else assert(!g);var A,I=i.signature,b=i.typeParameters;if(e&&(A=e.length)){assert(b&&A==b.length);for(v=0;v<A;++v)t.set(b[v].name.text,e[v])}else assert(!b||0==b.length);var N=null,C=null;if(s){if(!(N=assert(p).resolve(g,t)))return null;C=N.type}var O,k=I.parameterTypes,L=k.length,x=new Array(L),R=new Array(L),B=0;for(v=0;v<L;++v){var w=k[v];w.parameterKind==u.ParameterKind.DEFAULT&&(B=v+1);var U=assert(w.type),D=this.program.resolveType(U,t,!0);if(!D)return null;x[v]=D,R[v]=w.name.text}if(this.is(h.SET))O=c.Type.void;else if(this.is(h.CONSTRUCTOR))O=assert(N).type;else{U=assert(I.returnType);var F=this.program.resolveType(U,t,!0);if(!F)return null;O=F}var M=new c.Signature(x,O,C);M.parameterNames=R,M.requiredParameters=B;var P,G,K=this.internalName;return r.length&&(K+="<"+r+">"),(n=new S(this,K,M,N||p)).contextualTypeArguments=t,this.instances.set(r,n),n},r.prototype.resolvePartial=function(e){assert(this.is(h.INSTANCE));var n=assert(this.classPrototype);if(!e||!e.length)return this;var i=this.simpleName,a=c.typesToString(e),o=new r(this.program,i,n.internalName+"<"+a+">"+t.INSTANCE_DELIMITER+i,this.declaration,n);return o.flags=this.flags,o.classTypeArguments=e,o},r.prototype.resolveUsingTypeArguments=function(e,t,r){var n=null;return!this.is(h.GENERIC)||(assert(null!=e&&0!=e.length),n=this.program.resolveTypeArguments(assert(this.declaration.typeParameters),e,t,r))?this.resolve(n,t):null},r.prototype.resolveBuiltinTypeArguments=function(e,t){assert(this.is(h.BUILTIN));var r=null;if(e){var n=e.length;r=new Array(n);for(var i=0;i<n;++i){var a=this.program.resolveType(e[i],t,!0);if(!a)return null;r[i]=a}}return r},r.prototype.toString=function(){return this.simpleName},r}(g);t.FunctionPrototype=C;var S=function(e){function t(t,r,n,i){void 0===i&&(i=null);var s,c,u=e.call(this,t.program,t.simpleName,r)||this;if(u.kind=l.FUNCTION,u.locals=new Map,u.additionalLocals=[],u.breakContext=null,u.debugLocations=null,u.ref=0,u.functionTableIndex=-1,u.trampoline=null,u.outerScope=null,u.nextBreakId=0,u.breakStack=null,u.tempI32s=null,u.tempI64s=null,u.tempF32s=null,u.tempF64s=null,u.prototype=t,u.signature=n,u.memberOf=i,u.flags=t.flags,!t.is(h.AMBIENT|h.BUILTIN)&&!t.is(h.DECLARE)){var p=0;if(i&&i.kind==l.CLASS){assert(u.is(h.INSTANCE)),u.locals.set("this",new N(t.program,"this",p++,assert(n.thisType)));var d=i.contextualTypeArguments;if(d){u.contextualTypeArguments||(u.contextualTypeArguments=new Map);try{for(var f=a(d),_=f.next();!_.done;_=f.next()){var m=o(_.value,2),y=m[0],g=m[1];u.contextualTypeArguments.set(y,g)}}catch(e){s={error:e}}finally{try{_&&!_.done&&(c=f.return)&&c.call(f)}finally{if(s)throw s.error}}}}else assert(!u.is(h.INSTANCE));for(var E=n.parameterTypes,T=0,v=E.length;T<v;++T){var A=E[T],I=n.getParameterName(T);u.locals.set(I,new N(t.program,I,p++,A))}}return u.flow=D.create(u),u}return i(t,e),t.prototype.addLocal=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null);var n=this.signature.parameterTypes.length+this.additionalLocals.length;this.is(h.INSTANCE)&&++n;var i=new N(this.prototype.program,t||"var$"+n.toString(10),n,e,r);if(t){if(this.locals.has(t))throw new Error("duplicate local name");this.locals.set(t,i)}return this.additionalLocals.push(e),i},t.prototype.getTempLocal=function(e){var t;switch(e.toNativeType()){case p.NativeType.I32:t=this.tempI32s;break;case p.NativeType.I64:t=this.tempI64s;break;case p.NativeType.F32:t=this.tempF32s;break;case p.NativeType.F64:t=this.tempF64s;break;default:throw new Error("concrete type expected")}if(t&&t.length){var r=t.pop();return r.type=e,r}return this.addLocal(e)},t.prototype.freeTempLocal=function(e){var t;switch(assert(null!=e.type),e.type.toNativeType()){case p.NativeType.I32:t=this.tempI32s||(this.tempI32s=[]);break;case p.NativeType.I64:t=this.tempI64s||(this.tempI64s=[]);break;case p.NativeType.F32:t=this.tempF32s||(this.tempF32s=[]);break;case p.NativeType.F64:t=this.tempF64s||(this.tempF64s=[]);break;default:throw new Error("concrete type expected")}t.push(e)},t.prototype.getAndFreeTempLocal=function(e){var t;switch(e.toNativeType()){case p.NativeType.I32:t=this.tempI32s||(this.tempI32s=[]);break;case p.NativeType.I64:t=this.tempI64s||(this.tempI64s=[]);break;case p.NativeType.F32:t=this.tempF32s||(this.tempF32s=[]);break;case p.NativeType.F64:t=this.tempF64s||(this.tempF64s=[]);break;default:throw new Error("concrete type expected")}if(t.length>0)return t[t.length-1];var r=this.addLocal(e);return t.push(r),r},t.prototype.enterBreakContext=function(){var e=this.nextBreakId++;return this.breakStack?this.breakStack.push(e):this.breakStack=[e],this.breakContext=e.toString(10)},t.prototype.leaveBreakContext=function(){assert(null!=this.breakStack);var e=this.breakStack.length;assert(e>0),this.breakStack.pop(),e>1?this.breakContext=this.breakStack[e-2].toString(10):(this.breakContext=null,this.breakStack=null)},t.prototype.finalize=function(e,t){if(this.ref=t,assert(!this.breakStack||!this.breakStack.length),this.breakStack=null,this.breakContext=null,this.tempI32s=this.tempI64s=this.tempF32s=this.tempF64s=null,this.program.options.sourceMap){var r=this.debugLocations;if(r)for(var n=0,i=r.length;n<i;++n){var a=r[n];e.setDebugLocation(t,a.debugInfoRef,a.source.debugInfoIndex,a.line,a.column)}}this.debugLocations=null},t.prototype.toString=function(){return this.prototype.simpleName},t}(g);t.Function=S;var O=function(e){function t(t,r){var n=e.call(this,t,"","")||this;n.kind=l.FUNCTION_TARGET;var i=r.toSignatureString();return n.simpleName=i,n.internalName=i,n.signature=r,n.type=c.Type.u32.asFunction(r),n}return i(t,e),t}(g);t.FunctionTarget=O;var k=function(e){function t(t,r,n,i){var a=e.call(this,t.program,r,n)||this;return a.kind=l.FIELD_PROTOTYPE,a.classPrototype=t,a.declaration=i,a.flags=i.flags,a}return i(t,e),t}(g);t.FieldPrototype=k;var L=function(e){function t(t,r,n,i){var a=e.call(this,t.program,t.simpleName,r,n,i)||this;return a.kind=l.FIELD,a.memoryOffset=-1,a.prototype=t,a.flags=t.flags,a.type=n,a}return i(t,e),t}(A);t.Field=L;var x=function(e){function t(t,r,n,i){var a=e.call(this,t,r,n)||this;return a.kind=l.PROPERTY,a.getterPrototype=null,a.setterPrototype=null,a.parent=i,a}return i(t,e),t}(g);t.Property=x;var R=function(e){function r(t,r,n,i){var a=e.call(this,t,r,n)||this;return a.kind=l.CLASS_PROTOTYPE,a.instances=new Map,a.instanceMembers=null,a.basePrototype=null,a.constructorPrototype=null,a.fnIndexedGet=null,a.fnIndexedSet=null,a.fnConcat=null,a.fnSubtract=null,a.fnMultiply=null,a.fnDivide=null,a.fnFractional=null,a.fnBitwiseAnd=null,a.fnBitwiseOr=null,a.fnBitwiseXor=null,a.fnEquals=null,a.fnNotEquals=null,a.fnGreaterThan=null,a.fnGreaterThanEquals=null,a.fnLessThan=null,a.fnLessThanEquals=null,a.declaration=i,a.flags=i.flags,a}return i(r,e),r.prototype.resolve=function(e,r){void 0===r&&(r=null);var n=e?c.typesToString(e):"",i=this.instances.get(n);if(i)return i;var p=r;if(r=new Map,p)try{for(var d=a(p),f=d.next();!f.done;f=d.next()){var _=o(f.value,2),m=_[0],y=_[1];r.set(m,y)}}catch(e){N={error:e}}finally{try{f&&!f.done&&(C=d.return)&&C.call(d)}finally{if(N)throw N.error}}var g,E,T=this.declaration,v=null;if(T.extendsType){var A=this.program.resolveType(T.extendsType,null);if(!A)return null;if(!(v=A.classReference))return this.program.error(s.DiagnosticCode.A_class_may_only_extend_another_class,T.extendsType.range),null;if(v.is(h.SEALED))return this.program.error(s.DiagnosticCode.Class_0_is_sealed_and_cannot_be_extended,T.extendsType.range,v.internalName),null;if(v.prototype.is(h.UNMANAGED)!=this.is(h.UNMANAGED))return this.program.error(s.DiagnosticCode.Structs_cannot_extend_classes_and_vice_versa,u.Range.join(T.name.range,T.extendsType.range)),null}if(e){if((E=e.length)!=T.typeParameters.length)throw new Error("type argument count mismatch");for(g=0;g<E;++g)r.set(T.typeParameters[g].name.text,e[g])}else if(T.typeParameters.length)throw new Error("type argument count mismatch");var I=this.simpleName,b=this.internalName;n.length&&(I+="<"+n+">",b+="<"+n+">"),(i=new B(this,I,b,e,v)).contextualTypeArguments=r,this.instances.set(n,i);var N,C,S,O,k,R,w=0;if(v&&(w=v.currentMemoryOffset,v.members)){i.members||(i.members=new Map);try{for(var U=a(v.members.values()),D=U.next();!D.done;D=U.next()){var F=D.value;i.members.set(F.simpleName,F)}}catch(e){S={error:e}}finally{try{D&&!D.done&&(O=U.return)&&O.call(U)}finally{if(S)throw S.error}}}if(this.constructorPrototype){var M=this.constructorPrototype.resolvePartial(e);M&&(i.constructorInstance=M.resolve())}if(this.instanceMembers)try{for(var P=a(this.instanceMembers.values()),G=P.next();!G.done;G=P.next()){var K=G.value;switch(K.kind){case l.FIELD_PROTOTYPE:i.members||(i.members=new Map);var z=K.declaration;if(!z.type)throw new Error("type expected");var H=this.program.resolveType(z.type,i.contextualTypeArguments);if(H){var V=new L(K,b+t.INSTANCE_DELIMITER+K.simpleName,H,z);switch(H.byteSize){case 1:break;case 2:1&w&&++w;break;case 4:3&w&&(w=1+(3|w));break;case 8:7&w&&(w=1+(7|w));break;default:assert(!1)}V.memoryOffset=w,w+=H.byteSize,i.members.set(K.simpleName,V)}break;case l.FUNCTION_PROTOTYPE:i.members||(i.members=new Map);var Y=K.resolvePartial(e);Y&&(Y.internalName=b+t.INSTANCE_DELIMITER+Y.simpleName,i.members.set(K.simpleName,Y));break;case l.PROPERTY:i.members||(i.members=new Map);var W=assert(K.getterPrototype),X=K.setterPrototype,Q=new x(this.program,K.simpleName,b+t.INSTANCE_DELIMITER+K.simpleName,this),q=W.resolvePartial(e);if(!q)return null;if(q.internalName=b+t.INSTANCE_DELIMITER+q.simpleName,Q.getterPrototype=q,X){var j=X.resolvePartial(e);if(!j)return null;j.internalName=b+t.INSTANCE_DELIMITER+j.simpleName,Q.setterPrototype=j}i.members.set(K.simpleName,Q);break;default:assert(!1)}}}catch(e){k={error:e}}finally{try{G&&!G.done&&(R=P.return)&&R.call(P)}finally{if(k)throw k.error}}return i.currentMemoryOffset=w,i},r.prototype.resolveUsingTypeArguments=function(e,t,r){var n=null;if(this.is(h.GENERIC)){if(assert(null!=e&&0!=e.length),!(n=this.program.resolveTypeArguments(this.declaration.typeParameters,e,t,r)))return null}else assert(null==e||!e.length);return this.resolve(n,t)},r.prototype.toString=function(){return this.simpleName},r}(g);t.ClassPrototype=R;var B=function(e){function t(t,r,n,i,s){void 0===i&&(i=null),void 0===s&&(s=null);var c=e.call(this,t.program,r,n)||this;if(c.kind=l.CLASS,c.contextualTypeArguments=null,c.currentMemoryOffset=0,c.constructorInstance=null,c.prototype=t,c.flags=t.flags,c.typeArguments=i,c.type=t.program.options.usizeType.asClass(c),c.base=s,s&&s.contextualTypeArguments){c.contextualTypeArguments||(c.contextualTypeArguments=new Map);try{for(var u=a(s.contextualTypeArguments),p=u.next();!p.done;p=u.next()){var h=o(p.value,2),d=h[0],f=h[1];c.contextualTypeArguments.set(d,f)}}catch(e){y={error:e}}finally{try{p&&!p.done&&(g=u.return)&&g.call(u)}finally{if(y)throw y.error}}}var _,m,y,g,E=c.prototype.declaration;if(E){var T=E.typeParameters;if(i){if((m=i.length)!=T.length)throw new Error("type argument count mismatch");if(m)for(c.contextualTypeArguments||(c.contextualTypeArguments=new Map),_=0;_<m;++_)c.contextualTypeArguments.set(T[_].name.text,i[_])}else if(T.length)throw new Error("type argument count mismatch")}return c}return i(t,e),t.prototype.isAssignableTo=function(e){var t=this;do{if(t==e)return!0}while(t=t.base);return!1},t.prototype.getIndexedGet=function(){var e=this.members,t=this.prototype.fnIndexedGet;if(!e||null==t)return null;var r=e.get(t);return r&&r.kind==l.FUNCTION_PROTOTYPE?r:null},t.prototype.getIndexedSet=function(){var e=this.members,t=this.prototype.fnIndexedSet;if(!e||null==t)return null;var r=e.get(t);return r&&r.kind==l.FUNCTION_PROTOTYPE?r:null},t.prototype.toString=function(){return this.simpleName},t}(g);t.Class=B;var w=function(e){function t(t,r,n,i){var a=e.call(this,t,r,n,i)||this;return a.kind=l.INTERFACE_PROTOTYPE,a}return i(t,e),t}(R);t.InterfacePrototype=w;var U=function(e){function t(t,r,n,i,a){void 0===i&&(i=[]),void 0===a&&(a=null);var o=e.call(this,t,r,n,i,a)||this;return o.kind=l.INTERFACE,o}return i(t,e),t}(B);t.Interface=U,function(e){e[e.NONE=0]="NONE",e[e.RETURNS=1]="RETURNS",e[e.THROWS=2]="THROWS",e[e.BREAKS=4]="BREAKS",e[e.CONTINUES=8]="CONTINUES",e[e.ALLOCATES=16]="ALLOCATES",e[e.CONDITIONALLY_RETURNS=32]="CONDITIONALLY_RETURNS",e[e.CONDITIONALLY_THROWS=64]="CONDITIONALLY_THROWS",e[e.CONDITIONALLY_BREAKS=128]="CONDITIONALLY_BREAKS",e[e.CONDITIONALLY_CONTINUES=256]="CONDITIONALLY_CONTINUES",e[e.CONDITIONALLY_ALLOCATES=512]="CONDITIONALLY_ALLOCATES"}(t.FlowFlags||(t.FlowFlags={}));var D=function(){function e(){this.scopedLocals=null}return e.create=function(t){var r=new e;return r.parent=null,r.flags=0,r.currentFunction=t,r.continueLabel=null,r.breakLabel=null,r},e.prototype.is=function(e){return(this.flags&e)==e},e.prototype.set=function(e){this.flags|=e},e.prototype.unset=function(e){this.flags&=~e},e.prototype.enterBranchOrScope=function(){var t=new e;return t.parent=this,t.flags=this.flags,t.currentFunction=this.currentFunction,t.continueLabel=this.continueLabel,t.breakLabel=this.breakLabel,t},e.prototype.leaveBranchOrScope=function(){var e,t,r=assert(this.parent);if(this.scopedLocals){try{for(var n=a(this.scopedLocals.values()),i=n.next();!i.done;i=n.next()){var o=i.value;this.currentFunction.freeTempLocal(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.scopedLocals=null}return this.is(1)&&r.set(32),this.is(2)&&r.set(64),this.is(4)&&r.breakLabel==this.breakLabel&&r.set(128),this.is(8)&&r.continueLabel==this.continueLabel&&r.set(256),this.is(16)&&r.set(512),r},e.prototype.addScopedLocal=function(e,t,r){var n=this.currentFunction.getTempLocal(e);if(this.scopedLocals){if(this.scopedLocals.has(t))return void this.currentFunction.program.error(s.DiagnosticCode.Duplicate_identifier_0,r.name.range)}else this.scopedLocals=new Map;this.scopedLocals.set(t,n)},e.prototype.getScopedLocal=function(e){var t,r=this;do{if(r.scopedLocals&&(t=r.scopedLocals.get(e)))return t}while(r=r.parent);return this.currentFunction.locals.get(e)},e.prototype.finalize=function(){assert(null==this.parent,"must be the topmost parent flow"),this.continueLabel=null,this.breakLabel=null},e}();t.Flow=D},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(39)),n(r(38)),n(r(37)),n(r(36))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(16),a=r(1),o=r(16);function s(e){switch(e){case n.INFO:return"INFO";case n.WARNING:return"WARNING";case n.ERROR:return"ERROR";default:return assert(!1),""}}function c(e){switch(e){case n.INFO:return t.COLOR_BLUE;case n.WARNING:return t.COLOR_YELLOW;case n.ERROR:return t.COLOR_RED;default:return assert(!1),""}}t.DiagnosticCode=o.DiagnosticCode,t.diagnosticCodeToString=o.diagnosticCodeToString,function(e){e[e.INFO=0]="INFO",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(n=t.DiagnosticCategory||(t.DiagnosticCategory={})),t.diagnosticCategoryToString=s,t.COLOR_BLUE="[93m",t.COLOR_YELLOW="[93m",t.COLOR_RED="[91m",t.COLOR_RESET="[0m",t.diagnosticCategoryToColor=c;var u=function(){function e(e,t,r){this.range=null,this.code=e,this.category=t,this.message=r}return e.create=function(t,r,n,a,o){void 0===n&&(n=null),void 0===a&&(a=null),void 0===o&&(o=null);var s=i.diagnosticCodeToString(t);return null!=n&&(s=s.replace("{0}",n)),null!=a&&(s=s.replace("{1}",a)),null!=o&&(s=s.replace("{2}",o)),new e(t,r,s)},e.createInfo=function(t,r,i){return void 0===r&&(r=null),void 0===i&&(i=null),e.create(t,n.INFO,r,i)},e.createWarning=function(t,r,i){return void 0===r&&(r=null),void 0===i&&(i=null),e.create(t,n.WARNING,r,i)},e.createError=function(t,r,i){return void 0===r&&(r=null),void 0===i&&(i=null),e.create(t,n.ERROR,r,i)},e.prototype.withRange=function(e){return this.range=e,this},e.prototype.toString=function(){return this.range?s(this.category)+" "+this.code.toString(10)+': "'+this.message+'" in '+this.range.source.normalizedPath+":"+this.range.line.toString(10)+":"+this.range.column.toString(10):s(this.category)+" "+this.code.toString(10)+": "+this.message},e}();function p(e,r){void 0===r&&(r=!1);for(var n=e.source.text,i=n.length,o=e.start,s=e.end;o>0&&!a.isLineBreak(n.charCodeAt(o-1));)o--;for(;s<i&&!a.isLineBreak(n.charCodeAt(s));)s++;for(var c=["\n ",n.substring(o,s),"\n "];o<e.start;)c.push(" "),o++;if(r&&c.push(t.COLOR_RED),e.start==e.end)c.push("^");else for(;o++<e.end;)c.push("~");return r&&c.push(t.COLOR_RESET),c.join("")}t.DiagnosticMessage=u,t.formatDiagnosticMessage=function(e,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1);var i=[];if(r&&i.push(c(e.category)),i.push(s(e.category)),r&&i.push(t.COLOR_RESET),i.push(e.code<1e3?" AS":" TS"),i.push(e.code.toString(10)),i.push(": "),i.push(e.message),e.range){var a=e.range;n&&(i.push("\n"),i.push(p(e.range,r))),i.push("\n"),i.push(" in "),i.push(a.source.normalizedPath),i.push("("),i.push(a.line.toString(10)),i.push(","),i.push(a.column.toString(10)),i.push(")")}return i.join("")},t.formatDiagnosticContext=p;var l=function(){function e(e){void 0===e&&(e=null),this.diagnostics=e||new Array}return e.prototype.emitDiagnostic=function(e,t,r,n,i,a){void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=null);var o=u.create(e,t,n,i,a).withRange(r);this.diagnostics.push(o)},e.prototype.info=function(e,t,r,i,a){void 0===r&&(r=null),void 0===i&&(i=null),void 0===a&&(a=null),this.emitDiagnostic(e,n.INFO,t,r,i,a)},e.prototype.warning=function(e,t,r,i,a){void 0===r&&(r=null),void 0===i&&(i=null),void 0===a&&(a=null),this.emitDiagnostic(e,n.WARNING,t,r,i,a)},e.prototype.error=function(e,t,r,i,a){void 0===r&&(r=null),void 0===i&&(i=null),void 0===a&&(a=null),this.emitDiagnostic(e,n.ERROR,t,r,i,a)},e}();t.DiagnosticEmitter=l},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i,a,o=r(12),s=r(35);!function(e){e[e.None=_BinaryenTypeNone()]="None",e[e.I32=_BinaryenTypeInt32()]="I32",e[e.I64=_BinaryenTypeInt64()]="I64",e[e.F32=_BinaryenTypeFloat32()]="F32",e[e.F64=_BinaryenTypeFloat64()]="F64",e[e.Unreachable=_BinaryenTypeUnreachable()]="Unreachable",e[e.Auto=_BinaryenTypeAuto()]="Auto"}(i=t.NativeType||(t.NativeType={})),function(e){e[e.Invalid=_BinaryenInvalidId()]="Invalid",e[e.Block=_BinaryenBlockId()]="Block",e[e.If=_BinaryenIfId()]="If",e[e.Loop=_BinaryenLoopId()]="Loop",e[e.Break=_BinaryenBreakId()]="Break",e[e.Switch=_BinaryenSwitchId()]="Switch",e[e.Call=_BinaryenCallId()]="Call",e[e.CallImport=_BinaryenCallImportId()]="CallImport",e[e.CallIndirect=_BinaryenCallIndirectId()]="CallIndirect",e[e.GetLocal=_BinaryenGetLocalId()]="GetLocal",e[e.SetLocal=_BinaryenSetLocalId()]="SetLocal",e[e.GetGlobal=_BinaryenGetGlobalId()]="GetGlobal",e[e.SetGlobal=_BinaryenSetGlobalId()]="SetGlobal",e[e.Load=_BinaryenLoadId()]="Load",e[e.Store=_BinaryenStoreId()]="Store",e[e.Const=_BinaryenConstId()]="Const",e[e.Unary=_BinaryenUnaryId()]="Unary",e[e.Binary=_BinaryenBinaryId()]="Binary",e[e.Select=_BinaryenSelectId()]="Select",e[e.Drop=_BinaryenDropId()]="Drop",e[e.Return=_BinaryenReturnId()]="Return",e[e.Host=_BinaryenHostId()]="Host",e[e.Nop=_BinaryenNopId()]="Nop",e[e.Unreachable=_BinaryenUnreachableId()]="Unreachable",e[e.AtomicCmpxchg=_BinaryenAtomicCmpxchgId()]="AtomicCmpxchg",e[e.AtomicRMW=_BinaryenAtomicRMWId()]="AtomicRMW",e[e.AtomicWait=_BinaryenAtomicWaitId()]="AtomicWait",e[e.AtomicWake=_BinaryenAtomicWakeId()]="AtomicWake"}(a=t.ExpressionId||(t.ExpressionId={})),function(e){e[e.ClzI32=_BinaryenClzInt32()]="ClzI32",e[e.CtzI32=_BinaryenCtzInt32()]="CtzI32",e[e.PopcntI32=_BinaryenPopcntInt32()]="PopcntI32",e[e.NegF32=_BinaryenNegFloat32()]="NegF32",e[e.AbsF32=_BinaryenAbsFloat32()]="AbsF32",e[e.CeilF32=_BinaryenCeilFloat32()]="CeilF32",e[e.FloorF32=_BinaryenFloorFloat32()]="FloorF32",e[e.TruncF32=_BinaryenTruncFloat32()]="TruncF32",e[e.NearestF32=_BinaryenNearestFloat32()]="NearestF32",e[e.SqrtF32=_BinaryenSqrtFloat32()]="SqrtF32",e[e.EqzI32=_BinaryenEqZInt32()]="EqzI32",e[e.ClzI64=_BinaryenClzInt64()]="ClzI64",e[e.CtzI64=_BinaryenCtzInt64()]="CtzI64",e[e.PopcntI64=_BinaryenPopcntInt64()]="PopcntI64",e[e.NegF64=_BinaryenNegFloat64()]="NegF64",e[e.AbsF64=_BinaryenAbsFloat64()]="AbsF64",e[e.CeilF64=_BinaryenCeilFloat64()]="CeilF64",e[e.FloorF64=_BinaryenFloorFloat64()]="FloorF64",e[e.TruncF64=_BinaryenTruncFloat64()]="TruncF64",e[e.NearestF64=_BinaryenNearestFloat64()]="NearestF64",e[e.SqrtF64=_BinaryenSqrtFloat64()]="SqrtF64",e[e.EqzI64=_BinaryenEqZInt64()]="EqzI64",e[e.ExtendI32=_BinaryenExtendSInt32()]="ExtendI32",e[e.ExtendU32=_BinaryenExtendUInt32()]="ExtendU32",e[e.WrapI64=_BinaryenWrapInt64()]="WrapI64",e[e.TruncF32ToI32=_BinaryenTruncSFloat32ToInt32()]="TruncF32ToI32",e[e.TruncF32ToI64=_BinaryenTruncSFloat32ToInt64()]="TruncF32ToI64",e[e.TruncF32ToU32=_BinaryenTruncUFloat32ToInt32()]="TruncF32ToU32",e[e.TruncF32ToU64=_BinaryenTruncUFloat32ToInt64()]="TruncF32ToU64",e[e.TruncF64ToI32=_BinaryenTruncSFloat64ToInt32()]="TruncF64ToI32",e[e.TruncF64ToI64=_BinaryenTruncSFloat64ToInt64()]="TruncF64ToI64",e[e.TruncF64ToU32=_BinaryenTruncUFloat64ToInt32()]="TruncF64ToU32",e[e.TruncF64ToU64=_BinaryenTruncUFloat64ToInt64()]="TruncF64ToU64",e[e.ReinterpretF32=_BinaryenReinterpretFloat32()]="ReinterpretF32",e[e.ReinterpretF64=_BinaryenReinterpretFloat64()]="ReinterpretF64",e[e.ConvertI32ToF32=_BinaryenConvertSInt32ToFloat32()]="ConvertI32ToF32",e[e.ConvertI32ToF64=_BinaryenConvertSInt32ToFloat64()]="ConvertI32ToF64",e[e.ConvertU32ToF32=_BinaryenConvertUInt32ToFloat32()]="ConvertU32ToF32",e[e.ConvertU32ToF64=_BinaryenConvertUInt32ToFloat64()]="ConvertU32ToF64",e[e.ConvertI64ToF32=_BinaryenConvertSInt64ToFloat32()]="ConvertI64ToF32",e[e.ConvertI64ToF64=_BinaryenConvertSInt64ToFloat64()]="ConvertI64ToF64",e[e.ConvertU64ToF32=_BinaryenConvertUInt64ToFloat32()]="ConvertU64ToF32",e[e.ConvertU64ToF64=_BinaryenConvertUInt64ToFloat64()]="ConvertU64ToF64",e[e.PromoteF32=_BinaryenPromoteFloat32()]="PromoteF32",e[e.DemoteF64=_BinaryenDemoteFloat64()]="DemoteF64",e[e.ReinterpretI32=_BinaryenReinterpretInt32()]="ReinterpretI32",e[e.ReinterpretI64=_BinaryenReinterpretInt64()]="ReinterpretI64"}(t.UnaryOp||(t.UnaryOp={})),function(e){e[e.AddI32=_BinaryenAddInt32()]="AddI32",e[e.SubI32=_BinaryenSubInt32()]="SubI32",e[e.MulI32=_BinaryenMulInt32()]="MulI32",e[e.DivI32=_BinaryenDivSInt32()]="DivI32",e[e.DivU32=_BinaryenDivUInt32()]="DivU32",e[e.RemI32=_BinaryenRemSInt32()]="RemI32",e[e.RemU32=_BinaryenRemUInt32()]="RemU32",e[e.AndI32=_BinaryenAndInt32()]="AndI32",e[e.OrI32=_BinaryenOrInt32()]="OrI32",e[e.XorI32=_BinaryenXorInt32()]="XorI32",e[e.ShlI32=_BinaryenShlInt32()]="ShlI32",e[e.ShrU32=_BinaryenShrUInt32()]="ShrU32",e[e.ShrI32=_BinaryenShrSInt32()]="ShrI32",e[e.RotlI32=_BinaryenRotLInt32()]="RotlI32",e[e.RotrI32=_BinaryenRotRInt32()]="RotrI32",e[e.EqI32=_BinaryenEqInt32()]="EqI32",e[e.NeI32=_BinaryenNeInt32()]="NeI32",e[e.LtI32=_BinaryenLtSInt32()]="LtI32",e[e.LtU32=_BinaryenLtUInt32()]="LtU32",e[e.LeI32=_BinaryenLeSInt32()]="LeI32",e[e.LeU32=_BinaryenLeUInt32()]="LeU32",e[e.GtI32=_BinaryenGtSInt32()]="GtI32",e[e.GtU32=_BinaryenGtUInt32()]="GtU32",e[e.GeI32=_BinaryenGeSInt32()]="GeI32",e[e.GeU32=_BinaryenGeUInt32()]="GeU32",e[e.AddI64=_BinaryenAddInt64()]="AddI64",e[e.SubI64=_BinaryenSubInt64()]="SubI64",e[e.MulI64=_BinaryenMulInt64()]="MulI64",e[e.DivI64=_BinaryenDivSInt64()]="DivI64",e[e.DivU64=_BinaryenDivUInt64()]="DivU64",e[e.RemI64=_BinaryenRemSInt64()]="RemI64",e[e.RemU64=_BinaryenRemUInt64()]="RemU64",e[e.AndI64=_BinaryenAndInt64()]="AndI64",e[e.OrI64=_BinaryenOrInt64()]="OrI64",e[e.XorI64=_BinaryenXorInt64()]="XorI64",e[e.ShlI64=_BinaryenShlInt64()]="ShlI64",e[e.ShrU64=_BinaryenShrUInt64()]="ShrU64",e[e.ShrI64=_BinaryenShrSInt64()]="ShrI64",e[e.RotlI64=_BinaryenRotLInt64()]="RotlI64",e[e.RotrI64=_BinaryenRotRInt64()]="RotrI64",e[e.EqI64=_BinaryenEqInt64()]="EqI64",e[e.NeI64=_BinaryenNeInt64()]="NeI64",e[e.LtI64=_BinaryenLtSInt64()]="LtI64",e[e.LtU64=_BinaryenLtUInt64()]="LtU64",e[e.LeI64=_BinaryenLeSInt64()]="LeI64",e[e.LeU64=_BinaryenLeUInt64()]="LeU64",e[e.GtI64=_BinaryenGtSInt64()]="GtI64",e[e.GtU64=_BinaryenGtUInt64()]="GtU64",e[e.GeI64=_BinaryenGeSInt64()]="GeI64",e[e.GeU64=_BinaryenGeUInt64()]="GeU64",e[e.AddF32=_BinaryenAddFloat32()]="AddF32",e[e.SubF32=_BinaryenSubFloat32()]="SubF32",e[e.MulF32=_BinaryenMulFloat32()]="MulF32",e[e.DivF32=_BinaryenDivFloat32()]="DivF32",e[e.CopysignF32=_BinaryenCopySignFloat32()]="CopysignF32",e[e.MinF32=_BinaryenMinFloat32()]="MinF32",e[e.MaxF32=_BinaryenMaxFloat32()]="MaxF32",e[e.EqF32=_BinaryenEqFloat32()]="EqF32",e[e.NeF32=_BinaryenNeFloat32()]="NeF32",e[e.LtF32=_BinaryenLtFloat32()]="LtF32",e[e.LeF32=_BinaryenLeFloat32()]="LeF32",e[e.GtF32=_BinaryenGtFloat32()]="GtF32",e[e.GeF32=_BinaryenGeFloat32()]="GeF32",e[e.AddF64=_BinaryenAddFloat64()]="AddF64",e[e.SubF64=_BinaryenSubFloat64()]="SubF64",e[e.MulF64=_BinaryenMulFloat64()]="MulF64",e[e.DivF64=_BinaryenDivFloat64()]="DivF64",e[e.CopysignF64=_BinaryenCopySignFloat64()]="CopysignF64",e[e.MinF64=_BinaryenMinFloat64()]="MinF64",e[e.MaxF64=_BinaryenMaxFloat64()]="MaxF64",e[e.EqF64=_BinaryenEqFloat64()]="EqF64",e[e.NeF64=_BinaryenNeFloat64()]="NeF64",e[e.LtF64=_BinaryenLtFloat64()]="LtF64",e[e.LeF64=_BinaryenLeFloat64()]="LeF64",e[e.GtF64=_BinaryenGtFloat64()]="GtF64",e[e.GeF64=_BinaryenGeFloat64()]="GeF64"}(t.BinaryOp||(t.BinaryOp={})),function(e){e[e.PageSize=_BinaryenPageSize()]="PageSize",e[e.CurrentMemory=_BinaryenCurrentMemory()]="CurrentMemory",e[e.GrowMemory=_BinaryenGrowMemory()]="GrowMemory",e[e.HasFeature=_BinaryenHasFeature()]="HasFeature"}(t.HostOp||(t.HostOp={})),function(e){e[e.Add=_BinaryenAtomicRMWAdd()]="Add",e[e.Sub=_BinaryenAtomicRMWSub()]="Sub",e[e.And=_BinaryenAtomicRMWAnd()]="And",e[e.Or=_BinaryenAtomicRMWOr()]="Or",e[e.Xor=_BinaryenAtomicRMWXor()]="Xor",e[e.Xchg=_BinaryenAtomicRMWXchg()]="Xchg"}(t.AtomicRMWOp||(t.AtomicRMWOp={}));var c=function(){function e(){}return e.create=function(t,r){var n=new e;return n.buffer=t,n.offset=r,n},e}();t.MemorySegment=c;var u=function(){function e(){this.funcsCount=0,this.customTypeMap=new Map}return e.create=function(){var t=new e;return t.ref=_BinaryenModuleCreate(),t.out=allocate_memory(16),t},e.createFrom=function(t){var r=l(t);try{var n=new e;return n.ref=_BinaryenModuleRead(r,t.length),n.out=allocate_memory(24),n}finally{free_memory(changetype(r))}},e.prototype.addFunctionType=function(e,t,r){var n=d(e),i=h(r);try{return _BinaryenAddFunctionType(this.ref,n,t,i,r?r.length:0)}finally{free_memory(i),free_memory(n)}},e.prototype.getFunctionTypeBySignature=function(e,t){var r=h(t);try{return _BinaryenGetFunctionTypeBySignature(this.ref,e,r,t?t.length:0)}finally{free_memory(r)}},e.prototype.createI32=function(e){var t=this.out;return _BinaryenLiteralInt32(t,e),_BinaryenConst(this.ref,t)},e.prototype.createI64=function(e,t){void 0===t&&(t=0);var r=this.out;return _BinaryenLiteralInt64(r,e,t),_BinaryenConst(this.ref,r)},e.prototype.createF32=function(e){var t=this.out;return _BinaryenLiteralFloat32(t,e),_BinaryenConst(this.ref,t)},e.prototype.createF64=function(e){var t=this.out;return _BinaryenLiteralFloat64(t,e),_BinaryenConst(this.ref,t)},e.prototype.createUnary=function(e,t){return _BinaryenUnary(this.ref,e,t)},e.prototype.createBinary=function(e,t,r){return _BinaryenBinary(this.ref,e,t,r)},e.prototype.createHost=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null);var n=d(t),i=h(r);try{return _BinaryenHost(this.ref,e,n,i,r?r.length:0)}finally{free_memory(i),free_memory(n)}},e.prototype.createGetLocal=function(e,t){return _BinaryenGetLocal(this.ref,e,t)},e.prototype.createTeeLocal=function(e,t){return _BinaryenTeeLocal(this.ref,e,t)},e.prototype.createGetGlobal=function(e,t){var r=d(e);try{return _BinaryenGetGlobal(this.ref,r,t)}finally{free_memory(r)}},e.prototype.createLoad=function(e,t,r,n,i){return void 0===i&&(i=0),_BinaryenLoad(this.ref,e,t?1:0,i,e,n,r)},e.prototype.createStore=function(e,t,r,n,i){return void 0===i&&(i=0),_BinaryenStore(this.ref,e,i,e,t,r,n)},e.prototype.createAtomicLoad=function(e,t,r,n){return void 0===n&&(n=0),_BinaryenAtomicLoad(this.ref,e,n,r,t)},e.prototype.createAtomicStore=function(e,t,r,n,i){return void 0===i&&(i=0),_BinaryenAtomicStore(this.ref,e,i,t,r,n)},e.prototype.createAtomicRMW=function(e,t,r,n,i,a){return _BinaryenAtomicRMW(this.ref,e,t,r,n,i,a)},e.prototype.createAtomicCmpxchg=function(e,t,r,n,i,a){return _BinaryenAtomicCmpxchg(this.ref,e,t,r,n,i,a)},e.prototype.createAtomicWait=function(e,t,r,n){return _BinaryenAtomicWait(this.ref,e,t,r,n)},e.prototype.createAtomicWake=function(e,t){return _BinaryenAtomicWake(this.ref,e,t)},e.prototype.createSetLocal=function(e,t){return _BinaryenSetLocal(this.ref,e,t)},e.prototype.createSetGlobal=function(e,t){var r=d(e);try{return _BinaryenSetGlobal(this.ref,r,t)}finally{free_memory(r)}},e.prototype.createBlock=function(e,t,r){void 0===r&&(r=i.None);var n=d(e),a=h(t);try{return _BinaryenBlock(this.ref,n,a,t.length,r)}finally{free_memory(a),free_memory(n)}},e.prototype.createBreak=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0);var n=d(e);try{return _BinaryenBreak(this.ref,n,t,r)}finally{free_memory(n)}},e.prototype.createDrop=function(e){return _BinaryenDrop(this.ref,e)},e.prototype.createLoop=function(e,t){var r=d(e);try{return _BinaryenLoop(this.ref,r,t)}finally{free_memory(r)}},e.prototype.createIf=function(e,t,r){return void 0===r&&(r=0),_BinaryenIf(this.ref,e,t,r)},e.prototype.createNop=function(){return _BinaryenNop(this.ref)},e.prototype.createReturn=function(e){return void 0===e&&(e=0),_BinaryenReturn(this.ref,e)},e.prototype.createSelect=function(e,t,r){return _BinaryenSelect(this.ref,r,e,t)},e.prototype.createSwitch=function(e,t,r,n){void 0===n&&(n=0);for(var i=e.length,a=new Array(i),o=0;o<i;++o)a[o]=d(e[o]);var s=h(a),c=d(t);try{return _BinaryenSwitch(this.ref,s,i,c,r,n)}finally{free_memory(c),free_memory(s);for(o=i-1;o>=0;--o)free_memory(a[o])}},e.prototype.createCall=function(e,t,r){var n=d(e),i=h(t);try{return _BinaryenCall(this.ref,n,i,t&&t.length||0,r)}finally{free_memory(i),free_memory(n)}},e.prototype.createCallImport=function(e,t,r){var n=d(e),i=h(t);try{return _BinaryenCallImport(this.ref,n,i,t&&t.length||0,r)}finally{free_memory(i),free_memory(n)}},e.prototype.createCallIndirect=function(e,t,r){var n=h(t),i=d(r);try{return _BinaryenCallIndirect(this.ref,e,n,t&&t.length||0,i)}finally{free_memory(i),free_memory(n)}},e.prototype.createUnreachable=function(){return _BinaryenUnreachable(this.ref)},e.prototype.addGlobal=function(e,t,r,n){var i=d(e);try{return _BinaryenAddGlobal(this.ref,i,t,r?1:0,n)}finally{free_memory(i)}},e.prototype.addFunction=function(e,t,r,n,i){void 0===i&&(i=null);var a=d(e),o=h(r);i&&this.customTypeMap.set(i,(this.customTypeMap.get(i)||[]).concat([this.funcsCount])),"__precompute"!==e&&this.funcsCount++;try{return _BinaryenAddFunction(this.ref,a,t,o,r?r.length:0,n)}finally{free_memory(o),free_memory(a)}},e.prototype.removeFunction=function(e){var t=d(e);try{_BinaryenRemoveFunction(this.ref,t)}finally{free_memory(t)}},e.prototype.addFunctionExport=function(e,t){var r=d(e),n=d(t);try{return _BinaryenAddFunctionExport(this.ref,r,n)}finally{free_memory(n),free_memory(r)}},e.prototype.addTableExport=function(e,t){var r=d(e),n=d(t);try{return _BinaryenAddTableExport(this.ref,r,n)}finally{free_memory(n),free_memory(r)}},e.prototype.addMemoryExport=function(e,t){var r=d(e),n=d(t);try{return _BinaryenAddMemoryExport(this.ref,r,n)}finally{free_memory(n),free_memory(r)}},e.prototype.addGlobalExport=function(e,t){var r=d(e),n=d(t);try{return _BinaryenAddGlobalExport(this.ref,r,n)}finally{free_memory(n),free_memory(r)}},e.prototype.removeExport=function(e){var t=d(e);try{_BinaryenRemoveExport(this.ref,t)}finally{free_memory(t)}},e.prototype.addFunctionImport=function(e,t,r,n){var i=d(e),a=d(t),o=d(r);try{return _BinaryenAddFunctionImport(this.ref,i,a,o,n)}finally{free_memory(o),free_memory(a),free_memory(i)}},e.prototype.addTableImport=function(e,t,r){var n=d(e),i=d(t),a=d(r);try{return _BinaryenAddTableImport(this.ref,n,i,a)}finally{free_memory(a),free_memory(i),free_memory(n)}},e.prototype.addMemoryImport=function(e,t,r){var n=d(e),i=d(t),a=d(r);try{return _BinaryenAddMemoryImport(this.ref,n,i,a)}finally{free_memory(a),free_memory(i),free_memory(n)}},e.prototype.addGlobalImport=function(e,t,r,n){var i=d(e),a=d(t),o=d(r);try{return _BinaryenAddGlobalImport(this.ref,i,a,o,n)}finally{free_memory(o),free_memory(a),free_memory(i)}},e.prototype.removeImport=function(e){var t=d(e);try{_BinaryenRemoveImport(this.ref,t)}finally{free_memory(t)}},e.prototype.setMemory=function(e,t,r,n,i){void 0===i&&(i=null);for(var a=d(i),s=r.length,c=new Array(s),u=new Array(s),p=new Array(s),f=0;f<s;++f){var _=r[f].buffer,m=r[f].offset;c[f]=l(_),u[f]=n==o.Target.WASM64?this.createI64(i64_low(m),i64_high(m)):this.createI32(i64_low(m)),p[f]=_.length}var y=h(c),g=h(u),E=h(p);try{_BinaryenSetMemory(this.ref,e,t,a,y,g,E,s)}finally{free_memory(E),free_memory(g),free_memory(y);for(f=s-1;f>=0;--f)free_memory(c[f]);free_memory(a)}},e.prototype.setFunctionTable=function(e){var t=h(e);try{_BinaryenSetFunctionTable(this.ref,t,e.length)}finally{free_memory(t)}},e.prototype.setStart=function(e){_BinaryenSetStart(this.ref,e)},e.prototype.setOptimizeLevel=function(e){void 0===e&&(e=2),_BinaryenSetOptimizeLevel(e)},e.prototype.setShrinkLevel=function(e){void 0===e&&(e=1),_BinaryenSetShrinkLevel(e)},e.prototype.setDebugInfo=function(e){void 0===e&&(e=!1),_BinaryenSetDebugInfo(e)},e.prototype.optimize=function(e){void 0===e&&(e=0),e?_BinaryenFunctionOptimize(e,this.ref):_BinaryenModuleOptimize(this.ref)},e.prototype.runPasses=function(e,t){void 0===t&&(t=0);for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=d(e[i]);var a=h(n);try{t?_BinaryenFunctionRunPasses(t,this.ref,a,r):_BinaryenModuleRunPasses(this.ref,a,r)}finally{free_memory(a);for(i=r;i>=0;--i)free_memory(n[i])}},e.prototype.validate=function(){return 1==_BinaryenModuleValidate(this.ref)},e.prototype.interpret=function(){_BinaryenModuleInterpret(this.ref)},e.prototype.toBinary=function(e){var t={};if(this.customTypeMap.size>0){t.types=[],t.typeMap=[];var r=0;try{for(var i=n(this.customTypeMap.keys()),a=i.next();!a.done;a=i.next()){var o=a.value;t.types.push({form:"func",params:o.split(",")});var c=this.customTypeMap.get(o)||[];t.typeMap=t.typeMap.concat(c.map(function(e){return{func:e,type:r}})),r++}}catch(e){u={error:e}}finally{try{a&&!a.done&&(p=i.return)&&p.call(i)}finally{if(u)throw u.error}}}var u,p,l=this.out,h=d(e),y=0,g=0;try{_BinaryenModuleAllocateAndWrite(l,this.ref,h),y=f(l);var E=f(l+4);g=f(l+8);var T=new m;return T.output=s.encodeAndInject(t,function(e,t){for(var r=new Uint8Array(t),n=0;n<t;++n)r[n]=load(e+n);return r}(y,E)),T.sourceMap=_(g),T}finally{h&&free_memory(h),y&&free_memory(y),g&&free_memory(g)}},e.prototype.toText=function(){throw new Error("not implemented")},e.prototype.toAsmjs=function(){throw new Error("not implemented")},e.prototype.dispose=function(){this.ref&&(_BinaryenModuleDispose(this.ref),free_memory(this.out))},e.prototype.createRelooper=function(){return p.create(this)},e.prototype.cloneExpression=function(e,t,r){if(void 0===t&&(t=!1),void 0===r&&(r=i32.MAX_VALUE),r<0)return 0;var n,o;switch(r-=1,_BinaryenExpressionGetId(e)){case a.Const:switch(_BinaryenExpressionGetType(e)){case i.I32:return this.createI32(_BinaryenConstGetValueI32(e));case i.I64:return this.createI64(_BinaryenConstGetValueI64Low(e),_BinaryenConstGetValueI64High(e));case i.F32:return this.createF32(_BinaryenConstGetValueF32(e));case i.F64:return this.createF64(_BinaryenConstGetValueF64(e));default:throw new Error("concrete type expected")}case a.GetLocal:return _BinaryenGetLocal(this.ref,_BinaryenGetLocalGetIndex(e),_BinaryenExpressionGetType(e));case a.GetGlobal:var s=_BinaryenGetGlobalGetName(e);if(!s)break;return _BinaryenGetGlobal(this.ref,s,_BinaryenExpressionGetType(e));case a.Load:if(!(n=this.cloneExpression(_BinaryenLoadGetPtr(e),t,r)))break;return _BinaryenLoadIsAtomic(e)?_BinaryenAtomicLoad(this.ref,_BinaryenLoadGetBytes(e),_BinaryenLoadGetOffset(e),_BinaryenExpressionGetType(e),n):_BinaryenLoad(this.ref,_BinaryenLoadGetBytes(e),_BinaryenLoadIsSigned(e)?1:0,_BinaryenLoadGetOffset(e),_BinaryenLoadGetAlign(e),_BinaryenExpressionGetType(e),n);case a.Unary:if(!(n=this.cloneExpression(_BinaryenUnaryGetValue(e),t,r)))break;return _BinaryenUnary(this.ref,_BinaryenUnaryGetOp(e),n);case a.Binary:if(!(n=this.cloneExpression(_BinaryenBinaryGetLeft(e),t,r)))break;if(!(o=this.cloneExpression(_BinaryenBinaryGetRight(e),t,r)))break;return _BinaryenBinary(this.ref,_BinaryenBinaryGetOp(e),n,o)}return 0},e.prototype.addDebugInfoFile=function(e){var t=d(e);try{return _BinaryenModuleAddDebugInfoFileName(this.ref,t)}finally{free_memory(t)}},e.prototype.getDebugInfoFile=function(e){return _(_BinaryenModuleGetDebugInfoFileName(this.ref,e))},e.prototype.setDebugLocation=function(e,t,r,n,i){_BinaryenFunctionSetDebugLocation(e,t,r,n,i)},e.MAX_MEMORY_WASM32=65535,e.MAX_MEMORY_WASM64=65535,e}();t.Module=u;var p=function(){function e(){}return e.create=function(t){var r=new e;return r.module=t,r.ref=_RelooperCreate(),r},e.createStub=function(t){var r=new e;return r.module=t,r.ref=0,r},e.prototype.addBlock=function(e){return _RelooperAddBlock(this.ref,e)},e.prototype.addBranch=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0),_RelooperAddBranch(e,t,r,n)},e.prototype.addBlockWithSwitch=function(e,t){return _RelooperAddBlockWithSwitch(this.ref,e,t)},e.prototype.addBranchForSwitch=function(e,t,r,n){void 0===n&&(n=0);var i=h(r);try{_RelooperAddBranchForSwitch(e,t,i,r.length,n)}finally{free_memory(i)}},e.prototype.renderAndDispose=function(e,t){return _RelooperRenderAndDispose(this.ref,e,t,this.module.ref)},e}();function l(e){if(!e)return 0;for(var t=e.length,r=allocate_memory(t),n=r,i=0;i<t;++i)store(n++,e[i]);return r}function h(e){if(!e)return 0;for(var t=allocate_memory(e.length<<2),r=t,n=0,i=e.length;n<i;++n){var a=e[n];store(r,255&a),store(r+1,a>>8&255),store(r+2,a>>16&255),store(r+3,a>>>24),r+=4}return t}function d(e){if(null==e)return 0;for(var t=allocate_memory(function(e){for(var t=0,r=0,n=e.length;r<n;++r){var i=e.charCodeAt(r);i>=55296&&i<=57343&&r+1<n&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++r)),i<=127?++t:t+=i<=2047?2:i<=65535?3:i<=2097151?4:i<=67108863?5:6}return t}(e)+1),r=t,n=0,i=e.length;n<i;++n){var a=e.charCodeAt(n);a>=55296&&a<=57343&&n+1<i&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++n)),a<=127?store(r++,a):a<=2047?(store(r++,192|a>>>6),store(r++,128|63&a)):a<=65535?(store(r++,224|a>>>12),store(r++,128|a>>>6&63),store(r++,128|63&a)):a<=2097151?(store(r++,240|a>>>18),store(r++,128|a>>>12&63),store(r++,128|a>>>6&63),store(r++,128|63&a)):a<=67108863?(store(r++,248|a>>>24),store(r++,128|a>>>18&63),store(r++,128|a>>>12&63),store(r++,128|a>>>6&63),store(r++,128|63&a)):(store(r++,252|a>>>30),store(r++,128|a>>>24&63),store(r++,128|a>>>18&63),store(r++,128|a>>>12&63),store(r++,128|a>>>6&63),store(r++,128|63&a))}return store(r,0),t}function f(e){return load(e)|load(e+1)<<8|load(e+2)<<16|load(e+3)<<24}function _(e){if(!e)return null;for(var t,r,n,i,a,o=new Array;t=load(e++);)128&t?(r=63&load(e++),192!=(224&t)?(n=63&load(e++),224==(240&t)?t=(15&t)<<12|r<<6|n:(i=63&load(e++),240==(248&t)?t=(7&t)<<18|r<<12|n<<6|i:(a=63&load(e++),t=248==(252&t)?(3&t)<<24|r<<18|n<<12|i<<6|a:(1&t)<<30|r<<24|n<<18|i<<12|a<<6|63&load(e++)))):o.push((31&t)<<6|r)):o.push(t);return String.fromCodePoints(o)}t.Relooper=p,t.readString=_;var m=function(){return function(){}}();t.BinaryModule=m},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=r(10);t.Token=o.Token,t.Range=o.Range;var s,c=r(1);!function(e){e[e.SOURCE=0]="SOURCE",e[e.TYPE=1]="TYPE",e[e.TYPEPARAMETER=2]="TYPEPARAMETER",e[e.PARAMETER=3]="PARAMETER",e[e.SIGNATURE=4]="SIGNATURE",e[e.IDENTIFIER=5]="IDENTIFIER",e[e.ASSERTION=6]="ASSERTION",e[e.BINARY=7]="BINARY",e[e.CALL=8]="CALL",e[e.COMMA=9]="COMMA",e[e.ELEMENTACCESS=10]="ELEMENTACCESS",e[e.FALSE=11]="FALSE",e[e.FUNCTION=12]="FUNCTION",e[e.LITERAL=13]="LITERAL",e[e.NEW=14]="NEW",e[e.NULL=15]="NULL",e[e.PARENTHESIZED=16]="PARENTHESIZED",e[e.PROPERTYACCESS=17]="PROPERTYACCESS",e[e.TERNARY=18]="TERNARY",e[e.SUPER=19]="SUPER",e[e.THIS=20]="THIS",e[e.TRUE=21]="TRUE",e[e.CONSTRUCTOR=22]="CONSTRUCTOR",e[e.UNARYPOSTFIX=23]="UNARYPOSTFIX",e[e.UNARYPREFIX=24]="UNARYPREFIX",e[e.BLOCK=25]="BLOCK",e[e.BREAK=26]="BREAK",e[e.CONTINUE=27]="CONTINUE",e[e.DO=28]="DO",e[e.EMPTY=29]="EMPTY",e[e.EXPORT=30]="EXPORT",e[e.EXPORTIMPORT=31]="EXPORTIMPORT",e[e.EXPRESSION=32]="EXPRESSION",e[e.FOR=33]="FOR",e[e.IF=34]="IF",e[e.IMPORT=35]="IMPORT",e[e.RETURN=36]="RETURN",e[e.SWITCH=37]="SWITCH",e[e.THROW=38]="THROW",e[e.TRY=39]="TRY",e[e.VARIABLE=40]="VARIABLE",e[e.VOID=41]="VOID",e[e.WHILE=42]="WHILE",e[e.CLASSDECLARATION=43]="CLASSDECLARATION",e[e.ENUMDECLARATION=44]="ENUMDECLARATION",e[e.ENUMVALUEDECLARATION=45]="ENUMVALUEDECLARATION",e[e.FIELDDECLARATION=46]="FIELDDECLARATION",e[e.FUNCTIONDECLARATION=47]="FUNCTIONDECLARATION",e[e.IMPORTDECLARATION=48]="IMPORTDECLARATION",e[e.INTERFACEDECLARATION=49]="INTERFACEDECLARATION",e[e.METHODDECLARATION=50]="METHODDECLARATION",e[e.NAMESPACEDECLARATION=51]="NAMESPACEDECLARATION",e[e.TYPEDECLARATION=52]="TYPEDECLARATION",e[e.VARIABLEDECLARATION=53]="VARIABLEDECLARATION",e[e.DECORATOR=54]="DECORATOR",e[e.EXPORTMEMBER=55]="EXPORTMEMBER",e[e.SWITCHCASE=56]="SWITCHCASE",e[e.COMMENT=57]="COMMENT"}(s=t.NodeKind||(t.NodeKind={}));var u=function(){function e(){this.parent=null,this.flags=a.CommonFlags.NONE}return e.prototype.is=function(e){return(this.flags&e)==e},e.prototype.isAny=function(e){return 0!=(this.flags&e)},e.prototype.set=function(e){this.flags|=e},e.createType=function(e,t,r,n){var i=new l;return i.range=n,i.name=e,e.parent=i,i.typeArguments=t,t&&xe(t,i),i.isNullable=r,i},e.createOmittedType=function(t){return e.createType(e.createIdentifierExpression("",t),null,!1,t)},e.createTypeParameter=function(e,t,r){var n=new h;return n.range=r,n.name=e,e.parent=n,n.extendsType=t,t&&(t.parent=n),n},e.createParameter=function(e,t,r,n,i){var a=new d;return a.range=i,a.name=e,e.parent=a,a.type=t,t&&(t.parent=a),a.initializer=r,r&&(r.parent=a),a.parameterKind=n,a},e.createSignature=function(e,t,r,n,i){var a=new _;return a.range=i,a.parameterTypes=e,xe(e,a),a.returnType=t,t.parent=a,a.explicitThisType=r,r&&(r.parent=a),a.isNullable=n,a},e.createDecorator=function(e,t,r){var n=new m;if(n.range=r,n.name=e,e.parent=n,n.arguments=t,t&&xe(t,n),e.kind==s.IDENTIFIER)switch(e.text){case"global":n.decoratorKind=f.GLOBAL;break;case"operator":n.decoratorKind=f.OPERATOR;break;case"unmanaged":n.decoratorKind=f.UNMANAGED;break;case"offset":n.decoratorKind=f.OFFSET;break;case"type":n.decoratorKind=f.FUNCTION_TYPE;break;default:n.decoratorKind=f.CUSTOM}else n.decoratorKind=f.CUSTOM;return n},e.createComment=function(e,t,r){var n=new y;return n.range=r,n.commentKind=t,n.text=e,n},e.createIdentifierExpression=function(e,t){var r=new T;return r.range=t,r.text=e,r},e.createEmptyIdentifierExpression=function(e){var t=new T;return t.range=e,t.text="",t},e.createArrayLiteralExpression=function(e,t){var r=new A;return r.range=t,r.elementExpressions=e,function(e,t){for(var r=0,n=e.length;r<n;++r){var i=e[r];i&&(i.parent=t)}}(e,r),r},e.createAssertionExpression=function(e,t,r,n){var i=new I;return i.range=n,i.assertionKind=e,i.expression=t,t.parent=i,i.toType=r,r.parent=i,i},e.createBinaryExpression=function(e,t,r,n){var i=new b;return i.range=n,i.operator=e,i.left=t,t.parent=i,i.right=r,r.parent=i,i},e.createCallExpression=function(e,t,r,n){var i=new N;return i.range=n,i.expression=e,e.parent=i,i.typeArguments=t,t&&xe(t,i),i.arguments=r,xe(r,i),i},e.createCommaExpression=function(e,t){var r=new C;return r.range=t,r.expressions=e,xe(e,r),r},e.createConstructorExpression=function(e){var t=new S;return t.range=e,t},e.createElementAccessExpression=function(e,t,r){var n=new O;return n.range=r,n.expression=e,e.parent=n,n.elementExpression=t,t.parent=n,n},e.createFalseExpression=function(e){var t=new z;return t.range=e,t},e.createFloatLiteralExpression=function(e,t){var r=new k;return r.range=t,r.value=e,r},e.createFunctionExpression=function(e){var t=new L;return t.flags=e.flags&a.CommonFlags.ARROW,t.range=e.range,t.declaration=e,t},e.createIntegerLiteralExpression=function(e,t){var r=new x;return r.range=t,r.value=e,r},e.createNewExpression=function(e,t,r,n){var i=new R;return i.range=n,i.expression=e,e.parent=i,i.typeArguments=t,t&&xe(t,i),i.arguments=r,xe(r,i),i},e.createNullExpression=function(e){var t=new B;return t.range=e,t},e.createParenthesizedExpression=function(e,t){var r=new w;return r.range=t,r.expression=e,e.parent=r,r},e.createPropertyAccessExpression=function(e,t,r){var n=new U;return n.range=r,n.expression=e,e.parent=n,n.property=t,t.parent=n,n},e.createRegexpLiteralExpression=function(e,t,r){var n=new D;return n.range=r,n.pattern=e,n.patternFlags=t,n},e.createTernaryExpression=function(e,t,r,n){var i=new F;return i.range=n,i.condition=e,e.parent=i,i.ifThen=t,t.parent=i,i.ifElse=r,r.parent=i,i},e.createStringLiteralExpression=function(e,t){var r=new M;return r.range=t,r.value=e,r},e.createSuperExpression=function(e){var t=new P;return t.range=e,t},e.createThisExpression=function(e){var t=new G;return t.range=e,t},e.createTrueExpression=function(e){var t=new K;return t.range=e,t},e.createUnaryPostfixExpression=function(e,t,r){var n=new V;return n.range=r,n.operator=e,n.operand=t,t.parent=n,n},e.createUnaryPrefixExpression=function(e,t,r){var n=new Y;return n.range=r,n.operator=e,n.operand=t,t.parent=n,n},e.createBlockStatement=function(e,t){var r=new Z;return r.range=t,r.statements=e,xe(e,r),r},e.createBreakStatement=function(e,t){var r=new J;return r.range=t,r.label=e,e&&(e.parent=r),r},e.createClassDeclaration=function(e,t,r,n,i,a,o,s){var c=new $;return c.range=s,c.flags=o,c.name=e,e.parent=c,c.typeParameters=t,xe(t,c),c.extendsType=r,r&&(r.parent=c),c.implementsTypes=n,n&&xe(n,c),c.members=i,xe(i,c),c.decorators=a,a&&xe(a,c),c},e.createContinueStatement=function(e,t){var r=new ee;return r.range=t,r.label=e,e&&(e.parent=r),r},e.createDoStatement=function(e,t,r){var n=new te;return n.range=r,n.statement=e,e.parent=n,n.condition=t,t.parent=n,n},e.createEmptyStatement=function(e){var t=new re;return t.range=e,t},e.createEnumDeclaration=function(e,t,r,n,i){var a=new ne;return a.range=i,a.flags=n,a.name=e,e.parent=a,a.values=t,xe(t,a),a.decorators=r,r&&xe(r,a),a},e.createEnumValueDeclaration=function(e,t,r,n){var i=new ie;return i.range=n,i.flags=r,i.name=e,e.parent=i,i.value=t,t&&(t.parent=i),i},e.createExportStatement=function(e,t,r,n){var i=new se;if(i.range=n,i.flags=r,i.members=e,xe(e,i),i.path=t,t){var a=c.normalizePath(t.value);t.value.startsWith(".")?i.normalizedPath=c.resolvePath(a,n.source.normalizedPath):i.normalizedPath=a,i.internalPath=Le(i.normalizedPath)}else i.normalizedPath=null,i.internalPath=null;return i},e.createExportImportStatement=function(e,t,r){var n=new ae;return n.range=r,n.name=e,e.parent=n,n.externalName=t,t.parent=n,n},e.createExportMember=function(e,t,r){var n=new oe;return n.range=r,n.name=e,e.parent=n,t?t.parent=n:t=e,n.externalName=t,n},e.createExpressionStatement=function(e){var t=new ce;return t.range=e.range,t.expression=e,e.parent=t,t},e.createIfStatement=function(e,t,r,n){var i=new he;return i.range=n,i.condition=e,e.parent=i,i.ifTrue=t,t.parent=i,i.ifFalse=r,r&&(r.parent=i),i},e.createImportStatement=function(e,t,r){var n=new fe;n.range=r,n.declarations=e,e&&xe(e,n),n.namespaceName=null,n.path=t;var i=c.normalizePath(t.value);return t.value.startsWith(".")?n.normalizedPath=c.resolvePath(i,r.source.normalizedPath):(i.startsWith(a.LIBRARY_PREFIX)||(i=a.LIBRARY_PREFIX+i),n.normalizedPath=i),n.internalPath=Le(n.normalizedPath),n},e.createImportStatementWithWildcard=function(e,t,r){var n=new fe;return n.range=r,n.declarations=null,n.namespaceName=e,n.path=t,n.normalizedPath=c.resolvePath(c.normalizePath(t.value),r.source.normalizedPath),n.internalPath=Le(n.normalizedPath),n},e.createImportDeclaration=function(e,t,r){var n=new de;return n.range=r,n.externalName=e,e.parent=n,t?t.parent=n:t=e,n.name=t,n},e.createInterfaceDeclaration=function(e,t,r,n,i,a,o){var s=new _e;return s.range=o,s.flags=a,s.name=e,e.parent=s,s.typeParameters=t,t&&xe(t,s),s.extendsType=r,r&&(r.parent=s),s.members=n,xe(n,s),s.decorators=i,i&&xe(i,s),s},e.createFieldDeclaration=function(e,t,r,n,i,a){var o=new ue;return o.range=a,o.flags=i,o.name=e,e.parent=o,o.type=t,t&&(t.parent=o),o.initializer=r,r&&(r.parent=o),o.decorators=n,n&&xe(n,o),o},e.createForStatement=function(e,t,r,n,i){var a=new pe;return a.range=i,a.initializer=e,e&&(e.parent=a),a.condition=t,t&&(t.parent=a),a.incrementor=r,r&&(r.parent=a),a.statement=n,n.parent=a,a},e.createFunctionDeclaration=function(e,t,r,n,i,a,o){var s=new le;return s.range=o,s.flags=a,s.name=e,e.parent=s,s.typeParameters=t,t&&xe(t,s),s.signature=r,r.parent=s,s.body=n,n&&(n.parent=s),s.decorators=i,i&&xe(i,s),s},e.createMethodDeclaration=function(e,t,r,n,i,a,o){var s=new me;return s.range=o,s.flags=a,s.name=e,e.parent=s,s.typeParameters=t,t&&xe(t,s),s.signature=r,r.parent=s,s.body=n,n&&(n.parent=s),s.decorators=i,i&&xe(i,s),s},e.createNamespaceDeclaration=function(e,t,r,n,i){var a=new ye;return a.range=i,a.flags=n,a.name=e,e.parent=a,a.members=t,xe(t,a),a.decorators=r,r&&xe(r,a),a},e.createReturnStatement=function(e,t){var r=new ge;return r.range=t,r.value=e,e&&(e.parent=r),r},e.createSwitchStatement=function(e,t,r){var n=new Te;return n.range=r,n.condition=e,e.parent=n,n.cases=t,xe(t,n),n},e.createSwitchCase=function(e,t,r){var n=new Ee;return n.range=r,n.label=e,e&&(e.parent=n),n.statements=t,xe(t,n),n},e.createThrowStatement=function(e,t){var r=new ve;return r.range=t,r.value=e,e.parent=r,r},e.createTryStatement=function(e,t,r,n,i){var a=new Ae;return a.range=i,a.statements=e,xe(e,a),a.catchVariable=t,t&&(t.parent=a),a.catchStatements=r,r&&xe(r,a),a.finallyStatements=n,n&&xe(n,a),a},e.createTypeDeclaration=function(e,t,r,n,i,a){var o=new Ie;return o.range=a,o.flags=i,o.name=e,e.parent=o,o.typeParameters=t,t&&xe(t,o),o.type=r,r.parent=o,o.decorators=n,n&&xe(n,o),o},e.createVariableStatement=function(e,t,r,n){var i=new Ne;return i.range=n,i.flags=r,i.declarations=e,xe(e,i),i.decorators=t,t&&xe(t,i),i},e.createVariableDeclaration=function(e,t,r,n,i,a){var o=new be;return o.range=a,o.flags=i,o.name=e,e.parent=o,o.type=t,t&&(t.parent=o),o.initializer=r,r&&(r.parent=o),o.decorators=n,o},e.createVoidStatement=function(e,t){var r=new Ce;return r.range=t,r.expression=e,r},e.createWhileStatement=function(e,t,r){var n=new Se;return n.range=r,n.condition=e,e.parent=n,n.statement=t,t.parent=n,n},e}();t.Node=u;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(u);t.CommonTypeNode=p;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.TYPE,t}return i(t,e),t}(p);t.TypeNode=l;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.TYPEPARAMETER,t}return i(t,e),t}(u);t.TypeParameterNode=h,function(e){e[e.DEFAULT=0]="DEFAULT",e[e.OPTIONAL=1]="OPTIONAL",e[e.REST=2]="REST"}(t.ParameterKind||(t.ParameterKind={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.PARAMETER,t.implicitFieldDeclaration=null,t}return i(t,e),t}(u);t.ParameterNode=d;var f,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.SIGNATURE,t}return i(t,e),t}(p);t.SignatureNode=_,function(e){e[e.CUSTOM=0]="CUSTOM",e[e.GLOBAL=1]="GLOBAL",e[e.OPERATOR=2]="OPERATOR",e[e.UNMANAGED=3]="UNMANAGED",e[e.OFFSET=4]="OFFSET",e[e.FUNCTION_TYPE=5]="FUNCTION_TYPE"}(f=t.DecoratorKind||(t.DecoratorKind={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.DECORATOR,t}return i(t,e),t}(u);t.DecoratorNode=m,function(e){e[e.LINE=0]="LINE",e[e.TRIPLE=1]="TRIPLE",e[e.BLOCK=2]="BLOCK"}(t.CommentKind||(t.CommentKind={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.COMMENT,t}return i(t,e),t}(u);t.CommentNode=y;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(u);t.Expression=g;var E,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.IDENTIFIER,t}return i(t,e),t}(g);t.IdentifierExpression=T,function(e){e[e.FLOAT=0]="FLOAT",e[e.INTEGER=1]="INTEGER",e[e.STRING=2]="STRING",e[e.REGEXP=3]="REGEXP",e[e.ARRAY=4]="ARRAY",e[e.OBJECT=5]="OBJECT"}(E=t.LiteralKind||(t.LiteralKind={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.LITERAL,t}return i(t,e),t}(g);t.LiteralExpression=v;var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.literalKind=E.ARRAY,t}return i(t,e),t}(v);t.ArrayLiteralExpression=A,function(e){e[e.PREFIX=0]="PREFIX",e[e.AS=1]="AS"}(t.AssertionKind||(t.AssertionKind={}));var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.ASSERTION,t}return i(t,e),t}(g);t.AssertionExpression=I;var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.BINARY,t}return i(t,e),t}(g);t.BinaryExpression=b;var N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.CALL,t}return i(t,e),t}(g);t.CallExpression=N;var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.COMMA,t}return i(t,e),t}(g);t.CommaExpression=C;var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.CONSTRUCTOR,t.text="constructor",t}return i(t,e),t}(T);t.ConstructorExpression=S;var O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.ELEMENTACCESS,t}return i(t,e),t}(g);t.ElementAccessExpression=O;var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.literalKind=E.FLOAT,t}return i(t,e),t}(v);t.FloatLiteralExpression=k;var L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.FUNCTION,t}return i(t,e),t}(g);t.FunctionExpression=L;var x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.literalKind=E.INTEGER,t}return i(t,e),t}(v);t.IntegerLiteralExpression=x;var R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.NEW,t}return i(t,e),t}(N);t.NewExpression=R;var B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.NULL,t.text="null",t}return i(t,e),t}(T);t.NullExpression=B;var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.PARENTHESIZED,t}return i(t,e),t}(g);t.ParenthesizedExpression=w;var U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.PROPERTYACCESS,t}return i(t,e),t}(g);t.PropertyAccessExpression=U;var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.literalKind=E.REGEXP,t}return i(t,e),t}(v);t.RegexpLiteralExpression=D;var F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.TERNARY,t}return i(t,e),t}(g);t.TernaryExpression=F;var M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.literalKind=E.STRING,t}return i(t,e),t}(v);t.StringLiteralExpression=M;var P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.SUPER,t.text="super",t}return i(t,e),t}(T);t.SuperExpression=P;var G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.THIS,t.text="this",t}return i(t,e),t}(T);t.ThisExpression=G;var K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.TRUE,t.text="true",t}return i(t,e),t}(T);t.TrueExpression=K;var z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.FALSE,t.text="false",t}return i(t,e),t}(T);t.FalseExpression=z;var H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(g);t.UnaryExpression=H;var V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.UNARYPOSTFIX,t}return i(t,e),t}(H);t.UnaryPostfixExpression=V;var Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.UNARYPREFIX,t}return i(t,e),t}(H);t.UnaryPrefixExpression=Y;var W,X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(u);t.Statement=X,function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ENTRY=1]="ENTRY",e[e.LIBRARY=2]="LIBRARY"}(W=t.SourceKind||(t.SourceKind={}));var Q=function(e){function t(t,r,n){var i=e.call(this)||this;return i.kind=s.SOURCE,i.parent=null,i.tokenizer=null,i.debugInfoIndex=-1,i.sourceKind=n,i.normalizedPath=t,i.internalPath=Le(i.normalizedPath),i.statements=new Array,i.range=new o.Range(i,0,r.length),i.text=r,i}return i(t,e),Object.defineProperty(t.prototype,"isEntry",{get:function(){return this.sourceKind==W.ENTRY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLibrary",{get:function(){return this.sourceKind==W.LIBRARY},enumerable:!0,configurable:!0}),t}(u);t.Source=Q;var q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.decorators=null,t.cachedProgramLevelInternalName=null,t.cachedFileLevelInternalName=null,t}return i(t,e),Object.defineProperty(t.prototype,"programLevelInternalName",{get:function(){return this.cachedProgramLevelInternalName||(this.cachedProgramLevelInternalName=ke(this,!0)),this.cachedProgramLevelInternalName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileLevelInternalName",{get:function(){return this.cachedFileLevelInternalName||(this.cachedFileLevelInternalName=ke(this,!1)),this.cachedFileLevelInternalName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTopLevel",{get:function(){var e=this.parent;return!!e&&(!(e.kind==s.VARIABLE&&!(e=e.parent))&&e.kind==s.SOURCE)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTopLevelExport",{get:function(){var e=this.parent;return!(!e||e.kind==s.VARIABLE&&!(e=e.parent))&&(e.kind==s.NAMESPACEDECLARATION?this.is(a.CommonFlags.EXPORT)&&e.isTopLevelExport:e.kind==s.CLASSDECLARATION?this.is(a.CommonFlags.STATIC)&&e.isTopLevelExport:e.kind==s.SOURCE&&this.is(a.CommonFlags.EXPORT))},enumerable:!0,configurable:!0}),t.prototype.needsExplicitExport=function(e){return e.name.text!=e.externalName.text||this.range.source!=e.range.source||!this.isTopLevelExport},t}(X);t.DeclarationStatement=q;var j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(q);t.VariableLikeDeclarationStatement=j;var Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.BLOCK,t}return i(t,e),t}(X);t.BlockStatement=Z;var J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.BREAK,t}return i(t,e),t}(X);t.BreakStatement=J;var $=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.CLASSDECLARATION,t}return i(t,e),Object.defineProperty(t.prototype,"isGeneric",{get:function(){var e=this.typeParameters;return null!=e&&e.length>0},enumerable:!0,configurable:!0}),t}(q);t.ClassDeclaration=$;var ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.CONTINUE,t}return i(t,e),t}(X);t.ContinueStatement=ee;var te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.DO,t}return i(t,e),t}(X);t.DoStatement=te;var re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.EMPTY,t}return i(t,e),t}(X);t.EmptyStatement=re;var ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.ENUMDECLARATION,t}return i(t,e),t}(q);t.EnumDeclaration=ne;var ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.ENUMVALUEDECLARATION,t}return i(t,e),t}(q);t.EnumValueDeclaration=ie;var ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.EXPORTIMPORT,t}return i(t,e),t}(u);t.ExportImportStatement=ae;var oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.EXPORTMEMBER,t}return i(t,e),t}(u);t.ExportMember=oe;var se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.EXPORT,t}return i(t,e),t}(X);t.ExportStatement=se;var ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.EXPRESSION,t}return i(t,e),t}(X);t.ExpressionStatement=ce;var ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.FIELDDECLARATION,t.parameterIndex=-1,t}return i(t,e),t}(j);t.FieldDeclaration=ue;var pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.FOR,t}return i(t,e),t}(X);t.ForStatement=pe;var le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.FUNCTIONDECLARATION,t}return i(t,e),Object.defineProperty(t.prototype,"isGeneric",{get:function(){var e=this.typeParameters;return null!=e&&e.length>0},enumerable:!0,configurable:!0}),t}(q);t.FunctionDeclaration=le;var he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.IF,t}return i(t,e),t}(X);t.IfStatement=he;var de=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.IMPORTDECLARATION,t}return i(t,e),t}(q);t.ImportDeclaration=de;var fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.IMPORT,t}return i(t,e),t}(X);t.ImportStatement=fe;var _e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.INTERFACEDECLARATION,t}return i(t,e),t}($);t.InterfaceDeclaration=_e;var me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.METHODDECLARATION,t}return i(t,e),t}(le);t.MethodDeclaration=me;var ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.NAMESPACEDECLARATION,t}return i(t,e),t}(q);t.NamespaceDeclaration=ye;var ge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.RETURN,t}return i(t,e),t}(X);t.ReturnStatement=ge;var Ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.SWITCHCASE,t}return i(t,e),t}(u);t.SwitchCase=Ee;var Te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.SWITCH,t}return i(t,e),t}(X);t.SwitchStatement=Te;var ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.THROW,t}return i(t,e),t}(X);t.ThrowStatement=ve;var Ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.TRY,t}return i(t,e),t}(X);t.TryStatement=Ae;var Ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.TYPEDECLARATION,t}return i(t,e),t}(q);t.TypeDeclaration=Ie;var be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.VARIABLEDECLARATION,t}return i(t,e),t}(j);t.VariableDeclaration=be;var Ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.VARIABLE,t}return i(t,e),t}(X);t.VariableStatement=Ne;var Ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.VOID,t}return i(t,e),t}(X);t.VoidStatement=Ce;var Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind=s.WHILE,t}return i(t,e),t}(X);function Oe(e,t){if(t)for(var r=0,n=t.length;r<n;++r){var i=t[r],a=i.name;if(a.kind==s.IDENTIFIER&&a.text==e)return i}return null}function ke(e,t){void 0===t&&(t=!1);var r=e.name.text,n=e.parent;return n&&(e.kind!=s.VARIABLEDECLARATION||n.kind!=s.VARIABLE||(n=n.parent))?n.kind==s.CLASSDECLARATION?ke(n,t)+(e.is(a.CommonFlags.STATIC)?a.STATIC_DELIMITER:a.INSTANCE_DELIMITER)+r:n.kind==s.NAMESPACEDECLARATION||n.kind==s.ENUMDECLARATION?ke(n,t)+a.STATIC_DELIMITER+r:t?r:e.range.source.internalPath+a.PATH_DELIMITER+r:r}function Le(e){return e.endsWith(".ts")&&(e=e.substring(0,e.length-3)),e}function xe(e,t){for(var r=0,n=e.length;r<n;++r)e[r].parent=t}t.WhileStatement=Se,t.getFirstDecorator=Oe,t.hasDecorator=function(e,t){return null!=Oe(e,t)},t.mangleInternalName=ke,t.mangleInternalPath=Le},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(15),i=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=o),a(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e){e.exports={block:"block_type",loop:"block_type",if:"block_type",br:"varuint32",br_if:"varuint32",br_table:"br_table",call:"varuint32",call_indirect:"call_indirect",get_local:"varuint32",set_local:"varuint32",tee_local:"varuint32",get_global:"varuint32",set_global:"varuint32",load:"memory_immediate",load8_s:"memory_immediate",load8_u:"memory_immediate",load16_s:"memory_immediate",load16_u:"memory_immediate",load32_s:"memory_immediate",load32_u:"memory_immediate",store:"memory_immediate",store8:"memory_immediate",store16:"memory_immediate",store32:"memory_immediate",current_memory:"varuint1",grow_memory:"varuint1",i32:"varint32",i64:"varint64",f32:"uint32",f64:"uint64"}},function(e,t,r){t.unsigned=r(31),t.signed=r(28)},function(e,t,r){const n=r(6).Buffer;e.exports=class{constructor(e=n.from([])){this.buffer=e,this._bytesRead=0,this._bytesWrote=0}read(e){this._bytesRead+=e;const t=this.buffer.subarray(0,e);return this.buffer=this.buffer.subarray(e),t}write(e){e=n.from(e),this._bytesWrote+=e.length,this.buffer=n.concat([this.buffer,e])}get end(){return!this.buffer.length}get bytesRead(){return this._bytesRead}get bytesWrote(){return this._bytesWrote}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a,o=r(2),s=r(4),c=r(1);function u(e){switch(e){case"abstract":return a.ABSTRACT;case"as":return a.AS;case"async":return a.ASYNC;case"await":return a.AWAIT;case"break":return a.BREAK;case"case":return a.CASE;case"catch":return a.CATCH;case"class":return a.CLASS;case"continue":return a.CONTINUE;case"const":return a.CONST;case"constructor":return a.CONSTRUCTOR;case"debugger":return a.DEBUGGER;case"declare":return a.DECLARE;case"default":return a.DEFAULT;case"delete":return a.DELETE;case"do":return a.DO;case"else":return a.ELSE;case"enum":return a.ENUM;case"export":return a.EXPORT;case"extends":return a.EXTENDS;case"false":return a.FALSE;case"finally":return a.FINALLY;case"for":return a.FOR;case"from":return a.FROM;case"function":return a.FUNCTION;case"get":return a.GET;case"if":return a.IF;case"implements":return a.IMPLEMENTS;case"import":return a.IMPORT;case"in":return a.IN;case"instanceof":return a.INSTANCEOF;case"interface":return a.INTERFACE;case"is":return a.IS;case"keyof":return a.KEYOF;case"let":return a.LET;case"module":return a.MODULE;case"namespace":return a.NAMESPACE;case"new":return a.NEW;case"null":return a.NULL;case"of":return a.OF;case"package":return a.PACKAGE;case"private":return a.PRIVATE;case"protected":return a.PROTECTED;case"public":return a.PUBLIC;case"readonly":return a.READONLY;case"return":return a.RETURN;case"set":return a.SET;case"static":return a.STATIC;case"super":return a.SUPER;case"switch":return a.SWITCH;case"this":return a.THIS;case"throw":return a.THROW;case"true":return a.TRUE;case"try":return a.TRY;case"type":return a.TYPE;case"typeof":return a.TYPEOF;case"var":return a.VAR;case"void":return a.VOID;case"while":return a.WHILE;case"with":return a.WITH;case"yield":return a.YIELD;default:return a.INVALID}}function p(e){switch(e){case a.ABSTRACT:case a.AS:case a.CONSTRUCTOR:case a.DECLARE:case a.DELETE:case a.FROM:case a.GET:case a.IS:case a.KEYOF:case a.MODULE:case a.NAMESPACE:case a.READONLY:case a.SET:case a.TYPE:return!0;default:return!1}}!function(e){e[e.ABSTRACT=0]="ABSTRACT",e[e.AS=1]="AS",e[e.ASYNC=2]="ASYNC",e[e.AWAIT=3]="AWAIT",e[e.BREAK=4]="BREAK",e[e.CASE=5]="CASE",e[e.CATCH=6]="CATCH",e[e.CLASS=7]="CLASS",e[e.CONST=8]="CONST",e[e.CONTINUE=9]="CONTINUE",e[e.CONSTRUCTOR=10]="CONSTRUCTOR",e[e.DEBUGGER=11]="DEBUGGER",e[e.DECLARE=12]="DECLARE",e[e.DEFAULT=13]="DEFAULT",e[e.DELETE=14]="DELETE",e[e.DO=15]="DO",e[e.ELSE=16]="ELSE",e[e.ENUM=17]="ENUM",e[e.EXPORT=18]="EXPORT",e[e.EXTENDS=19]="EXTENDS",e[e.FALSE=20]="FALSE",e[e.FINALLY=21]="FINALLY",e[e.FOR=22]="FOR",e[e.FROM=23]="FROM",e[e.FUNCTION=24]="FUNCTION",e[e.GET=25]="GET",e[e.IF=26]="IF",e[e.IMPLEMENTS=27]="IMPLEMENTS",e[e.IMPORT=28]="IMPORT",e[e.IN=29]="IN",e[e.INSTANCEOF=30]="INSTANCEOF",e[e.INTERFACE=31]="INTERFACE",e[e.IS=32]="IS",e[e.KEYOF=33]="KEYOF",e[e.LET=34]="LET",e[e.MODULE=35]="MODULE",e[e.NAMESPACE=36]="NAMESPACE",e[e.NEW=37]="NEW",e[e.NULL=38]="NULL",e[e.OF=39]="OF",e[e.PACKAGE=40]="PACKAGE",e[e.PRIVATE=41]="PRIVATE",e[e.PROTECTED=42]="PROTECTED",e[e.PUBLIC=43]="PUBLIC",e[e.READONLY=44]="READONLY",e[e.RETURN=45]="RETURN",e[e.SET=46]="SET",e[e.STATIC=47]="STATIC",e[e.SUPER=48]="SUPER",e[e.SWITCH=49]="SWITCH",e[e.THIS=50]="THIS",e[e.THROW=51]="THROW",e[e.TRUE=52]="TRUE",e[e.TRY=53]="TRY",e[e.TYPE=54]="TYPE",e[e.TYPEOF=55]="TYPEOF",e[e.VAR=56]="VAR",e[e.VOID=57]="VOID",e[e.WHILE=58]="WHILE",e[e.WITH=59]="WITH",e[e.YIELD=60]="YIELD",e[e.OPENBRACE=61]="OPENBRACE",e[e.CLOSEBRACE=62]="CLOSEBRACE",e[e.OPENPAREN=63]="OPENPAREN",e[e.CLOSEPAREN=64]="CLOSEPAREN",e[e.OPENBRACKET=65]="OPENBRACKET",e[e.CLOSEBRACKET=66]="CLOSEBRACKET",e[e.DOT=67]="DOT",e[e.DOT_DOT_DOT=68]="DOT_DOT_DOT",e[e.SEMICOLON=69]="SEMICOLON",e[e.COMMA=70]="COMMA",e[e.LESSTHAN=71]="LESSTHAN",e[e.GREATERTHAN=72]="GREATERTHAN",e[e.LESSTHAN_EQUALS=73]="LESSTHAN_EQUALS",e[e.GREATERTHAN_EQUALS=74]="GREATERTHAN_EQUALS",e[e.EQUALS_EQUALS=75]="EQUALS_EQUALS",e[e.EXCLAMATION_EQUALS=76]="EXCLAMATION_EQUALS",e[e.EQUALS_EQUALS_EQUALS=77]="EQUALS_EQUALS_EQUALS",e[e.EXCLAMATION_EQUALS_EQUALS=78]="EXCLAMATION_EQUALS_EQUALS",e[e.EQUALS_GREATERTHAN=79]="EQUALS_GREATERTHAN",e[e.PLUS=80]="PLUS",e[e.MINUS=81]="MINUS",e[e.ASTERISK_ASTERISK=82]="ASTERISK_ASTERISK",e[e.ASTERISK=83]="ASTERISK",e[e.SLASH=84]="SLASH",e[e.PERCENT=85]="PERCENT",e[e.PLUS_PLUS=86]="PLUS_PLUS",e[e.MINUS_MINUS=87]="MINUS_MINUS",e[e.LESSTHAN_LESSTHAN=88]="LESSTHAN_LESSTHAN",e[e.GREATERTHAN_GREATERTHAN=89]="GREATERTHAN_GREATERTHAN",e[e.GREATERTHAN_GREATERTHAN_GREATERTHAN=90]="GREATERTHAN_GREATERTHAN_GREATERTHAN",e[e.AMPERSAND=91]="AMPERSAND",e[e.BAR=92]="BAR",e[e.CARET=93]="CARET",e[e.EXCLAMATION=94]="EXCLAMATION",e[e.TILDE=95]="TILDE",e[e.AMPERSAND_AMPERSAND=96]="AMPERSAND_AMPERSAND",e[e.BAR_BAR=97]="BAR_BAR",e[e.QUESTION=98]="QUESTION",e[e.COLON=99]="COLON",e[e.EQUALS=100]="EQUALS",e[e.PLUS_EQUALS=101]="PLUS_EQUALS",e[e.MINUS_EQUALS=102]="MINUS_EQUALS",e[e.ASTERISK_EQUALS=103]="ASTERISK_EQUALS",e[e.ASTERISK_ASTERISK_EQUALS=104]="ASTERISK_ASTERISK_EQUALS",e[e.SLASH_EQUALS=105]="SLASH_EQUALS",e[e.PERCENT_EQUALS=106]="PERCENT_EQUALS",e[e.LESSTHAN_LESSTHAN_EQUALS=107]="LESSTHAN_LESSTHAN_EQUALS",e[e.GREATERTHAN_GREATERTHAN_EQUALS=108]="GREATERTHAN_GREATERTHAN_EQUALS",e[e.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS=109]="GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS",e[e.AMPERSAND_EQUALS=110]="AMPERSAND_EQUALS",e[e.BAR_EQUALS=111]="BAR_EQUALS",e[e.CARET_EQUALS=112]="CARET_EQUALS",e[e.AT=113]="AT",e[e.IDENTIFIER=114]="IDENTIFIER",e[e.STRINGLITERAL=115]="STRINGLITERAL",e[e.INTEGERLITERAL=116]="INTEGERLITERAL",e[e.FLOATLITERAL=117]="FLOATLITERAL",e[e.INVALID=118]="INVALID",e[e.ENDOFFILE=119]="ENDOFFILE"}(a=t.Token||(t.Token={})),t.tokenFomKeyword=u,t.tokenIsAlsoIdentifier=p,t.operatorTokenToString=function(e){switch(e){case a.DELETE:return"delete";case a.IN:return"in";case a.INSTANCEOF:return"instanceof";case a.NEW:return"new";case a.TYPEOF:return"typeof";case a.VOID:return"void";case a.YIELD:return"yield";case a.DOT_DOT_DOT:return"...";case a.COMMA:return",";case a.LESSTHAN:return"<";case a.GREATERTHAN:return">";case a.LESSTHAN_EQUALS:return"<=";case a.GREATERTHAN_EQUALS:return">=";case a.EQUALS_EQUALS:return"==";case a.EXCLAMATION_EQUALS:return"!=";case a.EQUALS_EQUALS_EQUALS:return"===";case a.EXCLAMATION_EQUALS_EQUALS:return"!==";case a.PLUS:return"+";case a.MINUS:return"-";case a.ASTERISK_ASTERISK:return"**";case a.ASTERISK:return"*";case a.SLASH:return"/";case a.PERCENT:return"%";case a.PLUS_PLUS:return"++";case a.MINUS_MINUS:return"--";case a.LESSTHAN_LESSTHAN:return"<<";case a.GREATERTHAN_GREATERTHAN:return">>";case a.GREATERTHAN_GREATERTHAN_GREATERTHAN:return">>>";case a.AMPERSAND:return"&";case a.BAR:return"|";case a.CARET:return"^";case a.EXCLAMATION:return"!";case a.TILDE:return"~";case a.AMPERSAND_AMPERSAND:return"&&";case a.BAR_BAR:return"||";case a.EQUALS:return"=";case a.PLUS_EQUALS:return"+=";case a.MINUS_EQUALS:return"-=";case a.ASTERISK_EQUALS:return"*=";case a.ASTERISK_ASTERISK_EQUALS:return"**=";case a.SLASH_EQUALS:return"/=";case a.PERCENT_EQUALS:return"%=";case a.LESSTHAN_LESSTHAN_EQUALS:return"<<=";case a.GREATERTHAN_GREATERTHAN_EQUALS:return">>=";case a.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS:return">>>=";case a.AMPERSAND_EQUALS:return"&=";case a.BAR_EQUALS:return"|=";case a.CARET_EQUALS:return"^=";default:return assert(!1),""}};var l=function(){function e(e,t,r){this.debugInfoRef=0,this.source=e,this.start=t,this.end=r}return e.join=function(t,r){if(t.source!=r.source)throw new Error("source mismatch");return new e(t.source,t.start<r.start?t.start:r.start,t.end>r.end?t.end:r.end)},Object.defineProperty(e.prototype,"atStart",{get:function(){return new e(this.source,this.start,this.start)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"atEnd",{get:function(){return new e(this.source,this.end,this.end)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){for(var e=this.source.text,t=1,r=this.start;r>=0;--r)10==e.charCodeAt(r)&&t++;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"column",{get:function(){for(var e=this.source.text,t=0,r=this.start-1;r>=0&&10!=e.charCodeAt(r);--r)++t;return t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.source.text.substring(this.start,this.end)},e}();t.Range=l;var h=function(e){function t(t,r){void 0===r&&(r=null);var n=e.call(this,r)||this;n.end=0,n.pos=0,n.token=-1,n.tokenPos=0,n.nextToken=-1,n.nextTokenPos=0,n.nextTokenOnNewLine=!1,n.onComment=null,n.source=t,n.pos=0,n.end=t.text.length,n.diagnostics=r||new Array;var i=t.text;if(n.pos<n.end&&65279==i.charCodeAt(n.pos)&&++n.pos,n.pos+1<n.end&&35==i.charCodeAt(n.pos)&&33==i.charCodeAt(n.pos+1))for(n.pos+=2;n.pos<n.end&&10!=i.charCodeAt(n.pos);)++n.pos;return n}return i(t,e),t.prototype.next=function(e){return void 0===e&&(e=!1),this.nextToken=-1,this.token=this.unsafeNext(e)},t.prototype.unsafeNext=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=i32.MAX_VALUE);for(var r=this.source.text;this.pos<this.end;){this.tokenPos=this.pos;var n=r.charCodeAt(this.pos);switch(n){case 13:++this.pos<this.end&&10==r.charCodeAt(this.pos)&&++this.pos;break;case 10:case 9:case 11:case 12:case 32:++this.pos;break;case 33:return++this.pos,t>1&&this.pos<this.end&&61==r.charCodeAt(this.pos)?(++this.pos,t>2&&this.pos<this.end&&61==r.charCodeAt(this.pos)?(++this.pos,a.EXCLAMATION_EQUALS_EQUALS):a.EXCLAMATION_EQUALS):a.EXCLAMATION;case 34:case 39:case 96:return a.STRINGLITERAL;case 37:return++this.pos,t>1&&this.pos<this.end&&61==r.charCodeAt(this.pos)?(++this.pos,a.PERCENT_EQUALS):a.PERCENT;case 38:if(++this.pos,t>1&&this.pos<this.end){if(38==r.charCodeAt(this.pos))return++this.pos,a.AMPERSAND_AMPERSAND;if(61==r.charCodeAt(this.pos))return++this.pos,a.AMPERSAND_EQUALS}return a.AMPERSAND;case 40:return++this.pos,a.OPENPAREN;case 41:return++this.pos,a.CLOSEPAREN;case 42:if(++this.pos,t>1&&this.pos<this.end){if(61==r.charCodeAt(this.pos))return++this.pos,a.ASTERISK_EQUALS;if(42==r.charCodeAt(this.pos))return++this.pos,t>2&&this.pos<this.end&&61==r.charCodeAt(this.pos)?(++this.pos,a.ASTERISK_ASTERISK_EQUALS):a.ASTERISK_ASTERISK}return a.ASTERISK;case 43:if(++this.pos,t>1&&this.pos<this.end){if(43==r.charCodeAt(this.pos))return++this.pos,a.PLUS_PLUS;if(61==r.charCodeAt(this.pos))return++this.pos,a.PLUS_EQUALS}return a.PLUS;case 44:return++this.pos,a.COMMA;case 45:if(++this.pos,t>1&&this.pos<this.end){if(45==r.charCodeAt(this.pos))return++this.pos,a.MINUS_MINUS;if(61==r.charCodeAt(this.pos))return++this.pos,a.MINUS_EQUALS}return a.MINUS;case 46:if(++this.pos,t>1&&this.pos<this.end){if(c.isDecimalDigit(r.charCodeAt(this.pos)))return--this.pos,a.FLOATLITERAL;if(t>2&&this.pos+1<this.end&&46==r.charCodeAt(this.pos)&&46==r.charCodeAt(this.pos+1))return this.pos+=2,a.DOT_DOT_DOT}return a.DOT;case 47:var i=this.pos;if(++this.pos,t>1&&this.pos<this.end){if(47==r.charCodeAt(this.pos)){var l=s.CommentKind.LINE;for(this.pos+1<this.end&&47==r.charCodeAt(this.pos+1)&&(++this.pos,l=s.CommentKind.TRIPLE);++this.pos<this.end;)if(10==r.charCodeAt(this.pos)){++this.pos;break}this.onComment&&this.onComment(l,r.substring(i,this.pos),this.range(i,this.pos));break}if(42==r.charCodeAt(this.pos)){for(var h=!1;++this.pos<this.end;)if(42==(n=r.charCodeAt(this.pos))&&this.pos+1<this.end&&47==r.charCodeAt(this.pos+1)){this.pos+=2,h=!0;break}h?this.onComment&&this.onComment(s.CommentKind.BLOCK,r.substring(i,this.pos),this.range(i,this.pos)):this.error(o.DiagnosticCode._0_expected,this.range(this.pos),"*/");break}if(61==r.charCodeAt(this.pos))return++this.pos,a.SLASH_EQUALS}return a.SLASH;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.testInteger()?a.INTEGERLITERAL:a.FLOATLITERAL;case 58:return++this.pos,a.COLON;case 59:return++this.pos,a.SEMICOLON;case 60:if(++this.pos,t>1&&this.pos<this.end){if(60==r.charCodeAt(this.pos))return++this.pos,t>2&&this.pos<this.end&&61==r.charCodeAt(this.pos)?(++this.pos,a.LESSTHAN_LESSTHAN_EQUALS):a.LESSTHAN_LESSTHAN;if(61==r.charCodeAt(this.pos))return++this.pos,a.LESSTHAN_EQUALS}return a.LESSTHAN;case 61:if(++this.pos,t>1&&this.pos<this.end){if(61==r.charCodeAt(this.pos))return++this.pos,t>2&&this.pos<this.end&&61==r.charCodeAt(this.pos)?(++this.pos,a.EQUALS_EQUALS_EQUALS):a.EQUALS_EQUALS;if(62==r.charCodeAt(this.pos))return++this.pos,a.EQUALS_GREATERTHAN}return a.EQUALS;case 62:if(++this.pos,t>1&&this.pos<this.end){if(62==r.charCodeAt(this.pos)){if(++this.pos,t>2&&this.pos<this.end){if(62==r.charCodeAt(this.pos))return++this.pos,t>3&&this.pos<this.end&&61==r.charCodeAt(this.pos)?(++this.pos,a.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS):a.GREATERTHAN_GREATERTHAN_GREATERTHAN;if(61==r.charCodeAt(this.pos))return++this.pos,a.GREATERTHAN_GREATERTHAN_EQUALS}return a.GREATERTHAN_GREATERTHAN}if(61==r.charCodeAt(this.pos))return++this.pos,a.GREATERTHAN_EQUALS}return a.GREATERTHAN;case 63:return++this.pos,a.QUESTION;case 91:return++this.pos,a.OPENBRACKET;case 93:return++this.pos,a.CLOSEBRACKET;case 94:return++this.pos,t>1&&this.pos<this.end&&61==r.charCodeAt(this.pos)?(++this.pos,a.CARET_EQUALS):a.CARET;case 123:return++this.pos,a.OPENBRACE;case 124:if(++this.pos,t>1&&this.pos<this.end){if(124==r.charCodeAt(this.pos))return++this.pos,a.BAR_BAR;if(61==r.charCodeAt(this.pos))return++this.pos,a.BAR_EQUALS}return a.BAR;case 125:return++this.pos,a.CLOSEBRACE;case 126:return++this.pos,a.TILDE;case 64:return++this.pos,a.AT;default:if(c.isIdentifierStart(n)){if(c.isKeywordCharacter(n)){for(var d=this.pos;++this.pos<this.end&&c.isIdentifierPart(n=r.charCodeAt(this.pos));)if(!c.isKeywordCharacter(n))return this.pos=d,a.IDENTIFIER;var f=u(r.substring(d,this.pos));if(!(f==a.INVALID||e&&p(f)))return f;this.pos=d}return a.IDENTIFIER}if(c.isWhiteSpace(n)){++this.pos;break}return this.error(o.DiagnosticCode.Invalid_character,this.range(this.pos,this.pos+1)),++this.pos,a.INVALID}}return a.ENDOFFILE},t.prototype.peek=function(e,t,r){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===r&&(r=i32.MAX_VALUE);var n=this.source.text;if(this.nextToken<0){var i=this.pos,a=this.token,o=this.tokenPos;if(this.nextToken=this.unsafeNext(t,r),this.nextTokenPos=this.tokenPos,e)for(this.nextTokenOnNewLine=!1;--this.tokenPos>i;)if(c.isLineBreak(n.charCodeAt(this.tokenPos))){this.nextTokenOnNewLine=!0;break}this.pos=i,this.token=a,this.tokenPos=o}return this.nextToken},t.prototype.skip=function(e){var t=this.pos,r=this.token,n=this.tokenPos,i=i32.MAX_VALUE;switch(e){case a.GREATERTHAN:i=1}return this.token=this.unsafeNext(e==a.IDENTIFIER,i),this.token==e?(this.nextToken=-1,!0):(this.pos=t,this.token=r,this.tokenPos=n,!1)},t.prototype.mark=function(){var e;return f?(e=f,f=null):e=new d,e.pos=this.pos,e.token=this.token,e.tokenPos=this.tokenPos,e},t.prototype.discard=function(e){f=e},t.prototype.reset=function(e){this.pos=e.pos,this.token=e.token,this.tokenPos=e.tokenPos,this.nextToken=-1,f=e},t.prototype.range=function(e,t){return void 0===e&&(e=-1),void 0===t&&(t=-1),e<0?(e=this.tokenPos,t=this.pos):t<0&&(t=e),new l(this.source,e,t)},t.prototype.readIdentifier=function(){for(var e=this.source.text,t=this.pos;++this.pos<this.end&&c.isIdentifierPart(e.charCodeAt(this.pos)););return e.substring(t,this.pos)},t.prototype.readString=function(){for(var e=this.source.text,t=e.charCodeAt(this.pos++),r=this.pos,n="";;){if(this.pos>=this.end){n+=e.substring(r,this.pos),this.error(o.DiagnosticCode.Unterminated_string_literal,this.range(r-1,this.end));break}var i=e.charCodeAt(this.pos);if(i==t){n+=e.substring(r,this.pos++);break}if(92!=i){if(c.isLineBreak(i)){n+=e.substring(r,this.pos),this.error(o.DiagnosticCode.Unterminated_string_literal,this.range(r-1,this.pos));break}++this.pos}else n+=e.substring(r,this.pos),n+=this.readEscapeSequence(),r=this.pos}return n},t.prototype.readEscapeSequence=function(){if(++this.pos>=this.end)return this.error(o.DiagnosticCode.Unexpected_end_of_text,this.range(this.end)),"";var e=this.source.text,t=e.charCodeAt(this.pos++);switch(t){case 48:return"\0";case 98:return"\b";case 116:return"\t";case 110:return"\n";case 118:return"\v";case 102:return"\f";case 114:return"\r";case 39:return"'";case 34:return'"';case 117:return this.pos<this.end&&123==e.charCodeAt(this.pos)?(++this.pos,this.readExtendedUnicodeEscape()):this.readUnicodeEscape();case 13:this.pos<this.end&&10==e.charCodeAt(this.pos)&&++this.pos;case 10:case 8232:case 8233:return"";default:return String.fromCharCode(t)}},t.prototype.readRegexpPattern=function(){for(var e=this.source.text,t=this.pos,r=!1;;){if(this.pos>=this.end){this.error(o.DiagnosticCode.Unterminated_regular_expression_literal,this.range(t,this.end));break}if(92!=e.charCodeAt(this.pos)){var n=e.charCodeAt(this.pos);if(47==n&&!r)break;if(c.isLineBreak(n)){this.error(o.DiagnosticCode.Unterminated_regular_expression_literal,this.range(t,this.pos));break}++this.pos,r=!1}else++this.pos,r=!0}return e.substring(t,this.pos)},t.prototype.readRegexpFlags=function(){for(var e=this.source.text,t=this.pos,r=0;this.pos<this.end;){var n=e.charCodeAt(this.pos);if(!c.isIdentifierPart(n))break;switch(++this.pos,n){case 103:r|=1&r?-1:1;break;case 105:r|=2&r?-1:2;break;case 109:r|=4&r?-1:4;break;default:r=-1}}return-1==r&&this.error(o.DiagnosticCode.Invalid_regular_expression_flags,this.range(t,this.pos)),e.substring(t,this.pos)},t.prototype.testInteger=function(){var e=this.source.text;if(48==e.charCodeAt(this.pos)&&this.pos+1<this.end)switch(e.charCodeAt(this.pos+2)){case 88:case 120:case 66:case 98:case 79:case 111:return!0}for(var t=this.pos;t<this.end;){var r=e.charCodeAt(t);if(46==r||69==r||101==r)return!1;if(r<48||r>57)break;t++}return!0},t.prototype.readInteger=function(){var e=this.source.text;if(48==e.charCodeAt(this.pos)&&this.pos+2<this.end){switch(e.charCodeAt(this.pos+1)){case 88:case 120:return this.pos+=2,this.readHexInteger();case 66:case 98:return this.pos+=2,this.readBinaryInteger();case 79:case 111:return this.pos+=2,this.readOctalInteger()}if(c.isOctalDigit(e.charCodeAt(this.pos+1))){var t=this.pos;++this.pos;var r=this.readOctalInteger();return this.error(o.DiagnosticCode.Octal_literals_are_not_allowed_in_strict_mode,this.range(t,this.pos)),r}}return this.readDecimalInteger()},t.prototype.readHexInteger=function(){for(var e=this.source.text,t=this.pos,r=i64_new(0,0),n=i64_new(16,0);this.pos<this.end;){var i=e.charCodeAt(this.pos);if(i>=48&&i<=57)r=i64_add(i64_mul(r,n),i64_new(i-48,0));else if(i>=65&&i<=70)r=i64_add(i64_mul(r,n),i64_new(10+i-65,0));else{if(!(i>=97&&i<=102))break;r=i64_add(i64_mul(r,n),i64_new(10+i-97,0))}++this.pos}return this.pos==t&&this.error(o.DiagnosticCode.Hexadecimal_digit_expected,this.range(t)),r},t.prototype.readDecimalInteger=function(){for(var e=this.source.text,t=this.pos,r=i64_new(0,0),n=i64_new(10,0);this.pos<this.end;){var i=e.charCodeAt(this.pos);if(!(i>=48&&i<=57))break;r=i64_add(i64_mul(r,n),i64_new(i-48,0)),++this.pos}return this.pos==t&&this.error(o.DiagnosticCode.Digit_expected,this.range(t)),r},t.prototype.readOctalInteger=function(){for(var e=this.source.text,t=this.pos,r=i64_new(0,0),n=i64_new(8,0);this.pos<this.end;){var i=e.charCodeAt(this.pos);if(!(i>=48&&i<=55))break;r=i64_add(i64_mul(r,n),i64_new(i-48,0)),++this.pos}return this.pos==t&&this.error(o.DiagnosticCode.Octal_digit_expected,this.range(t)),r},t.prototype.readBinaryInteger=function(){for(var e=this.source.text,t=this.pos,r=i64_new(0,0),n=i64_new(2,0),i=i64_new(1,0);this.pos<this.end;){var a=e.charCodeAt(this.pos);if(48==a)r=i64_mul(r,n);else{if(49!=a)break;r=i64_add(i64_mul(r,n),i)}++this.pos}return this.pos==t&&this.error(o.DiagnosticCode.Binary_digit_expected,this.range(t)),r},t.prototype.readFloat=function(){return this.readDecimalFloat()},t.prototype.readDecimalFloat=function(){for(var e=this.pos,t=this.source.text;this.pos<this.end&&c.isDecimalDigit(t.charCodeAt(this.pos));)++this.pos;if(this.pos<this.end&&46==t.charCodeAt(this.pos))for(++this.pos;this.pos<this.end&&c.isDecimalDigit(t.charCodeAt(this.pos));)++this.pos;if(this.pos<this.end){var r=t.charCodeAt(this.pos);if(69==r||101==r)for(++this.pos<this.end&&(45==t.charCodeAt(this.pos)||43==t.charCodeAt(this.pos))&&c.isDecimalDigit(t.charCodeAt(this.pos+1))&&++this.pos;this.pos<this.end&&c.isDecimalDigit(t.charCodeAt(this.pos));)++this.pos}return parseFloat(t.substring(e,this.pos))},t.prototype.readHexFloat=function(){throw new Error("not implemented")},t.prototype.readUnicodeEscape=function(){for(var e=4,t=0,r=this.source.text;this.pos<this.end;){var n=r.charCodeAt(this.pos++);if(n>=48&&n<=57)t=16*t+n-48;else if(n>=65&&n<=70)t=16*t+10+n-65;else{if(!(n>=97&&n<=102))return this.error(o.DiagnosticCode.Hexadecimal_digit_expected,this.range(this.pos-1,this.pos)),"";t=16*t+10+n-97}if(0==--e)break}return e?(this.error(o.DiagnosticCode.Unexpected_end_of_text,this.range(this.pos)),""):String.fromCharCode(t)},t.prototype.readExtendedUnicodeEscape=function(){var e=this.pos,t=this.readHexInteger(),r=i64_low(t),n=!1;assert(!i64_high(t)),r>1114111&&(this.error(o.DiagnosticCode.An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive,this.range(e,this.pos)),n=!0);var i=this.source.text;return this.pos>=this.end?(this.error(o.DiagnosticCode.Unexpected_end_of_text,this.range(e,this.end)),n=!0):125==i.charCodeAt(this.pos)?++this.pos:(this.error(o.DiagnosticCode.Unterminated_Unicode_escape_sequence,this.range(e,this.pos)),n=!0),n?"":r<65536?String.fromCharCode(r):String.fromCharCode(55296+((r-65536)/1024|0),(r-65536)%1024+56320)},t.prototype.finish=function(){},t}(o.DiagnosticEmitter);t.Tokenizer=h;var d=function(){return function(){}}();t.State=d;var f=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);!function(e){e[e.I8=0]="I8",e[e.I16=1]="I16",e[e.I32=2]="I32",e[e.I64=3]="I64",e[e.ISIZE=4]="ISIZE",e[e.U8=5]="U8",e[e.U16=6]="U16",e[e.U32=7]="U32",e[e.U64=8]="U64",e[e.USIZE=9]="USIZE",e[e.BOOL=10]="BOOL",e[e.F32=11]="F32",e[e.F64=12]="F64",e[e.VOID=13]="VOID"}(t.TypeKind||(t.TypeKind={})),function(e){e[e.NONE=0]="NONE",e[e.SIGNED=1]="SIGNED",e[e.UNSIGNED=2]="UNSIGNED",e[e.INTEGER=4]="INTEGER",e[e.FLOAT=8]="FLOAT",e[e.SIZE=16]="SIZE",e[e.SMALL=32]="SMALL",e[e.LONG=64]="LONG",e[e.VALUE=128]="VALUE",e[e.REFERENCE=256]="REFERENCE",e[e.NULLABLE=512]="NULLABLE"}(t.TypeFlags||(t.TypeFlags={}));var i=function(){function e(e,t,r){this.nullableType=null,this.kind=e,this.flags=t,this.size=r,this.byteSize=ceil(r/8),this.classReference=null,this.signatureReference=null,this.nonNullableType=this}return e.prototype.computeSmallIntegerShift=function(e){return e.size-this.size},e.prototype.computeSmallIntegerMask=function(e){return-1>>>e.size-this.size},e.prototype.is=function(e){return(this.flags&e)==e},e.prototype.isAny=function(e){return 0!=(this.flags&e)},e.prototype.asClass=function(t){assert(9==this.kind&&!this.classReference);var r=new e(this.kind,-129&this.flags|256,this.size);return r.classReference=t,r},e.prototype.asFunction=function(t){assert(7==this.kind&&!this.signatureReference);var r=new e(this.kind,-129&this.flags|256,this.size);return r.signatureReference=t,r},e.prototype.asNullable=function(){return assert(this.is(256)),this.nullableType||(assert(!this.is(512)),this.nullableType=new e(this.kind,512|this.flags,this.size),this.nullableType.classReference=this.classReference,this.nullableType.signatureReference=this.signatureReference),this.nullableType},e.prototype.isAssignableTo=function(e,t){var r,n,i,a;if(void 0===t&&(t=!1),this.is(256)){if(e.is(256))if(r=this.classReference){if(n=e.classReference)return r.isAssignableTo(n)}else if((i=this.signatureReference)&&(a=e.signatureReference))return i.isAssignableTo(a)}else if(!e.is(256))if(this.is(4))if(e.is(4)){if(!t||this.is(1)==e.is(1))return this.size<=e.size}else{if(11==e.kind)return this.size<=23;if(12==e.kind)return this.size<=52}else if(this.is(8)&&e.is(8))return this.size<=e.size;return!1},e.commonCompatible=function(e,t,r){return t.isAssignableTo(e,r)?e:e.isAssignableTo(t,r)?t:null},e.prototype.toString=function(e){switch(void 0===e&&(e=!1),this.kind){case 0:return"i8";case 1:return"i16";case 2:return"i32";case 3:return"i64";case 4:return"isize";case 5:return"u8";case 6:return"u16";case 7:var t=this.signatureReference;return e||!t?"u32":t.toString(!0);case 8:return"u64";case 9:var r=this.classReference;return e||!r?"usize":r.toString();case 10:return"bool";case 11:return"f32";case 12:return"f64";case 13:return"void";default:return assert(!1),""}},e.prototype.toNativeType=function(){switch(this.kind){default:return n.NativeType.I32;case 3:case 8:return n.NativeType.I64;case 4:case 9:return 64==this.size?n.NativeType.I64:n.NativeType.I32;case 11:return n.NativeType.F32;case 12:return n.NativeType.F64;case 13:return n.NativeType.None}},e.prototype.toNativeZero=function(e){switch(this.kind){case 13:assert(!1);default:return e.createI32(0);case 4:case 9:if(64!=this.size)return e.createI32(0);case 3:case 8:return e.createI64(0);case 11:return e.createF32(0);case 12:return e.createF64(0)}},e.prototype.toNativeOne=function(e){switch(this.kind){case 13:assert(!1);default:return e.createI32(1);case 4:case 9:if(64!=this.size)return e.createI32(1);case 3:case 8:return e.createI64(1);case 11:return e.createF32(1);case 12:return e.createF64(1)}},e.prototype.toNativeNegOne=function(e){switch(this.kind){case 13:assert(!1);default:return e.createI32(-1);case 4:case 9:if(64!=this.size)return e.createI32(-1);case 3:case 8:return e.createI64(-1,-1);case 11:return e.createF32(-1);case 12:return e.createF64(-1)}},e.prototype.toSignatureString=function(){switch(this.kind){default:return"i";case 3:case 8:return"I";case 4:case 9:return 64==this.size?"I":"i";case 11:return"f";case 12:return"F";case 13:return"v"}},e.i8=new e(0,165,8),e.i16=new e(1,165,16),e.i32=new e(2,133,32),e.i64=new e(3,197,64),e.isize32=new e(4,149,32),e.isize64=new e(4,213,64),e.u8=new e(5,166,8),e.u16=new e(6,166,16),e.u32=new e(7,134,32),e.u64=new e(8,198,64),e.usize32=new e(9,150,32),e.usize64=new e(9,214,64),e.bool=new e(10,166,1),e.f32=new e(11,137,32),e.f64=new e(12,201,64),e.void=new e(13,0,0),e}();t.Type=i,t.typesToNativeTypes=function(e){for(var t=e.length,r=new Array(t),n=0;n<t;++n)r[n]=e[n].toNativeType();return r},t.typesToString=function(e){var t=e.length;if(!t)return"";for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n].toString();return r.join(", ")};var a=function(){function e(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=null),this.cachedFunctionTarget=null,this.parameterTypes=e||[],this.parameterNames=null,this.requiredParameters=0,this.returnType=t||i.void,this.thisType=r,this.hasRest=!1,this.type=i.u32.asFunction(this)}return e.prototype.getParameterName=function(e){var t=this.parameterNames;return t&&t.length>e?t[e]:s(e)},e.prototype.isAssignableTo=function(e){var t=this.thisType,r=e.thisType;if(t){if(!r||!t.isAssignableTo(r))return!1}else if(r)return!1;if(this.hasRest!=e.hasRest)return!1;var n=this.parameterTypes,i=e.parameterTypes,a=n.length;if(a!=i.length)return!1;for(var o=0;o<a;++o){var s=n[o],c=i[o];if(!s.isAssignableTo(c))return!1}var u=this.returnType,p=e.returnType;return u==p||u.isAssignableTo(p)},e.prototype.toSignatureString=function(){var e=[],t=this.thisType;t&&e.push(t.toSignatureString());for(var r=this.parameterTypes,n=0,i=r.length;n<i;++n)e.push(r[n].toSignatureString());return e.push(this.returnType.toSignatureString()),e.join("")},e.prototype.toString=function(e){void 0===e&&(e=!1);var t=new Array;t.push("(");var r=0,n=this.thisType;n&&e&&(t.push("this: "),t.push(n.toString()),r=1);var i=this.parameterTypes,a=i.length;if(a)for(var o=this.parameterNames,c=o?o.length:0,u=this.requiredParameters,p=this.hasRest?a-1:-1,l=0;l<a;++l,++r)r&&t.push(", "),l==p&&t.push("..."),l<c?t.push(o[l]):t.push(s(l)),l>=u&&l!=p?t.push("?: "):t.push(": "),t.push(i[l].toString());return t.push(") => "),t.push(this.returnType.toString()),t.join("")},e}();t.Signature=a;var o=null;function s(e){o||(o=[]);for(var t=o.length;t<=e;++t)o.push("arg$"+t.toString(10));return o[e-1]}t.getGenericParameterName=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o,s=r(40),c=r(2),u=r(3),p=r(0),l=r(10),h=r(4),d=r(11),f=r(1);!function(e){e[e.WASM32=0]="WASM32",e[e.WASM64=1]="WASM64"}(o=t.Target||(t.Target={}));var _=function(){function e(){this.target=o.WASM32,this.noTreeShaking=!1,this.noAssert=!1,this.noMemory=!1,this.importMemory=!1,this.importTable=!1,this.memoryBase=0,this.sourceMap=!1,this.globalAliases=null}return Object.defineProperty(e.prototype,"isWasm64",{get:function(){return this.target==o.WASM64},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usizeType",{get:function(){return this.target==o.WASM64?d.Type.usize64:d.Type.usize32},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isizeType",{get:function(){return this.target==o.WASM64?d.Type.isize64:d.Type.isize32},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nativeSizeType",{get:function(){return this.target==o.WASM64?u.NativeType.I64:u.NativeType.I32},enumerable:!0,configurable:!0}),e}();t.Options=_,function(e){e[e.NONE=0]="NONE",e[e.IMPLICIT=1]="IMPLICIT",e[e.EXPLICIT=2]="EXPLICIT"}(t.ConversionKind||(t.ConversionKind={}));var m=function(e){function t(t,r){void 0===r&&(r=null);var n=e.call(this,t.diagnostics)||this;return n.outerFunction=null,n.currentEnum=null,n.currentType=d.Type.void,n.startFunctionBody=[],n.memorySegments=new Array,n.stringSegments=new Map,n.functionTable=new Array,n.argumentCountRef=0,n.f32ModInstance=null,n.f64ModInstance=null,n.f32PowInstance=null,n.f64PowInstance=null,n.program=t,r||(r=new _),n.options=r,n.memoryOffset=i64_new(max(r.memoryBase,r.usizeType.byteSize)),n.module=u.Module.create(),n}return i(t,e),t.compile=function(e,r){return void 0===r&&(r=null),new t(e,r).compile()},t.prototype.compile=function(){var e=this.options,t=this.module,r=this.program;r.initialize(e);var n=assert(r.elementsLookup.get("start"));assert(n.kind==p.ElementKind.FUNCTION_PROTOTYPE);var i=new p.Function(n,n.internalName,new d.Signature([],d.Type.void));this.startFunction=i,this.currentFunction=i;for(var a=r.sources,o=0,s=a.length;o<s;++o)a[o].isEntry&&this.compileSource(a[o]);var c=this.startFunctionBody;if(c.length){var l=this.ensureFunctionType(i.signature),h=t.addFunction(i.internalName,l,d.typesToNativeTypes(i.additionalLocals),t.createBlock(null,c));i.finalize(t,h),t.setStart(h)}if(!e.noMemory){var f=this.memoryOffset;f=i64_align(f,e.usizeType.byteSize),this.memoryOffset=f,e.isWasm64?t.addGlobal("HEAP_BASE",u.NativeType.I64,!1,t.createI64(i64_low(f),i64_high(f))):t.addGlobal("HEAP_BASE",u.NativeType.I32,!1,t.createI32(i64_low(f)));var _=i64_shr_u(i64_align(f,65536),i64_new(16,0));t.setMemory(i64_low(_),this.options.isWasm64?u.Module.MAX_MEMORY_WASM64:u.Module.MAX_MEMORY_WASM32,this.memorySegments,e.target,"memory")}e.importMemory&&t.addMemoryImport("0","env","memory");var m=this.functionTable,y=m.length,g=!1;if(y){var E=new Array(y);for(o=0;o<y;++o)E[o]=m[o].ref;t.setFunctionTable(E),t.addTableExport("0","table"),g=!0}return e.importTable&&(t.addTableImport("0","env","table"),g||t.addTableExport("0","table")),t},t.prototype.compileSourceByPath=function(e,t){var r=this.program.lookupSourceByPath(e);r?this.compileSource(r):this.error(c.DiagnosticCode.File_0_not_found,t.range,e)},t.prototype.compileSource=function(e){if(!e.is(p.CommonFlags.COMPILED)){e.set(p.CommonFlags.COMPILED);for(var t=this.options.noTreeShaking,r=e.isEntry,n=this.startFunction,i=this.startFunctionBody,a=e.statements,o=0,s=a.length;o<s;++o){var c=a[o];switch(c.kind){case h.NodeKind.CLASSDECLARATION:(t||r&&c.is(p.CommonFlags.EXPORT))&&!c.isGeneric&&this.compileClassDeclaration(c,[]);break;case h.NodeKind.ENUMDECLARATION:(t||r&&c.is(p.CommonFlags.EXPORT))&&this.compileEnumDeclaration(c);break;case h.NodeKind.FUNCTIONDECLARATION:(t||r&&c.is(p.CommonFlags.EXPORT))&&!c.isGeneric&&this.compileFunctionDeclaration(c,[]);break;case h.NodeKind.IMPORT:this.compileSourceByPath(c.normalizedPath,c.path);break;case h.NodeKind.NAMESPACEDECLARATION:(t||r&&c.is(p.CommonFlags.EXPORT))&&this.compileNamespaceDeclaration(c);break;case h.NodeKind.VARIABLE:var u=this.compileVariableStatement(c);u&&i.push(u);break;case h.NodeKind.EXPORT:null!=c.normalizedPath&&this.compileSourceByPath(c.normalizedPath,c.path),(t||r)&&this.compileExportStatement(c);break;default:var l=this.currentFunction;this.currentFunction=n,i.push(this.compileStatement(c)),this.currentFunction=l}}}},t.prototype.compileGlobalDeclaration=function(e){var t=assert(this.program.elementsLookup.get(e.fileLevelInternalName));return assert(t.kind==p.ElementKind.GLOBAL),this.compileGlobal(t)?t:null},t.prototype.compileGlobal=function(e){if(e.is(p.CommonFlags.COMPILED)||e.is(p.CommonFlags.AMBIENT|p.CommonFlags.BUILTIN))return!0;e.set(p.CommonFlags.COMPILED);var t=this.module,r=e.declaration,n=0;if(e.type==d.Type.void)if(r)if(r.type){var i=this.program.resolveType(r.type);if(!i)return!1;if(i==d.Type.void)return this.error(c.DiagnosticCode.Type_expected,r.type.range),!1;e.type=i}else{if(!r.initializer)return this.error(c.DiagnosticCode.Type_expected,r.name.range.atEnd),!1;if(n=this.compileExpression(r.initializer,d.Type.void,0),this.currentType==d.Type.void)return this.error(c.DiagnosticCode.Type_0_is_not_assignable_to_type_1,r.initializer.range,this.currentType.toString(),"<auto>"),!1;e.type=this.currentType}else assert(!1);var a=e.type.toNativeType(),o=e.isAny(p.CommonFlags.CONST)||e.is(p.CommonFlags.STATIC|p.CommonFlags.READONLY);if(e.is(p.CommonFlags.AMBIENT))return o?(e.set(p.CommonFlags.MODULE_IMPORT),t.addGlobalImport(e.internalName,e.namespace?e.namespace.simpleName:"env",e.simpleName,a),e.set(p.CommonFlags.COMPILED),!0):(this.error(c.DiagnosticCode.Operation_not_supported,assert(r).range),!1);var s=!1;e.is(p.CommonFlags.INLINED)?n=this.compileInlineConstant(e,e.type,!0):r&&r.initializer?(n||(n=this.compileExpression(r.initializer,e.type)),_BinaryenExpressionGetId(n)!=u.ExpressionId.Const&&(o?(n=this.precomputeExpressionRef(n),_BinaryenExpressionGetId(n)!=u.ExpressionId.Const&&(this.warning(c.DiagnosticCode.Compiling_constant_with_non_constant_initializer_as_mutable,r.range),s=!0)):s=!0)):n=e.type.toNativeZero(t);var l=e.internalName;if(s)t.addGlobal(l,a,!0,e.type.toNativeZero(t)),this.startFunctionBody.push(t.createSetGlobal(l,n));else if(o){switch(_BinaryenExpressionGetType(n)){case u.NativeType.I32:e.constantValueKind=1,e.constantIntegerValue=i64_new(_BinaryenConstGetValueI32(n),0);break;case u.NativeType.I64:e.constantValueKind=1,e.constantIntegerValue=i64_new(_BinaryenConstGetValueI64Low(n),_BinaryenConstGetValueI64High(n));break;case u.NativeType.F32:e.constantValueKind=2,e.constantFloatValue=_BinaryenConstGetValueF32(n);break;case u.NativeType.F64:e.constantValueKind=2,e.constantFloatValue=_BinaryenConstGetValueF64(n);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,assert(e.declaration).range),e.constantValueKind=1,e.constantIntegerValue=i64_new(0)}e.set(p.CommonFlags.INLINED),r?(r.isTopLevel&&t.addGlobal(l,a,!1,n),r.range.source.isEntry&&r.isTopLevelExport&&t.addGlobalExport(e.internalName,r.programLevelInternalName)):assert(!1)}else t.addGlobal(l,a,!o,n);return!0},t.prototype.compileEnumDeclaration=function(e){var t=assert(this.program.elementsLookup.get(e.fileLevelInternalName));return assert(t.kind==p.ElementKind.ENUM),this.compileEnum(t)?t:null},t.prototype.compileEnum=function(e){if(e.is(p.CommonFlags.COMPILED))return!0;e.set(p.CommonFlags.COMPILED);var t=this.module;this.currentEnum=e;var r,n,i=null;if(e.members)try{for(var o=a(e.members.values()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l.kind==p.ElementKind.ENUMVALUE){var h=!1,f=l,_=f.declaration;if(f.set(p.CommonFlags.COMPILED),f.is(p.CommonFlags.INLINED))e.declaration.isTopLevelExport&&t.addGlobal(f.internalName,u.NativeType.I32,!1,t.createI32(f.constantValue));else{var m=void 0;_.value?(m=this.compileExpression(_.value,d.Type.i32),_BinaryenExpressionGetId(m)!=u.ExpressionId.Const&&(m=this.precomputeExpressionRef(m),_BinaryenExpressionGetId(m)!=u.ExpressionId.Const&&(e.is(p.CommonFlags.CONST)&&this.warning(c.DiagnosticCode.Compiling_constant_with_non_constant_initializer_as_mutable,_.range),h=!0))):null==i?m=t.createI32(0):i.is(p.CommonFlags.INLINED)?m=t.createI32(i.constantValue+1):(m=t.createBinary(u.BinaryOp.AddI32,t.createGetGlobal(i.internalName,u.NativeType.I32),t.createI32(1)),e.is(p.CommonFlags.CONST)&&this.warning(c.DiagnosticCode.Compiling_constant_with_non_constant_initializer_as_mutable,_.range),h=!0),h?(t.addGlobal(f.internalName,u.NativeType.I32,!0,t.createI32(0)),this.startFunctionBody.push(t.createSetGlobal(f.internalName,m))):(t.addGlobal(f.internalName,u.NativeType.I32,!1,m),_BinaryenExpressionGetType(m)==u.NativeType.I32?(f.constantValue=_BinaryenConstGetValueI32(m),f.set(p.CommonFlags.INLINED)):(assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,_.range),f.constantValue=0))}i=f,e.declaration.range.source.isEntry&&e.declaration.isTopLevelExport&&(l.is(p.CommonFlags.INLINED)?t.addGlobalExport(l.internalName,l.internalName):_&&this.warning(c.DiagnosticCode.Cannot_export_a_mutable_global,_.range))}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this.currentEnum=null,!0},t.prototype.compileFunctionDeclaration=function(e,t,r){void 0===r&&(r=null);var n=assert(this.program.elementsLookup.get(e.fileLevelInternalName));return assert(n.kind==p.ElementKind.FUNCTION_PROTOTYPE),this.compileFunctionUsingTypeArguments(n,t,r,null,n.declaration.name)},t.prototype.compileFunctionUsingTypeArguments=function(e,t,r,n,i){var a=e.resolveUsingTypeArguments(t,r,i);return a?(a.outerScope=n,this.compileFunction(a)?a:null):null},t.prototype.ensureFunctionType=function(e){var t,r=e.parameterTypes.length,n=e.thisType,i=0;n?((t=new Array(1+r))[0]=n.toNativeType(),i=1):t=new Array(r);for(var a=0;a<r;++a,++i)t[i]=e.parameterTypes[a].toNativeType();var o=e.returnType.toNativeType(),s=this.module,c=s.getFunctionTypeBySignature(o,t);return c||(c=s.addFunctionType(e.toSignatureString(),o,t)),c},t.prototype.compileFunction=function(e){if(e.is(p.CommonFlags.COMPILED))return!0;assert(!e.is(p.CommonFlags.AMBIENT|p.CommonFlags.BUILTIN)||"abort"==e.internalName),e.set(p.CommonFlags.COMPILED);var t,r=e.prototype.declaration,n=r.body;n?e.is(p.CommonFlags.AMBIENT)&&this.error(c.DiagnosticCode.An_implementation_cannot_be_declared_in_ambient_contexts,r.name.range):e.is(p.CommonFlags.AMBIENT)||this.error(c.DiagnosticCode.Function_implementation_is_missing_or_not_immediately_following_the_declaration,r.name.range);var i=this.ensureFunctionType(e.signature),a=this.module;if(n){var o=e.is(p.CommonFlags.CONSTRUCTOR),s=e.signature.returnType,u=this.currentFunction;this.currentFunction=e;var l=e.flow,f=void 0;if(n.kind==h.NodeKind.EXPRESSION)assert(!e.isAny(p.CommonFlags.CONSTRUCTOR|p.CommonFlags.GET|p.CommonFlags.SET)),assert(e.is(p.CommonFlags.ARROW)),f=this.compileExpression(n.expression,s),l.set(1);else if(assert(n.kind==h.NodeKind.BLOCK),f=this.compileStatement(n),l.finalize(),o){var _=this.options.nativeSizeType;if(assert(e.is(p.CommonFlags.INSTANCE)),!l.is(1))if(l.is(16))f=a.createBlock(null,[f,a.createGetLocal(0,_)],_);else{var m=assert(e.memberOf);assert(m.kind==p.ElementKind.CLASS),f=a.createBlock(null,[f,a.createTeeLocal(0,A(this,m,r.name))],_)}}else s==d.Type.void||l.is(1)||this.error(c.DiagnosticCode.A_function_whose_declared_type_is_not_void_must_return_a_value,r.signature.returnType.range);this.currentFunction=u;var y=h.getFirstDecorator("type",r.decorators),g=void 0;null!=y&&y.arguments&&y.arguments.length>0&&(g=y.arguments.map(function(e){return e.text}).join(",")),t=a.addFunction(e.internalName,i,d.typesToNativeTypes(e.additionalLocals),f,g)}else{e.set(p.CommonFlags.MODULE_IMPORT);var E=e.prototype.namespace;t=a.addFunctionImport(e.internalName,E?E.simpleName:"env",e.simpleName,i)}return r.range.source.isEntry&&r.isTopLevelExport&&a.addFunctionExport(e.internalName,r.name.text),e.finalize(a,t),!0},t.prototype.compileNamespaceDeclaration=function(e){for(var t=e.members,r=this.options.noTreeShaking,n=0,i=t.length;n<i;++n){var a=t[n];switch(a.kind){case h.NodeKind.CLASSDECLARATION:!r&&!a.is(p.CommonFlags.EXPORT)||a.isGeneric||this.compileClassDeclaration(a,[]);break;case h.NodeKind.INTERFACEDECLARATION:!r&&!a.is(p.CommonFlags.EXPORT)||a.isGeneric||this.compileInterfaceDeclaration(a,[]);break;case h.NodeKind.ENUMDECLARATION:(r||a.is(p.CommonFlags.EXPORT))&&this.compileEnumDeclaration(a);break;case h.NodeKind.FUNCTIONDECLARATION:!r&&!a.is(p.CommonFlags.EXPORT)||a.isGeneric||this.compileFunctionDeclaration(a,[]);break;case h.NodeKind.NAMESPACEDECLARATION:(r||a.is(p.CommonFlags.EXPORT))&&this.compileNamespaceDeclaration(a);break;case h.NodeKind.VARIABLE:if(r||a.is(p.CommonFlags.EXPORT)){var o=this.compileVariableStatement(a,!0);o&&this.startFunctionBody.push(o)}break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,a.range)}}},t.prototype.compileNamespace=function(e){if(e.members){var t,r,n=this.options.noTreeShaking;try{for(var i=a(e.members.values()),o=i.next();!o.done;o=i.next()){var s=o.value;switch(s.kind){case p.ElementKind.CLASS_PROTOTYPE:!n&&!s.is(p.CommonFlags.EXPORT)||s.is(p.CommonFlags.GENERIC)||this.compileClassUsingTypeArguments(s,[]);break;case p.ElementKind.ENUM:this.compileEnum(s);break;case p.ElementKind.FUNCTION_PROTOTYPE:!n&&!s.is(p.CommonFlags.EXPORT)||s.is(p.CommonFlags.GENERIC)||this.compileFunctionUsingTypeArguments(s,[],null,null,s.declaration.name);break;case p.ElementKind.GLOBAL:this.compileGlobal(s);break;case p.ElementKind.NAMESPACE:this.compileNamespace(s)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}},t.prototype.compileExportStatement=function(e){for(var t=this.module,r=this.program.fileLevelExports,n=e.members,i=0,a=n.length;i<a;++i){var o=n[i],s=e.range.source.internalPath+p.PATH_DELIMITER+o.externalName.text,u=r.get(s);if(u)switch(u.kind){case p.ElementKind.CLASS_PROTOTYPE:u.is(p.CommonFlags.GENERIC)||this.compileClassUsingTypeArguments(u,[]);break;case p.ElementKind.ENUM:this.compileEnum(u);break;case p.ElementKind.FUNCTION_PROTOTYPE:if(!u.is(p.CommonFlags.GENERIC)&&e.range.source.isEntry){var l=this.compileFunctionUsingTypeArguments(u,[],null,null,u.declaration.name);if(l){var h=l.prototype.declaration;h&&h.needsExplicitExport(o)&&t.addFunctionExport(l.internalName,o.externalName.text)}}break;case p.ElementKind.GLOBAL:if(this.compileGlobal(u)&&e.range.source.isEntry){var d=u.declaration;d&&d.needsExplicitExport(o)&&(u.is(p.CommonFlags.INLINED)?t.addGlobalExport(u.internalName,o.externalName.text):this.warning(c.DiagnosticCode.Cannot_export_a_mutable_global,o.range))}break;case p.ElementKind.NAMESPACE:this.compileNamespace(u)}}},t.prototype.compileClassDeclaration=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var i=assert(this.program.elementsLookup.get(e.fileLevelInternalName));assert(i.kind==p.ElementKind.CLASS_PROTOTYPE),this.compileClassUsingTypeArguments(i,t,r,n)},t.prototype.compileClassUsingTypeArguments=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var i=e.resolveUsingTypeArguments(t,r,n);i&&this.compileClass(i)},t.prototype.compileClass=function(e){return!!e.is(p.CommonFlags.COMPILED)||(e.set(p.CommonFlags.COMPILED),!0)},t.prototype.compileInterfaceDeclaration=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null),this.error(c.DiagnosticCode.Operation_not_supported,e.range)},t.prototype.addMemorySegment=function(e,t){void 0===t&&(t=8);var r=i64_align(this.memoryOffset,t),n=u.MemorySegment.create(e,r);return this.memorySegments.push(n),this.memoryOffset=i64_add(r,i64_new(e.length,0)),n},t.prototype.ensureFunctionTableEntry=function(e){if(assert(e.is(p.CommonFlags.COMPILED)),e.functionTableIndex>=0)return e.functionTableIndex;var t=this.functionTable,r=t.length;return!e.is(p.CommonFlags.TRAMPOLINE)&&e.signature.requiredParameters<e.signature.parameterTypes.length&&(e=this.ensureTrampoline(e)),t.push(e),e.functionTableIndex=r,r},t.prototype.compileStatement=function(e){var t,r=this.module;switch(e.kind){case h.NodeKind.BLOCK:t=this.compileBlockStatement(e);break;case h.NodeKind.BREAK:t=this.compileBreakStatement(e);break;case h.NodeKind.CONTINUE:t=this.compileContinueStatement(e);break;case h.NodeKind.DO:t=this.compileDoStatement(e);break;case h.NodeKind.EMPTY:t=this.compileEmptyStatement(e);break;case h.NodeKind.EXPRESSION:t=this.compileExpressionStatement(e);break;case h.NodeKind.FOR:t=this.compileForStatement(e);break;case h.NodeKind.IF:t=this.compileIfStatement(e);break;case h.NodeKind.RETURN:t=this.compileReturnStatement(e);break;case h.NodeKind.SWITCH:t=this.compileSwitchStatement(e);break;case h.NodeKind.THROW:t=this.compileThrowStatement(e);break;case h.NodeKind.TRY:t=this.compileTryStatement(e);break;case h.NodeKind.VARIABLE:(t=this.compileVariableStatement(e))||(t=r.createNop());break;case h.NodeKind.VOID:t=this.compileVoidStatement(e);break;case h.NodeKind.WHILE:t=this.compileWhileStatement(e);break;case h.NodeKind.TYPEDECLARATION:if(this.currentFunction==this.startFunction)return r.createNop();default:this.error(c.DiagnosticCode.Operation_not_supported,e.range),assert(!1),t=r.createUnreachable()}return this.options.sourceMap&&y(t,e.range,r,this.currentFunction),t},t.prototype.compileStatements=function(e){for(var t=e.length,r=new Array(t),n=0;n<t;++n)r[n]=this.compileStatement(e[n]);return r},t.prototype.compileBlockStatement=function(e){var t=e.statements,r=this.currentFunction.flow.enterBranchOrScope();this.currentFunction.flow=r;var n=this.module.createBlock(null,this.compileStatements(t),u.NativeType.None),i=r.is(1),a=r.is(2),o=r.is(16);return r=r.leaveBranchOrScope(),this.currentFunction.flow=r,i&&r.set(1),a&&r.set(2),o&&r.set(16),n},t.prototype.compileBreakStatement=function(e){var t=this.module;if(e.label)return this.error(c.DiagnosticCode.Operation_not_supported,e.label.range),t.createUnreachable();var r=this.currentFunction.flow,n=r.breakLabel;return null==n?(this.error(c.DiagnosticCode.A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement,e.range),t.createUnreachable()):(r.set(4),t.createBreak(n))},t.prototype.compileContinueStatement=function(e){var t=this.module,r=e.label;if(r)return this.error(c.DiagnosticCode.Operation_not_supported,r.range),t.createUnreachable();var n=this.currentFunction.flow,i=n.continueLabel;return null==i?(this.error(c.DiagnosticCode.A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement,e.range),t.createUnreachable()):(n.set(8),t.createBreak(i))},t.prototype.compileDoStatement=function(e){var t=this.currentFunction,r=t.enterBreakContext(),n=t.flow,i=n.breakLabel,a=n.continueLabel,o="break|"+r;n.breakLabel=o;var s="continue|"+r;n.continueLabel=s;var c=this.compileStatement(e.statement);n.breakLabel=i,n.continueLabel=a;var p=this.module,l=T(this.compileExpression(e.condition,d.Type.i32,0),this.currentType,p);return this.currentFunction.leaveBreakContext(),p.createBlock(o,[p.createLoop(s,p.createBlock(null,[c,p.createBreak(s,l)],u.NativeType.None))],u.NativeType.None)},t.prototype.compileEmptyStatement=function(e){return this.module.createNop()},t.prototype.compileExpressionStatement=function(e){var t=this.compileExpression(e.expression,d.Type.void,0);return this.currentType!=d.Type.void&&(t=this.module.createDrop(t),this.currentType=d.Type.void),t},t.prototype.compileForStatement=function(e){var t=this.currentFunction,r=t.enterBreakContext(),n=t.flow.enterBranchOrScope();t.flow=n;var i=n.breakLabel="break|"+r;n.breakLabel=i;var a="continue|"+r;n.continueLabel=a;var o=this.module,s=e.initializer?this.compileStatement(e.initializer):o.createNop(),c=e.condition?this.compileExpression(e.condition,d.Type.i32):o.createI32(1),p=e.incrementor?this.compileExpression(e.incrementor,d.Type.void):o.createNop(),l=this.compileStatement(e.statement),h=!e.condition&&n.is(1),f=!e.condition&&n.is(2),_=!e.condition&&n.is(16);h&&n.set(1),f&&n.set(2),_&&n.set(16),t.flow=n.leaveBranchOrScope(),t.leaveBreakContext();var m=o.createBlock(i,[s,o.createLoop(a,o.createBlock(null,[o.createIf(c,o.createBlock(null,[l,p,o.createBreak(a)],u.NativeType.None))],u.NativeType.None))],u.NativeType.None);return(h||f)&&(m=o.createBlock(null,[m,o.createUnreachable()])),m},t.prototype.compileIfStatement=function(e){var t=this.module,r=this.currentFunction,n=e.ifTrue,i=e.ifFalse,a=T(this.compileExpression(e.condition,d.Type.i32,0),this.currentType,t);if(this.currentFunction.isAny(p.CommonFlags.GENERIC|p.CommonFlags.GENERIC_CONTEXT)&&_BinaryenExpressionGetId(a=this.precomputeExpressionRef(a))==u.ExpressionId.Const&&_BinaryenExpressionGetType(a)==u.NativeType.I32){return _BinaryenConstGetValueI32(a)?this.compileStatement(n):i?this.compileStatement(i):t.createNop()}var o=r.flow.enterBranchOrScope();r.flow=o;var s=this.compileStatement(n),c=o.is(1),l=o.is(2),h=o.is(16);o=o.leaveBranchOrScope(),r.flow=o;var f=0,_=!1,m=!1,y=!1;return i&&(o=o.enterBranchOrScope(),r.flow=o,f=this.compileStatement(i),_=o.is(1),m=o.is(2),y=o.is(16),o=o.leaveBranchOrScope(),r.flow=o),c&&_&&o.set(1),l&&m&&o.set(2),h&&y&&o.set(16),t.createIf(a,s,f)},t.prototype.compileReturnStatement=function(e){var t=this.currentFunction,r=0;return e.value&&(r=this.compileExpression(e.value,t.signature.returnType)),t.flow.set(1),this.module.createReturn(r)},t.prototype.compileSwitchStatement=function(e){var t=this.module,r=this.currentFunction,n=r.enterBreakContext(),i=r.getTempLocal(d.Type.u32),a=i.index,o=e.cases,s=o.length,c=new Array(1+s);c[0]=t.createSetLocal(a,this.compileExpression(e.condition,d.Type.u32));for(var p=1,l=-1,h=0;h<s;++h){var f=o[h].label;f?c[p++]=t.createBreak("case"+h.toString(10)+"|"+n,t.createBinary(u.BinaryOp.EqI32,t.createGetLocal(a,u.NativeType.I32),this.compileExpression(f,d.Type.i32))):l=h}r.freeTempLocal(i),c[p]=t.createBreak((l>=0?"case"+l.toString(10):"break")+"|"+n);var _=t.createBlock("case0|"+n,c,u.NativeType.None),m=!0,y=!0,g=!0;for(h=0;h<s;++h){var E=o[h].statements,T=E.length,v=new Array(1+T);v[0]=_;var A=r.flow.enterBranchOrScope();r.flow=A;var I="break|"+n;A.breakLabel=I;for(var b=h!=s-1,N=b?"case"+(h+1).toString(10)+"|"+n:I,C=0;C<T;++C)v[C+1]=this.compileStatement(E[C]);b||A.is(1)||(m=!1),b||A.is(2)||(y=!1),b||A.is(16)||(g=!1),r.flow=A.leaveBranchOrScope(),_=t.createBlock(N,v,u.NativeType.None)}if(r.leaveBreakContext(),l>=0){A=r.flow;m&&A.set(1),y&&A.set(2),g&&A.set(16)}return _},t.prototype.compileThrowStatement=function(e){var t=this.currentFunction.flow;return t.set(2),t.set(1),this.module.createUnreachable()},t.prototype.compileTryStatement=function(e){return this.error(c.DiagnosticCode.Operation_not_supported,e.range),this.module.createUnreachable()},t.prototype.compileVariableStatement=function(e,t){void 0===t&&(t=!1);var r=this.program,n=this.currentFunction,i=e.declarations,a=i.length;if(t||n==this.startFunction&&e.parent&&e.parent.kind==h.NodeKind.SOURCE){for(var o=0;o<a;++o)this.compileGlobalDeclaration(i[o]);return 0}var s=new Array;for(o=0;o<a;++o){var l=i[o],f=l.name.text,_=null,m=0;if(l.type){if(!(_=r.resolveType(l.type,n.contextualTypeArguments)))continue;l.initializer&&(m=this.compileExpression(l.initializer,_))}else{if(!l.initializer){this.error(c.DiagnosticCode.Type_expected,l.name.range.atEnd);continue}if(m=this.compileExpression(l.initializer,d.Type.void,0),this.currentType==d.Type.void){this.error(c.DiagnosticCode.Type_0_is_not_assignable_to_type_1,l.range,this.currentType.toString(),"<auto>");continue}_=this.currentType}var y=!1;if(l.is(p.CommonFlags.CONST))if(m)if(m=this.precomputeExpressionRef(m),_BinaryenExpressionGetId(m)==u.ExpressionId.Const){var g=new p.Local(r,f,-1,_);switch(_BinaryenExpressionGetType(m)){case u.NativeType.I32:g=g.withConstantIntegerValue(_BinaryenConstGetValueI32(m),0);break;case u.NativeType.I64:g=g.withConstantIntegerValue(_BinaryenConstGetValueI64Low(m),_BinaryenConstGetValueI64High(m));break;case u.NativeType.F32:g=g.withConstantFloatValue(_BinaryenConstGetValueF32(m));break;case u.NativeType.F64:g=g.withConstantFloatValue(_BinaryenConstGetValueF64(m));break;default:return assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,l.range),this.module.createUnreachable()}var E=n.flow.scopedLocals;if(E){if(E.has(f))return this.error(c.DiagnosticCode.Duplicate_identifier_0,l.name.range,f),this.module.createUnreachable()}else n.flow.scopedLocals=E=new Map;E.set(f,g),y=!0}else this.warning(c.DiagnosticCode.Compiling_constant_with_non_constant_initializer_as_mutable,l.range);else this.error(c.DiagnosticCode._const_declarations_must_be_initialized,l.range);y||(l.isAny(p.CommonFlags.LET|p.CommonFlags.CONST)?n.flow.addScopedLocal(_,f,l):n.addLocal(_,f,l),m&&s.push(this.compileAssignmentWithValue(l.name,m)))}return s.length?1==s.length?s[0]:this.module.createBlock(null,s,u.NativeType.None):0},t.prototype.compileVoidStatement=function(e){return this.compileExpression(e.expression,d.Type.void,2,!1)},t.prototype.compileWhileStatement=function(e){var t=this.module,r=T(this.compileExpression(e.condition,d.Type.i32,0),this.currentType,t);if(this.currentFunction.isAny(p.CommonFlags.GENERIC|p.CommonFlags.GENERIC_CONTEXT)&&_BinaryenExpressionGetId(r=this.precomputeExpressionRef(r))==u.ExpressionId.Const&&_BinaryenExpressionGetType(r)==u.NativeType.I32&&!_BinaryenConstGetValueI32(r))return t.createNop();var n=this.currentFunction,i=n.enterBreakContext(),a=n.flow.enterBranchOrScope();n.flow=a;var o="break|"+i;a.breakLabel=o;var s="continue|"+i;a.continueLabel=s;var c=this.compileStatement(e.statement);n.flow=a.leaveBranchOrScope(),n.leaveBreakContext();var l=t.createBlock(o,[t.createLoop(s,t.createIf(r,t.createBlock(null,[c,t.createBreak(s)],u.NativeType.None)))],u.NativeType.None);return l},t.prototype.compileInlineConstant=function(e,t,r){assert(e.is(p.CommonFlags.INLINED));var n=e.type;switch(!r&&n.is(4)&&t.is(4)&&n.size<t.size?(this.currentType=t).kind:(this.currentType=n).kind){case 0:case 1:var i=n.computeSmallIntegerShift(d.Type.i32);return this.module.createI32(1==e.constantValueKind?i64_low(e.constantIntegerValue)<<i>>i:0);case 5:case 6:case 10:var a=e.type.computeSmallIntegerMask(d.Type.i32);return this.module.createI32(1==e.constantValueKind?i64_low(e.constantIntegerValue)&a:0);case 2:case 7:return this.module.createI32(1==e.constantValueKind?i64_low(e.constantIntegerValue):0);case 4:case 9:if(!e.program.options.isWasm64)return this.module.createI32(1==e.constantValueKind?i64_low(e.constantIntegerValue):0);case 3:case 8:return 1==e.constantValueKind?this.module.createI64(i64_low(e.constantIntegerValue),i64_high(e.constantIntegerValue)):this.module.createI64(0);case 11:return this.module.createF32(e.constantFloatValue);case 12:return this.module.createF64(e.constantFloatValue);default:return assert(!1),this.module.createUnreachable()}},t.prototype.compileExpression=function(e,t,r,n){var i;switch(void 0===r&&(r=1),void 0===n&&(n=!0),this.currentType=t,e.kind){case h.NodeKind.ASSERTION:i=this.compileAssertionExpression(e,t);break;case h.NodeKind.BINARY:i=this.compileBinaryExpression(e,t,n);break;case h.NodeKind.CALL:i=this.compileCallExpression(e,t);break;case h.NodeKind.COMMA:i=this.compileCommaExpression(e,t);break;case h.NodeKind.ELEMENTACCESS:i=this.compileElementAccessExpression(e,t);break;case h.NodeKind.FUNCTION:i=this.compileFunctionExpression(e,t);break;case h.NodeKind.IDENTIFIER:case h.NodeKind.FALSE:case h.NodeKind.NULL:case h.NodeKind.THIS:case h.NodeKind.TRUE:i=this.compileIdentifierExpression(e,t,0==r);break;case h.NodeKind.LITERAL:i=this.compileLiteralExpression(e,t);break;case h.NodeKind.NEW:i=this.compileNewExpression(e,t);break;case h.NodeKind.PARENTHESIZED:i=this.compileParenthesizedExpression(e,t,n);break;case h.NodeKind.PROPERTYACCESS:i=this.compilePropertyAccessExpression(e,t,0==r);break;case h.NodeKind.TERNARY:i=this.compileTernaryExpression(e,t);break;case h.NodeKind.UNARYPOSTFIX:i=this.compileUnaryPostfixExpression(e,t);break;case h.NodeKind.UNARYPREFIX:i=this.compileUnaryPrefixExpression(e,t,n);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),i=this.module.createUnreachable()}var a=this.currentType;return 0!=r&&a!=t&&(i=this.convertExpression(i,a,t,r,e),this.currentType=t),this.options.sourceMap&&y(i,e.range,this.module,this.currentFunction),i},t.prototype.compileExpressionRetainType=function(e,t,r){return void 0===r&&(r=!0),this.compileExpression(e,t==d.Type.void?d.Type.i32:t,0,r)},t.prototype.precomputeExpression=function(e,t,r){return void 0===r&&(r=1),this.precomputeExpressionRef(this.compileExpression(e,t,r))},t.prototype.precomputeExpressionRef=function(e){var t=this.module,r=this.currentType,n=r.toNativeType(),i=t.getFunctionTypeBySignature(n,null);i||(i=t.addFunctionType(r.toSignatureString(),n,null));var a=t.addFunction("__precompute",i,null,e);t.runPasses(["precompute"],a);var o=_BinaryenFunctionGetBody(a);return t.removeFunction("__precompute"),o},t.prototype.convertExpression=function(e,t,r,n,i){assert(0!=n);var a=this.module;return 13==t.kind?(assert(13!=r.kind),this.error(c.DiagnosticCode.Type_0_is_not_assignable_to_type_1,i.range,t.toString(),r.toString()),a.createUnreachable()):13==r.kind?a.createDrop(e):(1!=n||t.isAssignableTo(r)||this.error(c.DiagnosticCode.Conversion_from_type_0_to_1_requires_an_explicit_cast,i.range,t.toString(),r.toString()),t.is(8)?r.is(8)?11==t.kind?12==r.kind&&(e=a.createUnary(u.UnaryOp.PromoteF32,e)):11==r.kind&&(e=a.createUnary(u.UnaryOp.DemoteF64,e)):r.is(4)?11==t.kind?r.is(1)?r.is(64)?e=a.createUnary(u.UnaryOp.TruncF32ToI64,e):(e=a.createUnary(u.UnaryOp.TruncF32ToI32,e),r.is(32)&&(e=g(e,r,a))):r.is(64)?e=a.createUnary(u.UnaryOp.TruncF32ToU64,e):(e=a.createUnary(u.UnaryOp.TruncF32ToU32,e),r.is(32)&&(e=g(e,r,a))):r.is(1)?r.is(64)?e=a.createUnary(u.UnaryOp.TruncF64ToI64,e):(e=a.createUnary(u.UnaryOp.TruncF64ToI32,e),r.is(32)&&(e=g(e,r,a))):r.is(64)?e=a.createUnary(u.UnaryOp.TruncF64ToU64,e):(e=a.createUnary(u.UnaryOp.TruncF64ToU32,e),r.is(32)&&(e=g(e,r,a))):(assert(0==r.flags,"void type expected"),e=a.createDrop(e)):t.is(4)&&r.is(8)?e=11==r.kind?t.is(64)?a.createUnary(t.is(1)?u.UnaryOp.ConvertI64ToF32:u.UnaryOp.ConvertU64ToF32,e):a.createUnary(t.is(1)?u.UnaryOp.ConvertI32ToF32:u.UnaryOp.ConvertU32ToF32,e):t.is(64)?a.createUnary(t.is(1)?u.UnaryOp.ConvertI64ToF64:u.UnaryOp.ConvertU64ToF64,e):a.createUnary(t.is(1)?u.UnaryOp.ConvertI32ToF64:u.UnaryOp.ConvertU32ToF64,e):t.is(64)?r.is(64)||(e=a.createUnary(u.UnaryOp.WrapI64,e),r.is(32)&&(e=g(e,r,a))):r.is(64)?e=a.createUnary(r.is(1)?u.UnaryOp.ExtendI32:u.UnaryOp.ExtendU32,e):r.is(32)&&(t.size>r.size||t.size==r.size&&t.is(1)!=r.is(1))&&(e=g(e,r,a)),this.currentType=r,e)},t.prototype.compileAssertionExpression=function(e,t){var r=this.program.resolveType(e.toType,this.currentFunction.contextualTypeArguments);return r?this.compileExpression(e.expression,r,2):this.module.createUnreachable()},t.prototype.compileBinaryExpression=function(e,t,r){void 0===r&&(r=!0);var n,i,a,o,s,h,f,_=this.module,m=e.left,y=e.right,E=!1,v=!1,A=null,I=e.operator;switch(I){case l.Token.LESSTHAN:if(n=this.compileExpressionRetainType(m,t),i=this.currentType,a=this.compileExpressionRetainType(y,i),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!0)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"<",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();switch(n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y),s.kind){case 0:case 1:case 2:f=_.createBinary(u.BinaryOp.LtI32,n,a);break;case 3:f=_.createBinary(u.BinaryOp.LtI64,n,a);break;case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.LtI64:u.BinaryOp.LtI32,n,a);break;case 5:case 6:case 7:case 10:f=_.createBinary(u.BinaryOp.LtU32,n,a);break;case 9:if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnLessThan)){f=this.compileOperatorOverload(S,O,n,a);break}f=_.createBinary(this.options.isWasm64?u.BinaryOp.LtU64:u.BinaryOp.LtU32,n,a);break;case 8:f=_.createBinary(u.BinaryOp.LtU64,n,a);break;case 11:f=_.createBinary(u.BinaryOp.LtF32,n,a);break;case 12:f=_.createBinary(u.BinaryOp.LtF64,n,a);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}this.currentType=d.Type.bool;break;case l.Token.GREATERTHAN:if(n=this.compileExpressionRetainType(m,t),i=this.currentType,a=this.compileExpressionRetainType(y,i),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!0)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,">",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();switch(n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y),s.kind){case 0:case 1:case 2:f=_.createBinary(u.BinaryOp.GtI32,n,a);break;case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.GtI64:u.BinaryOp.GtI32,n,a);break;case 3:f=_.createBinary(u.BinaryOp.GtI64,n,a);break;case 5:case 6:case 7:case 10:f=_.createBinary(u.BinaryOp.GtU32,n,a);break;case 9:if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnGreaterThan)){f=this.compileOperatorOverload(S,O,n,a);break}f=_.createBinary(this.options.isWasm64?u.BinaryOp.GtU64:u.BinaryOp.GtU32,n,a);break;case 8:f=_.createBinary(u.BinaryOp.GtU64,n,a);break;case 11:f=_.createBinary(u.BinaryOp.GtF32,n,a);break;case 12:f=_.createBinary(u.BinaryOp.GtF64,n,a);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}this.currentType=d.Type.bool;break;case l.Token.LESSTHAN_EQUALS:if(n=this.compileExpressionRetainType(m,t),i=this.currentType,a=this.compileExpressionRetainType(y,i),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!0)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"<=",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();switch(n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y),s.kind){case 0:case 1:case 2:f=_.createBinary(u.BinaryOp.LeI32,n,a);break;case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.LeI64:u.BinaryOp.LeI32,n,a);break;case 3:f=_.createBinary(u.BinaryOp.LeI64,n,a);break;case 5:case 6:case 7:case 10:f=_.createBinary(u.BinaryOp.LeU32,n,a);break;case 9:if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnLessThanEquals)){f=this.compileOperatorOverload(S,O,n,a);break}f=_.createBinary(this.options.isWasm64?u.BinaryOp.LeU64:u.BinaryOp.LeU32,n,a);break;case 8:f=_.createBinary(u.BinaryOp.LeU64,n,a);break;case 11:f=_.createBinary(u.BinaryOp.LeF32,n,a);break;case 12:f=_.createBinary(u.BinaryOp.LeF64,n,a);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}this.currentType=d.Type.bool;break;case l.Token.GREATERTHAN_EQUALS:if(n=this.compileExpressionRetainType(m,t),i=this.currentType,a=this.compileExpressionRetainType(y,i),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!0)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,">=",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();switch(n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y),s.kind){case 0:case 1:case 2:f=_.createBinary(u.BinaryOp.GeI32,n,a);break;case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.GeI64:u.BinaryOp.GeI32,n,a);break;case 3:f=_.createBinary(u.BinaryOp.GeI64,n,a);break;case 5:case 6:case 7:case 10:f=_.createBinary(u.BinaryOp.GeU32,n,a);break;case 9:if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnGreaterThanEquals)){f=this.compileOperatorOverload(S,O,n,a);break}f=_.createBinary(this.options.isWasm64?u.BinaryOp.GeU64:u.BinaryOp.GeU32,n,a);break;case 8:f=_.createBinary(u.BinaryOp.GeU64,n,a);break;case 11:f=_.createBinary(u.BinaryOp.GeF32,n,a);break;case 12:f=_.createBinary(u.BinaryOp.GeF64,n,a);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}this.currentType=d.Type.bool;break;case l.Token.EQUALS_EQUALS_EQUALS:case l.Token.EQUALS_EQUALS:if(n=this.compileExpressionRetainType(m,t),i=this.currentType,a=this.compileExpressionRetainType(y,i),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!1)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,l.operatorTokenToString(e.operator),i.toString(),o.toString()),this.currentType=t,_.createUnreachable();switch(n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y),s.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:f=_.createBinary(u.BinaryOp.EqI32,n,a);break;case 9:if(I==l.Token.EQUALS_EQUALS&&this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnEquals)){f=this.compileOperatorOverload(S,O,n,a),assert(this.currentType==d.Type.bool);break}case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.EqI64:u.BinaryOp.EqI32,n,a);break;case 3:case 8:f=_.createBinary(u.BinaryOp.EqI64,n,a);break;case 11:f=_.createBinary(u.BinaryOp.EqF32,n,a);break;case 12:f=_.createBinary(u.BinaryOp.EqF64,n,a);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}this.currentType=d.Type.bool;break;case l.Token.EXCLAMATION_EQUALS_EQUALS:case l.Token.EXCLAMATION_EQUALS:if(n=this.compileExpressionRetainType(m,t),i=this.currentType,a=this.compileExpressionRetainType(y,i),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!1)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,l.operatorTokenToString(e.operator),i.toString(),o.toString()),this.currentType=t,_.createUnreachable();switch(n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y),s.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:f=_.createBinary(u.BinaryOp.NeI32,n,a);break;case 9:if(I==l.Token.EXCLAMATION_EQUALS&&this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnNotEquals)){f=this.compileOperatorOverload(S,O,n,a);break}case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.NeI64:u.BinaryOp.NeI32,n,a);break;case 3:case 8:f=_.createBinary(u.BinaryOp.NeI64,n,a);break;case 11:f=_.createBinary(u.BinaryOp.NeF32,n,a);break;case 12:f=_.createBinary(u.BinaryOp.NeF64,n,a);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}this.currentType=d.Type.bool;break;case l.Token.EQUALS:return this.compileAssignment(m,y,t);case l.Token.PLUS_EQUALS:E=!0;case l.Token.PLUS:if(n=this.compileExpressionRetainType(m,t,!1),E)a=this.compileExpression(y,this.currentType,1,!1);else{if(i=this.currentType,a=this.compileExpressionRetainType(y,i,!1),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!1)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"+",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y)}switch(this.currentType.kind){case 0:case 1:case 5:case 6:case 10:v=!0;case 2:case 7:f=_.createBinary(u.BinaryOp.AddI32,n,a);break;case 9:if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnConcat)){f=this.compileOperatorOverload(S,O,n,a);break}case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.AddI64:u.BinaryOp.AddI32,n,a);break;case 3:case 8:f=_.createBinary(u.BinaryOp.AddI64,n,a);break;case 11:f=_.createBinary(u.BinaryOp.AddF32,n,a);break;case 12:f=_.createBinary(u.BinaryOp.AddF64,n,a);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}break;case l.Token.MINUS_EQUALS:E=!0;case l.Token.MINUS:if(n=this.compileExpressionRetainType(m,t,!1),E)a=this.compileExpression(y,this.currentType,1,!1);else{if(i=this.currentType,a=this.compileExpressionRetainType(y,i,!1),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!1)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"-",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y)}switch(this.currentType.kind){case 0:case 1:case 5:case 6:case 10:v=!0;case 2:case 7:f=_.createBinary(u.BinaryOp.SubI32,n,a);break;case 9:if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnSubtract)){f=this.compileOperatorOverload(S,O,n,a);break}case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.SubI64:u.BinaryOp.SubI32,n,a);break;case 3:case 8:f=_.createBinary(u.BinaryOp.SubI64,n,a);break;case 11:f=_.createBinary(u.BinaryOp.SubF32,n,a);break;case 12:f=_.createBinary(u.BinaryOp.SubF64,n,a);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}break;case l.Token.ASTERISK_EQUALS:E=!0;case l.Token.ASTERISK:if(n=this.compileExpressionRetainType(m,t,!1),E)a=this.compileExpression(y,this.currentType,1,!1);else{if(i=this.currentType,a=this.compileExpressionRetainType(y,i,!1),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!1)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"*",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y)}switch(this.currentType.kind){case 0:case 1:case 5:case 6:case 10:v=!0;case 2:case 7:f=_.createBinary(u.BinaryOp.MulI32,n,a);break;case 9:if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnMultiply)){f=this.compileOperatorOverload(S,O,n,a);break}case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.MulI64:u.BinaryOp.MulI32,n,a);break;case 3:case 8:f=_.createBinary(u.BinaryOp.MulI64,n,a);break;case 11:f=_.createBinary(u.BinaryOp.MulF32,n,a);break;case 12:f=_.createBinary(u.BinaryOp.MulF64,n,a);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}break;case l.Token.ASTERISK_ASTERISK_EQUALS:E=!0;case l.Token.ASTERISK_ASTERISK:n=this.compileExpressionRetainType(m,t,!0);var b=void 0;if(this.currentType==d.Type.f32){if(a=this.compileExpression(y,this.currentType),!(b=this.f32PowInstance)){if(!(N=this.program.elementsLookup.get("Mathf"))){this.error(c.DiagnosticCode.Cannot_find_name_0,e.range,"Mathf"),f=_.createUnreachable();break}if(!(C=N.members?N.members.get("pow"):null)){this.error(c.DiagnosticCode.Cannot_find_name_0,e.range,"Mathf.pow"),f=_.createUnreachable();break}assert(C.kind==p.ElementKind.FUNCTION_PROTOTYPE),this.f32PowInstance=b=C.resolve()}}else if(n=this.convertExpression(n,this.currentType,d.Type.f64,1,m),a=this.compileExpression(y,d.Type.f64),!(b=this.f64PowInstance)){if(!(N=this.program.elementsLookup.get("Math"))){this.error(c.DiagnosticCode.Cannot_find_name_0,e.range,"Math"),f=_.createUnreachable();break}if(!(C=N.members?N.members.get("pow"):null)){this.error(c.DiagnosticCode.Cannot_find_name_0,e.range,"Math.pow"),f=_.createUnreachable();break}assert(C.kind==p.ElementKind.FUNCTION_PROTOTYPE),this.f64PowInstance=b=C.resolve()}f=b&&this.compileFunction(b)?this.makeCallDirect(b,[n,a]):_.createUnreachable();break;case l.Token.SLASH_EQUALS:E=!0;case l.Token.SLASH:if(n=this.compileExpressionRetainType(m,t,!0),E)a=this.compileExpression(y,this.currentType,1,!1);else{if(i=this.currentType,a=this.compileExpressionRetainType(y,i,!1),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!1)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"/",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y)}switch(this.currentType.kind){case 0:case 1:v=!0;case 2:f=_.createBinary(u.BinaryOp.DivI32,n,a);break;case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.DivI64:u.BinaryOp.DivI32,n,a);break;case 3:f=_.createBinary(u.BinaryOp.DivI64,n,a);break;case 5:case 6:case 10:v=!0;case 7:f=_.createBinary(u.BinaryOp.DivU32,n,a);break;case 9:if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnDivide)){f=this.compileOperatorOverload(S,O,n,a);break}f=_.createBinary(this.options.isWasm64?u.BinaryOp.DivU64:u.BinaryOp.DivU32,n,a);break;case 8:f=_.createBinary(u.BinaryOp.DivU64,n,a);break;case 11:f=_.createBinary(u.BinaryOp.DivF32,n,a);break;case 12:f=_.createBinary(u.BinaryOp.DivF64,n,a);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}break;case l.Token.PERCENT_EQUALS:E=!0;case l.Token.PERCENT:if(n=this.compileExpressionRetainType(m,t,!0),E)a=this.compileExpression(y,this.currentType,1,!1);else{if(i=this.currentType,a=this.compileExpressionRetainType(y,i,!1),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!1)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"%",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y)}switch(this.currentType.kind){case 0:case 1:case 2:f=_.createBinary(u.BinaryOp.RemI32,n,a);break;case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.RemI64:u.BinaryOp.RemI32,n,a);break;case 3:f=_.createBinary(u.BinaryOp.RemI64,n,a);break;case 5:case 6:case 7:case 10:f=_.createBinary(u.BinaryOp.RemU32,n,a);break;case 9:if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnFractional)){f=this.compileOperatorOverload(S,O,n,a);break}f=_.createBinary(this.options.isWasm64?u.BinaryOp.RemU64:u.BinaryOp.RemU32,n,a);break;case 8:f=_.createBinary(u.BinaryOp.RemU64,n,a);break;case 11:if(!(b=this.f32ModInstance)){if(!(N=this.program.elementsLookup.get("Mathf"))){this.error(c.DiagnosticCode.Cannot_find_name_0,e.range,"Mathf"),f=_.createUnreachable();break}if(!(C=N.members?N.members.get("mod"):null)){this.error(c.DiagnosticCode.Cannot_find_name_0,e.range,"Mathf.mod"),f=_.createUnreachable();break}assert(C.kind==p.ElementKind.FUNCTION_PROTOTYPE),this.f32ModInstance=b=C.resolve()}f=b&&this.compileFunction(b)?this.makeCallDirect(b,[n,a]):_.createUnreachable();break;case 12:if(!(b=this.f64ModInstance)){var N,C;if(!(N=this.program.elementsLookup.get("Math"))){this.error(c.DiagnosticCode.Cannot_find_name_0,e.range,"Math"),f=_.createUnreachable();break}if(!(C=N.members?N.members.get("mod"):null)){this.error(c.DiagnosticCode.Cannot_find_name_0,e.range,"Math.mod"),f=_.createUnreachable();break}assert(C.kind==p.ElementKind.FUNCTION_PROTOTYPE),this.f64ModInstance=b=C.resolve()}f=b&&this.compileFunction(b)?this.makeCallDirect(b,[n,a]):_.createUnreachable();break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}break;case l.Token.LESSTHAN_LESSTHAN_EQUALS:E=!0;case l.Token.LESSTHAN_LESSTHAN:switch(n=this.compileExpressionRetainType(m,t,!1),a=this.compileExpression(y,this.currentType,1,!1),this.currentType.kind){case 0:case 1:case 5:case 6:case 10:v=!0;default:f=_.createBinary(u.BinaryOp.ShlI32,n,a);break;case 3:case 8:f=_.createBinary(u.BinaryOp.ShlI64,n,a);break;case 9:case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.ShlI64:u.BinaryOp.ShlI32,n,a);break;case 11:case 12:return this.error(c.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,l.operatorTokenToString(e.operator),this.currentType.toString()),_.createUnreachable();case 13:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}break;case l.Token.GREATERTHAN_GREATERTHAN_EQUALS:E=!0;case l.Token.GREATERTHAN_GREATERTHAN:switch(n=this.compileExpressionRetainType(m,t,!0),a=this.compileExpression(y,this.currentType,1,!0),this.currentType.kind){default:f=_.createBinary(u.BinaryOp.ShrI32,n,a);break;case 3:f=_.createBinary(u.BinaryOp.ShrI64,n,a);break;case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.ShrI64:u.BinaryOp.ShrI32,n,a);break;case 5:case 6:case 10:case 7:f=_.createBinary(u.BinaryOp.ShrU32,n,a);break;case 8:f=_.createBinary(u.BinaryOp.ShrU64,n,a);break;case 9:f=_.createBinary(this.options.isWasm64?u.BinaryOp.ShrU64:u.BinaryOp.ShrU32,n,a);break;case 11:case 12:return this.error(c.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,l.operatorTokenToString(e.operator),this.currentType.toString()),_.createUnreachable();case 13:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}break;case l.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS:E=!0;case l.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN:switch(n=this.compileExpressionRetainType(m,t,!0),a=this.compileExpression(y,this.currentType,1,!0),this.currentType.kind){case 0:case 1:v=!0;default:f=_.createBinary(u.BinaryOp.ShrU32,n,a);break;case 3:case 8:f=_.createBinary(u.BinaryOp.ShrU64,n,a);break;case 9:case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.ShrU64:u.BinaryOp.ShrU32,n,a);break;case 13:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}break;case l.Token.AMPERSAND_EQUALS:E=!0;case l.Token.AMPERSAND:if(n=this.compileExpressionRetainType(m,t,!1),E)a=this.compileExpression(y,this.currentType,1,!1);else{if(i=this.currentType,a=this.compileExpressionRetainType(y,i,!1),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!1)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"&",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y)}switch(this.currentType.kind){case 0:case 1:case 5:case 6:case 10:v=!0;default:f=_.createBinary(u.BinaryOp.AndI32,n,a);break;case 3:case 8:f=_.createBinary(u.BinaryOp.AndI64,n,a);break;case 9:if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnBitwiseAnd)){f=this.compileOperatorOverload(S,O,n,a);break}case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.AndI64:u.BinaryOp.AndI32,n,a);break;case 13:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}break;case l.Token.BAR_EQUALS:E=!0;case l.Token.BAR:if(n=this.compileExpressionRetainType(m,t,!1),E)a=this.compileExpression(y,this.currentType,1,!1);else{if(i=this.currentType,a=this.compileExpressionRetainType(y,i,!1),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!1)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"|",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y)}switch(this.currentType.kind){case 0:case 1:case 5:case 6:case 10:v=!0;default:f=_.createBinary(u.BinaryOp.OrI32,n,a);break;case 3:case 8:f=_.createBinary(u.BinaryOp.OrI64,n,a);break;case 9:if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnBitwiseOr)){f=this.compileOperatorOverload(S,O,n,a);break}case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.OrI64:u.BinaryOp.OrI32,n,a);break;case 13:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}break;case l.Token.CARET_EQUALS:E=!0;case l.Token.CARET:if(n=this.compileExpressionRetainType(m,t,!1),E)a=this.compileExpression(y,this.currentType,1,!1);else{if(i=this.currentType,a=this.compileExpressionRetainType(y,i,!1),o=this.currentType,!(s=d.Type.commonCompatible(i,o,!1)))return this.error(c.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"^",i.toString(),o.toString()),this.currentType=t,_.createUnreachable();n=this.convertExpression(n,i,s,1,m),a=this.convertExpression(a,o,s,1,y)}switch(this.currentType.kind){case 0:case 1:case 5:case 6:case 10:v=!0;default:f=_.createBinary(u.BinaryOp.XorI32,n,a);break;case 3:case 8:f=_.createBinary(u.BinaryOp.XorI64,n,a);break;case 9:var S,O;if(this.currentType.is(256))if(null!=(O=(S=assert(this.currentType.classReference)).prototype.fnBitwiseXor)){f=this.compileOperatorOverload(S,O,n,a);break}case 4:f=_.createBinary(this.options.isWasm64?u.BinaryOp.XorI64:u.BinaryOp.XorI32,n,a);break;case 13:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=_.createUnreachable()}break;case l.Token.AMPERSAND_AMPERSAND:n=this.compileExpressionRetainType(m,t),a=this.compileExpression(y,this.currentType,1,!1),(f=_.cloneExpression(n,!0,0))||(A=this.currentFunction.getAndFreeTempLocal(this.currentType),n=_.createTeeLocal(A.index,n)),v=this.currentType.is(36),h=T(n,this.currentType,_),f=f?_.createIf(h,a,f):_.createIf(h,a,_.createGetLocal(assert(A).index,this.currentType.toNativeType()));break;case l.Token.BAR_BAR:n=this.compileExpressionRetainType(m,t),a=this.compileExpression(y,this.currentType,1,!1),(f=this.module.cloneExpression(n,!0,0))||(A=this.currentFunction.getAndFreeTempLocal(this.currentType),n=_.createTeeLocal(A.index,n)),v=this.currentType.is(36),h=T(n,this.currentType,_),f=f?this.module.createIf(h,f,a):_.createIf(h,_.createGetLocal(assert(A).index,this.currentType.toNativeType()),a);break;default:assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),f=this.module.createUnreachable()}return v&&r&&(assert(this.currentType.is(36)),f=g(f,this.currentType,_)),E?this.compileAssignmentWithValue(m,f,t!=d.Type.void):f},t.prototype.compileOperatorOverload=function(e,t,r,n){var i=e.prototype,a=assert(assert(i.members).get(t));assert(a.kind==p.ElementKind.FUNCTION_PROTOTYPE);var o=a.resolve();return o?this.makeCallDirect(o,[r,n]):this.module.createUnreachable()},t.prototype.compileAssignment=function(e,t,r){var n,i=this.program,a=this.currentFunction,o=i.resolveExpression(e,a);if(!o)return this.module.createUnreachable();switch(o.kind){case p.ElementKind.GLOBAL:if(!this.compileGlobal(o))return this.module.createUnreachable();assert(o.type!=d.Type.void);case p.ElementKind.LOCAL:case p.ElementKind.FIELD:n=o.type;break;case p.ElementKind.PROPERTY:var s=o.setterPrototype;if(s){var u=s.resolve();if(!u)return this.module.createUnreachable();assert(1==u.signature.parameterTypes.length),n=u.signature.parameterTypes[0];break}return this.error(c.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,e.range,o.internalName),this.module.createUnreachable();case p.ElementKind.CLASS:if(i.resolvedElementExpression){var l=o.getIndexedGet();if(l){var h=l.resolve();if(!h)return this.module.createUnreachable();n=h.signature.returnType;break}return this.error(c.DiagnosticCode.Index_signature_is_missing_in_type_0,e.range,o.toString()),this.module.createUnreachable()}default:return this.error(c.DiagnosticCode.Operation_not_supported,e.range),this.module.createUnreachable()}var f=this.compileExpression(t,n);return this.compileAssignmentWithValue(e,f,r!=d.Type.void)},t.prototype.compileAssignmentWithValue=function(e,t,r){void 0===r&&(r=!1);var n=this.module,i=this.program.resolveExpression(e,this.currentFunction);if(!i)return n.createUnreachable();switch(i.kind){case p.ElementKind.LOCAL:return this.currentType=r?i.type:d.Type.void,i.is(p.CommonFlags.CONST)?(this.error(c.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,e.range,i.internalName),n.createUnreachable()):r?n.createTeeLocal(i.index,t):n.createSetLocal(i.index,t);case p.ElementKind.GLOBAL:if(!this.compileGlobal(i))return n.createUnreachable();var a=i.type;if(assert(a!=d.Type.void),this.currentType=r?a:d.Type.void,i.is(p.CommonFlags.CONST))return this.error(c.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,e.range,i.internalName),n.createUnreachable();if(r){var o=a.toNativeType(),s=i.internalName;return n.createBlock(null,[n.createSetGlobal(s,t),n.createGetGlobal(s,o)],o)}return n.createSetGlobal(i.internalName,t);case p.ElementKind.FIELD:var u=i.declaration;if(i.is(p.CommonFlags.READONLY)&&!this.currentFunction.is(p.CommonFlags.CONSTRUCTOR)&&null!=u&&null==u.initializer)return this.error(c.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,e.range,i.internalName),n.createUnreachable();var l=assert(this.program.resolvedThisExpression),h=this.compileExpressionRetainType(l,this.options.usizeType);a=i.type;this.currentType=r?a:d.Type.void;o=a.toNativeType();if(r){var f=this.currentFunction.getAndFreeTempLocal(a).index;return n.createBlock(null,[n.createSetLocal(f,t),n.createStore(a.size>>3,h,n.createGetLocal(f,o),o,i.memoryOffset),n.createGetLocal(f,o)],o)}return n.createStore(a.size>>3,h,t,o,i.memoryOffset);case p.ElementKind.PROPERTY:var _=i.setterPrototype;if(_){var m=_.resolve();if(!m)return n.createUnreachable();if(!r){if(m.is(p.CommonFlags.INSTANCE)){l=assert(this.program.resolvedThisExpression),h=this.compileExpressionRetainType(l,this.options.usizeType);return this.makeCallDirect(m,[h,t])}return this.makeCallDirect(m,[t])}var y=i.getterPrototype;assert(null!=y);var g=y.resolve();if(!g)return n.createUnreachable();var E=(k=g.signature.returnType).toNativeType();if(m.is(p.CommonFlags.INSTANCE)){l=assert(this.program.resolvedThisExpression),h=this.compileExpressionRetainType(l,this.options.usizeType),f=this.currentFunction.getAndFreeTempLocal(k).index;return n.createBlock(null,[this.makeCallDirect(m,[n.createTeeLocal(f,h),t]),this.makeCallDirect(g,[n.createGetLocal(f,E)])],E)}return n.createBlock(null,[this.makeCallDirect(m,[t]),this.makeCallDirect(g)],E)}return this.error(c.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,e.range,i.internalName),n.createUnreachable();case p.ElementKind.CLASS:var T=this.program.resolvedElementExpression;if(T){var v=i.getIndexedGet();if(v){var A=v.resolve();if(!A)return n.createUnreachable();var I=i.getIndexedSet();if(!I)return this.error(c.DiagnosticCode.Index_signature_in_type_0_only_permits_reading,e.range,i.internalName),this.currentType=r?A.signature.returnType:d.Type.void,n.createUnreachable();var b=I.resolve();if(!b)return n.createUnreachable();var N=i.type,C=(l=assert(this.program.resolvedThisExpression),h=this.compileExpressionRetainType(l,this.options.usizeType),this.compileExpression(T,d.Type.i32));if(r){var S=this.currentFunction.getTempLocal(N),O=this.currentFunction.getAndFreeTempLocal(this.currentType),k=A.signature.returnType;return this.currentFunction.freeTempLocal(S),n.createBlock(null,[this.makeCallDirect(b,[n.createTeeLocal(S.index,h),n.createTeeLocal(O.index,C),t]),this.makeCallDirect(A,[n.createGetLocal(S.index,S.type.toNativeType()),n.createGetLocal(O.index,O.type.toNativeType())])],k.toNativeType())}return this.makeCallDirect(b,[h,C,t])}return this.error(c.DiagnosticCode.Index_signature_is_missing_in_type_0,e.range,i.internalName),n.createUnreachable()}}return this.error(c.DiagnosticCode.Operation_not_supported,e.range),n.createUnreachable()},t.prototype.compileCallExpression=function(e,t){var r,n,i=this.module,a=this.currentFunction,o=this.program.resolveExpression(e.expression,a);if(!o)return i.createUnreachable();switch(o.kind){case p.ElementKind.FUNCTION_PROTOTYPE:var l=o;if(l.is(p.CommonFlags.AMBIENT|p.CommonFlags.BUILTIN)){var h=s.compileCall(this,l,l.resolveBuiltinTypeArguments(e.typeArguments,a.contextualTypeArguments),e.arguments,t,e);return h||(this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable())}var d=l.resolveUsingTypeArguments(e.typeArguments,a.contextualTypeArguments,e);if(!d)return i.createUnreachable();if(d.is(p.CommonFlags.INSTANCE)){var f=assert(this.program.resolvedThisExpression),_=this.compileExpressionRetainType(f,this.options.usizeType);return this.compileCallDirect(d,e.arguments,e,_)}return this.compileCallDirect(d,e.arguments,e);case p.ElementKind.LOCAL:if(r=o.type.signatureReference){n=i.createGetLocal(o.index,u.NativeType.I32);break}return this.error(c.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,e.range,o.type.toString()),i.createUnreachable();case p.ElementKind.GLOBAL:if(r=o.type.signatureReference){n=i.createGetGlobal(o.internalName,o.type.toNativeType());break}return this.error(c.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,e.range,o.type.toString()),i.createUnreachable();case p.ElementKind.FIELD:if(r=o.type.signatureReference){f=assert(this.program.resolvedThisExpression),_=this.compileExpressionRetainType(f,this.options.usizeType);n=i.createLoad(4,!1,_,u.NativeType.I32,o.memoryOffset);break}return this.error(c.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,e.range,o.type.toString()),i.createUnreachable();case p.ElementKind.FUNCTION_TARGET:r=o.signature,n=this.compileExpression(e.expression,o.type);break;case p.ElementKind.PROPERTY:default:return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable()}return this.compileCallIndirect(r,n,e.arguments,e)},t.prototype.checkCallSignature=function(e,t,r,n){if(r!=(null!=e.thisType))return this.error(c.DiagnosticCode.Operation_not_supported,n.range),!1;var i=e.hasRest;if(i)return this.error(c.DiagnosticCode.Operation_not_supported,n.range),!1;var a=e.requiredParameters,o=e.parameterTypes.length;return t<a?(this.error(a<o?c.DiagnosticCode.Expected_at_least_0_arguments_but_got_1:c.DiagnosticCode.Expected_0_arguments_but_got_1,n.range,a.toString(),t.toString()),!1):!(t>o&&!i)||(this.error(c.DiagnosticCode.Expected_0_arguments_but_got_1,n.range,o.toString(),t.toString()),!1)},t.prototype.compileCallDirect=function(e,t,r,n){void 0===n&&(n=0);var i=t.length,a=e.signature;if(!this.checkCallSignature(a,i,0!=n,r))return this.module.createUnreachable();var o=n?i+1:i,s=new Array(o),c=0;n&&(s[0]=n,c=1);for(var u=a.parameterTypes,p=0;p<i;++p,++c)s[c]=this.compileExpression(t[p],u[p]);return assert(c==o),this.makeCallDirect(e,s)},t.prototype.ensureTrampoline=function(e){var t=e.trampoline;if(t)return t;var r=e.signature,n=e.internalName,i=r.parameterTypes,a=e.prototype.declaration.signature.parameterTypes,o=r.returnType,s=r.thisType,c=e.is(p.CommonFlags.INSTANCE),l=r.requiredParameters,h=l,f=i.length,_=f;c&&(++h,++_);var m=assert(_-h),y=new Array(h),g=0,E=this.module;c&&(y[0]=E.createGetLocal(0,this.options.nativeSizeType),g=1);for(var T=0;T<l;++T,++g)y[g]=E.createGetLocal(g,i[T].toNativeType());assert(g==h);var v=new d.Signature(i,o,s),A=n+"|trampoline";v.requiredParameters=f,(t=new p.Function(e.prototype,A,v,e.memberOf)).set(e.flags|p.CommonFlags.TRAMPOLINE|p.CommonFlags.COMPILED),t.contextualTypeArguments=e.contextualTypeArguments,e.trampoline=t;var I=this.currentFunction;this.currentFunction=t;var b=m+1,N=new Array(b),C="of"+m.toString(10);for(T=0;T<b;++T){var S=T.toString(10)+C;N[T]=S}var O=E.createBlock(N[0],[E.createBlock("oob",[E.createSwitch(N,"oob",l?E.createBinary(u.BinaryOp.SubI32,E.createGetGlobal("argumentCount",u.NativeType.I32),E.createI32(l)):E.createGetGlobal("argumentCount",u.NativeType.I32))]),E.createUnreachable()]);for(T=0;T<m;++T,++g){var k=i[l+T];O=E.createBlock(N[T+1],[O,E.createSetLocal(g,this.compileExpression(assert(a[l+T].initializer),k))]),y[g]=E.createGetLocal(g,k.toNativeType())}this.currentFunction=I,assert(g==_);var L=this.ensureFunctionType(v),x=E.addFunction(A,L,d.typesToNativeTypes(t.additionalLocals),E.createBlock(null,[O,E.createCall(n,y,o.toNativeType())],o.toNativeType()));return t.finalize(E,x),t},t.prototype.makeCallDirect=function(e,t){void 0===t&&(t=null);var r=t?t.length:0,n=r,i=e.signature.requiredParameters,a=e.signature.parameterTypes.length,o=a;e.is(p.CommonFlags.INSTANCE)&&(++i,++o,--n),assert(r>=i);var s=this.module;if(!this.compileFunction(e))return s.createUnreachable();var c=e.signature.returnType,u=e.is(p.CommonFlags.MODULE_IMPORT);if(r<o){t||((t=new Array(o)).length=0);for(var l=e.signature.parameterTypes,h=n;h<a;++h)t.push(l[h].toNativeZero(s));if(!u){if(e=this.ensureTrampoline(e),!this.compileFunction(e))return s.createUnreachable();var d=c.toNativeType();return this.currentType=c,s.createBlock(null,[this.ensureArgumentCount(n),s.createCall(e.internalName,t,d)],d)}}return this.currentType=c,u?s.createCallImport(e.internalName,t,c.toNativeType()):s.createCall(e.internalName,t,c.toNativeType())},t.prototype.compileCallIndirect=function(e,t,r,n,i){void 0===i&&(i=0);var a=r.length;if(!this.checkCallSignature(e,a,0!=i,n))return this.module.createUnreachable();var o=i?a+1:a,s=new Array(o),c=0;i&&(s[0]=i,c=1);for(var u=e.parameterTypes,p=0;p<a;++p,++c)s[c]=this.compileExpression(r[p],u[p]);return assert(c==o),this.makeCallIndirect(e,t,s)},t.prototype.makeCallIndirect=function(e,t,r){void 0===r&&(r=null);var n=r?r.length:0,i=n,a=e.requiredParameters,o=e.parameterTypes.length,s=o;e.thisType&&(++a,++s,--i),assert(n>=a),this.ensureFunctionType(e);var c=this.module;if(n<s){r||((r=new Array(s)).length=0);for(var u=e.parameterTypes,p=i;p<o;++p)r.push(u[p].toNativeZero(c))}var l=e.returnType;return this.currentType=l,c.createBlock(null,[this.ensureArgumentCount(i),c.createCallIndirect(t,r,e.toSignatureString())],l.toNativeType())},t.prototype.ensureArgumentCount=function(e){var t=this.module;return this.argumentCountRef||(this.argumentCountRef=t.addGlobal("argumentCount",u.NativeType.I32,!0,t.createI32(0))),t.createSetGlobal("argumentCount",t.createI32(e))},t.prototype.compileCommaExpression=function(e,t){for(var r=e.expressions,n=r.length,i=new Array(n--),a=0;a<n;++a)i[a]=this.compileExpression(r[a],d.Type.void);return i[n]=this.compileExpression(r[n],t),this.module.createBlock(null,i,this.currentType.toNativeType())},t.prototype.compileElementAccessExpression=function(e,t){var r=this.program.resolveElementAccess(e,this.currentFunction);if(!r)return this.module.createUnreachable();switch(r.kind){case p.ElementKind.CLASS:var n=r.getIndexedGet();if(!n)return this.error(c.DiagnosticCode.Index_signature_is_missing_in_type_0,e.expression.range,r.internalName),this.module.createUnreachable();var i=n.resolve();if(!i)return this.module.createUnreachable();var a=this.compileExpression(e.expression,r.type);return this.compileCallDirect(i,[e.elementExpression],e,a)}return this.error(c.DiagnosticCode.Operation_not_supported,e.range),this.module.createUnreachable()},t.prototype.compileFunctionExpression=function(e,t){var r=e.declaration,n=r.name,i=(n.text.length?n.text:"anonymous")+"|"+this.functionTable.length.toString(10),a=this.currentFunction,o=new p.FunctionPrototype(this.program,i,a.internalName+p.INNER_DELIMITER+i,r),s=this.compileFunctionUsingTypeArguments(o,[],a.contextualTypeArguments,a.flow,r);if(!s)return this.module.createUnreachable();this.currentType=s.signature.type;var c=this.ensureFunctionTableEntry(s);return c<0?this.module.createUnreachable():this.module.createI32(c)},t.prototype.compileIdentifierExpression=function(e,t,r){var n=this.module;switch(e.kind){case h.NodeKind.NULL:var i=this.options;return t.classReference||(this.currentType=i.usizeType),i.isWasm64?n.createI64(0):n.createI32(0);case h.NodeKind.TRUE:return this.currentType=d.Type.bool,n.createI32(1);case h.NodeKind.FALSE:return this.currentType=d.Type.bool,n.createI32(0);case h.NodeKind.THIS:if((f=this.currentFunction).is(p.CommonFlags.INSTANCE)){var a=assert(f.memberOf);assert(a.kind==p.ElementKind.CLASS);var o=a.type;if(f.is(p.CommonFlags.CONSTRUCTOR)){var l=f.flow;if(!l.is(16))return l.set(16),this.currentType=o,n.createTeeLocal(0,A(this,a,e))}return this.currentType=o,n.createGetLocal(0,o.toNativeType())}return this.error(c.DiagnosticCode._this_cannot_be_referenced_in_current_location,e.range),this.currentType=this.options.usizeType,n.createUnreachable();case h.NodeKind.SUPER:var f;if((f=this.currentFunction).is(p.CommonFlags.INSTANCE)){a=assert(f.memberOf);assert(a.kind==p.ElementKind.CLASS);var _=a.base;if(_){var m=_.type;return this.currentType=m,n.createGetLocal(0,m.toNativeType())}}return this.error(c.DiagnosticCode._super_can_only_be_referenced_in_a_derived_class,e.range),this.currentType=this.options.usizeType,n.createUnreachable()}var y=this.program.resolveIdentifier(e,this.currentFunction,this.currentEnum);if(!y)return n.createUnreachable();switch(y.kind){case p.ElementKind.LOCAL:if(y.is(p.CommonFlags.INLINED))return this.compileInlineConstant(y,t,r);var g=y.type,E=y.index;return assert(E>=0),this.currentType=g,this.module.createGetLocal(E,g.toNativeType());case p.ElementKind.GLOBAL:if(y.is(p.CommonFlags.AMBIENT|p.CommonFlags.BUILTIN))return s.compileGetConstant(this,y,e);if(!this.compileGlobal(y))return this.module.createUnreachable();var T=y.type;return assert(T!=d.Type.void),y.is(p.CommonFlags.INLINED)?this.compileInlineConstant(y,t,r):(this.currentType=T,this.module.createGetGlobal(y.internalName,T.toNativeType()));case p.ElementKind.ENUMVALUE:return y.is(p.CommonFlags.COMPILED)?(this.currentType=d.Type.i32,y.is(p.CommonFlags.INLINED)?this.module.createI32(y.constantValue):this.module.createGetGlobal(y.internalName,u.NativeType.I32)):(this.error(c.DiagnosticCode.A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums,e.range),this.currentType=d.Type.i32,this.module.createUnreachable());case p.ElementKind.FUNCTION_PROTOTYPE:var v=y.resolve(null,this.currentFunction.contextualTypeArguments);if(!v||!this.compileFunction(v))return n.createUnreachable();var I=this.ensureFunctionTableEntry(v);return this.currentType=v.signature.type,this.module.createI32(I)}return this.error(c.DiagnosticCode.Operation_not_supported,e.range),this.module.createUnreachable()},t.prototype.compileLiteralExpression=function(e,t,r){void 0===r&&(r=!1);var n=this.module;switch(e.literalKind){case h.LiteralKind.ARRAY:assert(!r);var i=t.classReference;return i&&i.prototype==this.program.arrayPrototype?this.compileStaticArray(assert(i.typeArguments)[0],e.elementExpressions,e):(this.error(c.DiagnosticCode.Operation_not_supported,e.range),n.createUnreachable());case h.LiteralKind.FLOAT:var a=e.value;return r&&(a=-a),t==d.Type.f32?n.createF32(a):(this.currentType=d.Type.f64,n.createF64(a));case h.LiteralKind.INTEGER:var o=e.value;switch(r&&(o=i64_sub(i64_new(0),o)),t.kind){case 0:if(i64_is_i8(o))return n.createI32(i64_low(o));break;case 5:if(i64_is_u8(o))return n.createI32(i64_low(o));break;case 1:if(i64_is_i16(o))return n.createI32(i64_low(o));break;case 6:if(i64_is_u16(o))return n.createI32(i64_low(o));break;case 2:case 7:if(i64_is_i32(o)||i64_is_u32(o))return n.createI32(i64_low(o));break;case 10:if(i64_is_bool(o))return n.createI32(i64_low(o));break;case 4:case 9:if(!this.options.isWasm64){if(i64_is_i32(o)||i64_is_u32(o))return n.createI32(i64_low(o));break}return n.createI64(i64_low(o),i64_high(o));case 3:case 8:return n.createI64(i64_low(o),i64_high(o));case 11:if(i64_is_f32(o))return n.createF32(i64_to_f32(o));break;case 12:if(i64_is_f64(o))return n.createF64(i64_to_f64(o));break;case 13:break;default:return assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),n.createUnreachable()}return i64_is_i32(o)?(this.currentType=d.Type.i32,n.createI32(i64_low(o))):(this.currentType=d.Type.i64,n.createI64(i64_low(o),i64_high(o)));case h.LiteralKind.STRING:return assert(!r),this.compileStaticString(e.value)}return this.error(c.DiagnosticCode.Operation_not_supported,e.range),this.currentType=t,n.createUnreachable()},t.prototype.compileStaticString=function(e){var t=this.module,r=this.options,n=this.stringSegments,i=n.get(e);if(!i){var a=e.length,o=new Uint8Array(4+2*a);o[0]=255&a,o[1]=a>>>8&255,o[2]=a>>>16&255,o[3]=a>>>24&255;for(var s=0;s<a;++s)o[4+2*s]=255&e.charCodeAt(s),o[5+2*s]=e.charCodeAt(s)>>>8&255;i=this.addMemorySegment(o,r.usizeType.byteSize),n.set(e,i)}var c=i.offset,u=this.program.typesLookup.get("string");return this.currentType=u||r.usizeType,r.isWasm64?t.createI64(i64_low(c),i64_high(c)):(assert(i64_is_i32(c)),t.createI32(i64_low(c)))},t.prototype.compileStaticArray=function(e,t,r){var n=!0,i=this.module,a=assert(this.program.arrayPrototype);if(!a||a.kind!=p.ElementKind.CLASS_PROTOTYPE)return i.createUnreachable();var o=a.resolve([e]);if(!o)return i.createUnreachable();var s,l,h=t.length,d=e.toNativeType();switch(d){case u.NativeType.I32:s=changetype(new Int32Array(h)),l=4*h;break;case u.NativeType.I64:s=changetype(new Array(h)),l=8*h;break;case u.NativeType.F32:s=changetype(new Float32Array(h)),l=4*h;break;case u.NativeType.F64:s=changetype(new Float64Array(h)),l=8*h;break;default:return assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,r.range),i.createUnreachable()}for(var _,m=new Array(h),y=0;y<h;++y)if(m[y]=t[y]?this.compileExpression(t[y],e):e.toNativeZero(i),n)if(_=this.precomputeExpressionRef(m[y]),_BinaryenExpressionGetId(_)==u.ExpressionId.Const)switch(assert(_BinaryenExpressionGetType(_)==d),d){case u.NativeType.I32:changetype(s)[y]=_BinaryenConstGetValueI32(_);break;case u.NativeType.I64:changetype(s)[y]=i64_new(_BinaryenConstGetValueI64Low(_),_BinaryenConstGetValueI64High(_));break;case u.NativeType.F32:changetype(s)[y]=_BinaryenConstGetValueF32(_);break;case u.NativeType.F64:changetype(s)[y]=_BinaryenConstGetValueF64(_);break;default:assert(!1)}else n=!1;var g=this.options.usizeType.byteSize,E=g+4+4;if(n){var T=new Uint8Array(E+l),v=this.addMemorySegment(T),A=0;switch(8==g?f.writeI64(i64_add(v.offset,i64_new(E)),T,0):(assert(0==i64_high(v.offset)),f.writeI32(i64_low(v.offset)+E,T,0)),A+=g,f.writeI32(h,T,A),A+=4,f.writeI32(h,T,A),A+=4,assert(A==E),d){case u.NativeType.I32:for(y=0;y<h;++y)f.writeI32(changetype(s)[y],T,A),A+=4;break;case u.NativeType.I64:for(y=0;y<h;++y)f.writeI64(changetype(s)[y],T,A),A+=8;break;case u.NativeType.F32:for(y=0;y<h;++y)f.writeF32(changetype(s)[y],T,A),A+=4;break;case u.NativeType.F64:for(y=0;y<h;++y)f.writeF64(changetype(s)[y],T,A),A+=8;break;default:return assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,r.range),i.createUnreachable()}return assert(A==E+l),this.currentType=o.type,8==g?i.createI64(i64_low(v.offset),i64_high(v.offset)):i.createI32(i64_low(v.offset))}throw new Error("not implemented")},t.prototype.compileNewExpression=function(e,t){var r=this.module,n=this.options,i=this.currentFunction,a=this.program.resolveExpression(e.expression,i);if(!a)return r.createUnreachable();if(a.kind!=p.ElementKind.CLASS_PROTOTYPE)return this.error(c.DiagnosticCode.Cannot_use_new_with_an_expression_whose_type_lacks_a_construct_signature,e.expression.range),this.module.createUnreachable();var o,s=a.resolveUsingTypeArguments(e.typeArguments,null,e);if(!s)return r.createUnreachable();for(var u=s,l=s.constructorInstance;!l&&(u=s.base);)l=u.constructorInstance;return o=l?this.compileCallDirect(l,e.arguments,e,n.usizeType.toNativeZero(r)):v(this,s,e),this.currentType=s.type,o},t.prototype.compileParenthesizedExpression=function(e,t,r){return void 0===r&&(r=!0),this.compileExpression(e.expression,t,0,r)},t.prototype.compilePropertyAccessExpression=function(e,t,r){var n=this.program,i=this.module,a=n.resolvePropertyAccess(e,this.currentFunction);if(!a)return i.createUnreachable();switch(a.kind){case p.ElementKind.GLOBAL:if(a.is(p.CommonFlags.AMBIENT|p.CommonFlags.BUILTIN))return s.compileGetConstant(this,a,e);if(!this.compileGlobal(a))return i.createUnreachable();var o=a.type;return assert(o!=d.Type.void),a.is(p.CommonFlags.INLINED)?this.compileInlineConstant(a,t,r):(this.currentType=o,i.createGetGlobal(a.internalName,o.toNativeType()));case p.ElementKind.ENUMVALUE:return this.compileEnum(a.enum)?(this.currentType=d.Type.i32,a.is(p.CommonFlags.INLINED)?i.createI32(a.constantValue):i.createGetGlobal(a.internalName,u.NativeType.I32)):this.module.createUnreachable();case p.ElementKind.FIELD:var l=assert(n.resolvedThisExpression);assert(a.memoryOffset>=0);var h=this.compileExpressionRetainType(l,this.options.usizeType);return this.currentType=a.type,i.createLoad(a.type.size>>3,a.type.is(5),h,a.type.toNativeType(),a.memoryOffset);case p.ElementKind.PROPERTY:var f=a.getterPrototype;if(f){var _=f.resolve(null);if(!_)return i.createUnreachable();var m=_.signature;if(!this.checkCallSignature(m,0,_.is(p.CommonFlags.INSTANCE),e))return i.createUnreachable();if(_.is(p.CommonFlags.INSTANCE)){var y=assert(_.memberOf);assert(y.kind==p.ElementKind.CLASS);l=assert(n.resolvedThisExpression),h=this.compileExpressionRetainType(l,this.options.usizeType);return this.currentType=m.returnType,this.compileCallDirect(_,[],e,h)}return this.currentType=m.returnType,this.compileCallDirect(_,[],e)}return this.error(c.DiagnosticCode.Property_0_does_not_exist_on_type_1,e.range,a.simpleName,a.parent.toString()),i.createUnreachable()}return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable()},t.prototype.compileTernaryExpression=function(e,t){var r=e.ifThen,n=e.ifElse,i=T(this.compileExpression(e.condition,d.Type.u32,0),this.currentType,this.module);if(this.currentFunction.isAny(p.CommonFlags.GENERIC|p.CommonFlags.GENERIC_CONTEXT)&&_BinaryenExpressionGetId(i=this.precomputeExpressionRef(i))==u.ExpressionId.Const&&_BinaryenExpressionGetType(i)==u.NativeType.I32)return _BinaryenConstGetValueI32(i)?this.compileExpression(r,t):this.compileExpression(n,t);var a,o,s=this.currentFunction;if(s.is(p.CommonFlags.CONSTRUCTOR)){var c=s.flow;c=c.enterBranchOrScope(),s.flow=c,a=this.compileExpression(r,t);var l=c.is(16);c=c.leaveBranchOrScope(),s.flow=c,c=c.enterBranchOrScope(),s.flow=c,o=this.compileExpression(n,t);var h=c.is(16);c=c.leaveBranchOrScope(),s.flow=c,l&&h&&c.set(16)}else a=this.compileExpression(r,t),o=this.compileExpression(n,t);return this.module.createIf(i,a,o)},t.prototype.compileUnaryPostfixExpression=function(e,t){var r=this.module,n=this.currentFunction,i=this.compileExpression(e.operand,t==d.Type.void?d.Type.i32:t,0,!1);if(_BinaryenExpressionGetId(i)==u.ExpressionId.Unreachable)return i;var a,o,s,p,h=this.currentType,f=!1;switch(e.operator){case l.Token.PLUS_PLUS:if(h.is(256))return this.error(c.DiagnosticCode.Operation_not_supported,e.range),r.createUnreachable();switch(h.kind){case 0:case 1:case 5:case 6:case 10:f=!0;default:a=u.BinaryOp.AddI32,o=u.NativeType.I32,s=r.createI32(1);break;case 9:case 4:a=(_=this.options).isWasm64?u.BinaryOp.AddI64:u.BinaryOp.AddI32,o=_.nativeSizeType,s=h.toNativeOne(r);break;case 3:case 8:a=u.BinaryOp.AddI64,o=u.NativeType.I64,s=r.createI64(1);break;case 11:a=u.BinaryOp.AddF32,o=u.NativeType.F32,s=r.createF32(1);break;case 12:a=u.BinaryOp.AddF64,o=u.NativeType.F64,s=r.createF64(1);break;case 13:return assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),r.createUnreachable()}break;case l.Token.MINUS_MINUS:if(h.is(256))return this.error(c.DiagnosticCode.Operation_not_supported,e.range),r.createUnreachable();switch(h.kind){case 0:case 1:case 5:case 6:case 10:f=!0;default:a=u.BinaryOp.SubI32,o=u.NativeType.I32,s=r.createI32(1);break;case 9:case 4:var _;a=(_=this.options).isWasm64?u.BinaryOp.SubI64:u.BinaryOp.SubI32,o=_.nativeSizeType,s=h.toNativeOne(r);break;case 3:case 8:a=u.BinaryOp.SubI64,o=u.NativeType.I64,s=r.createI64(1);break;case 11:a=u.BinaryOp.SubF32,o=u.NativeType.F32,s=r.createF32(1);break;case 12:a=u.BinaryOp.SubF64,o=u.NativeType.F64,s=r.createF64(1);break;case 13:return assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),r.createUnreachable()}break;default:return assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),r.createUnreachable()}var m=null;if(t==d.Type.void?p=r.createBinary(a,i,s):(m=n.getTempLocal(h),p=r.createBinary(a,this.module.createGetLocal(m.index,o),s)),f&&(assert(h.is(36)),p=g(p,h,r)),p=this.compileAssignmentWithValue(e.operand,p,!1),t==d.Type.void)return assert(!m),p;this.currentType=assert(m).type,n.freeTempLocal(m);var y=m.index;return r.createBlock(null,[r.createSetLocal(y,i),p,r.createGetLocal(y,o)],o)},t.prototype.compileUnaryPrefixExpression=function(e,t,r){void 0===r&&(r=!0);var n,i=this.module,a=this.currentType,o=!1,s=!1;switch(e.operator){case l.Token.PLUS:if(a.is(256))return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable();n=this.compileExpression(e.operand,t==d.Type.void?d.Type.i32:t,0,!1),o=(a=this.currentType).is(36);break;case l.Token.MINUS:if(a.is(256))return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable();if(e.operand.kind!=h.NodeKind.LITERAL||e.operand.literalKind!=h.LiteralKind.INTEGER&&e.operand.literalKind!=h.LiteralKind.FLOAT)switch(n=this.compileExpression(e.operand,t==d.Type.void?d.Type.i32:t,0,!1),(a=this.currentType).kind){case 0:case 1:case 5:case 6:case 10:o=!0;default:n=i.createBinary(u.BinaryOp.SubI32,i.createI32(0),n);break;case 9:if(a.is(256))return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable();case 4:n=i.createBinary(this.options.isWasm64?u.BinaryOp.SubI64:u.BinaryOp.SubI32,a.toNativeZero(i),n);break;case 3:case 8:n=i.createBinary(u.BinaryOp.SubI64,i.createI64(0),n);break;case 11:n=i.createUnary(u.UnaryOp.NegF32,n);break;case 12:n=i.createUnary(u.UnaryOp.NegF64,n)}else n=this.compileLiteralExpression(e.operand,t,!0),this.options.sourceMap&&y(n,e.range,i,this.currentFunction),a=this.currentType;break;case l.Token.PLUS_PLUS:if(a.is(256))return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable();switch(s=!0,n=this.compileExpression(e.operand,t==d.Type.void?d.Type.i32:t,0,!1),(a=this.currentType).kind){case 0:case 1:case 5:case 6:case 10:o=!0;default:n=i.createBinary(u.BinaryOp.AddI32,n,this.module.createI32(1));break;case 9:if(a.is(256))return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable();case 4:n=i.createBinary(this.options.isWasm64?u.BinaryOp.AddI64:u.BinaryOp.AddI32,n,a.toNativeOne(i));break;case 3:case 8:n=i.createBinary(u.BinaryOp.AddI64,n,i.createI64(1));break;case 11:n=i.createBinary(u.BinaryOp.AddF32,n,i.createF32(1));break;case 12:n=i.createBinary(u.BinaryOp.AddF64,n,i.createF64(1))}break;case l.Token.MINUS_MINUS:if(a.is(256))return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable();switch(s=!0,n=this.compileExpression(e.operand,t==d.Type.void?d.Type.i32:t,0,!1),(a=this.currentType).kind){case 0:case 1:case 5:case 6:case 10:o=!0;default:n=i.createBinary(u.BinaryOp.SubI32,n,i.createI32(1));break;case 9:if(a.is(256))return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable();case 4:n=i.createBinary(this.options.isWasm64?u.BinaryOp.SubI64:u.BinaryOp.SubI32,n,a.toNativeOne(i));break;case 3:case 8:n=i.createBinary(u.BinaryOp.SubI64,n,i.createI64(1));break;case 11:n=i.createBinary(u.BinaryOp.SubF32,n,i.createF32(1));break;case 12:n=i.createBinary(u.BinaryOp.SubF64,n,i.createF64(1))}break;case l.Token.EXCLAMATION:n=E(n=this.compileExpression(e.operand,t==d.Type.void?d.Type.i32:t,0,!0),this.currentType,i),this.currentType=d.Type.bool;break;case l.Token.TILDE:if(a.is(256))return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable();switch(n=this.compileExpression(e.operand,t==d.Type.void?d.Type.i32:t.is(8)?d.Type.i64:t,t==d.Type.void?0:1,!1),(a=this.currentType).kind){case 0:case 1:case 5:case 6:case 10:o=!0;default:n=i.createBinary(u.BinaryOp.XorI32,n,i.createI32(-1));break;case 9:if(a.is(256))return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable();case 4:n=i.createBinary(this.options.isWasm64?u.BinaryOp.XorI64:u.BinaryOp.XorI32,n,a.toNativeNegOne(i));break;case 3:case 8:n=i.createBinary(u.BinaryOp.XorI64,n,i.createI64(-1,-1))}break;case l.Token.TYPEOF:return this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable();default:return assert(!1),this.error(c.DiagnosticCode.Operation_not_supported,e.range),i.createUnreachable()}return o&&r&&(assert(a.is(36)),n=g(n,a,i)),s?this.compileAssignmentWithValue(e.operand,n,t!=d.Type.void):n},t}(c.DiagnosticEmitter);function y(e,t,r,n){var i=t.source;i.debugInfoIndex<0&&(i.debugInfoIndex=r.addDebugInfoFile(i.normalizedPath)),t.debugInfoRef=e,n.debugLocations||(n.debugLocations=[]),n.debugLocations.push(t)}function g(e,t,r){switch(t.kind){case 0:return r.createBinary(u.BinaryOp.ShrI32,r.createBinary(u.BinaryOp.ShlI32,e,r.createI32(24)),r.createI32(24));case 1:return r.createBinary(u.BinaryOp.ShrI32,r.createBinary(u.BinaryOp.ShlI32,e,r.createI32(16)),r.createI32(16));case 5:return r.createBinary(u.BinaryOp.AndI32,e,r.createI32(255));case 6:return r.createBinary(u.BinaryOp.AndI32,e,r.createI32(65535));case 10:return r.createBinary(u.BinaryOp.AndI32,e,r.createI32(1));default:return assert(!1),e}}function E(e,t,r){switch(t.kind){default:return r.createUnary(u.UnaryOp.EqzI32,e);case 3:case 8:return r.createUnary(u.UnaryOp.EqzI64,e);case 9:case 4:return r.createUnary(64==t.size?u.UnaryOp.EqzI64:u.UnaryOp.EqzI32,e);case 11:return r.createBinary(u.BinaryOp.EqF32,e,r.createF32(0));case 12:return r.createBinary(u.BinaryOp.EqF64,e,r.createF64(0));case 13:return assert(!1),r.createI32(1)}}function T(e,t,r){switch(t.kind){default:return e;case 3:case 8:return r.createBinary(u.BinaryOp.NeI64,e,r.createI64(0));case 9:case 4:return 64==t.size?r.createBinary(u.BinaryOp.NeI64,e,r.createI64(0)):e;case 11:return r.createBinary(u.BinaryOp.NeF32,e,r.createF32(0));case 12:return r.createBinary(u.BinaryOp.NeF64,e,r.createF64(0));case 13:return assert(!1),r.createI32(0)}}function v(e,t,r){var n,i,o=e.module,c=e.currentFunction,u=e.options.nativeSizeType,l=c.getTempLocal(t.type),h=new Array;if(h.push(o.createSetLocal(l.index,s.compileAllocate(e,t,r))),t.members)try{for(var d=a(t.members.values()),f=d.next();!f.done;f=d.next()){var _=f.value;if(_.kind==p.ElementKind.FIELD){var m=_,y=m.type,g=y.toNativeType(),E=m.prototype.declaration;if(assert(!m.isAny(p.CommonFlags.CONST)),E.initializer)h.push(o.createStore(y.byteSize,o.createGetLocal(l.index,u),e.compileExpression(E.initializer,y),g,m.memoryOffset));else{var T=m.prototype.declaration.parameterIndex;h.push(o.createStore(y.byteSize,o.createGetLocal(l.index,u),T>=0?o.createGetLocal(1+T,g):y.toNativeZero(o),g,m.memoryOffset))}}}}catch(e){n={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return h.push(o.createGetLocal(l.index,u)),c.freeTempLocal(l),e.currentType=t.type,o.createBlock(null,h,u)}function A(e,t,r){var n=e.module,i=e.options.nativeSizeType;return e.currentType=t.type,n.createIf(i==u.NativeType.I64?n.createBinary(u.BinaryOp.NeI64,n.createGetLocal(0,u.NativeType.I64),n.createI64(0)):n.createGetLocal(0,u.NativeType.I32),n.createGetLocal(0,i),n.createTeeLocal(0,v(e,t,r)))}t.Compiler=m,t.makeSmallIntegerWrap=g,t.makeIsFalseish=E,t.makeIsTrueish=T,t.makeAllocate=v,t.makeConditionalAllocate=A},function(e,t,r){const n=r(6).Buffer;e.exports=class{constructor(e=n.from([])){this.buffer=e}read(e){const t=this.buffer.subarray(0,e);return this.buffer=this.buffer.subarray(e),t}write(e){e=n.from(e),this.buffer=n.concat([this.buffer,e])}}},function(e,t,r){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function a(e,t,r){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{o=r(29).Buffer}catch(e){}function s(e,t,r){for(var n=0,i=Math.min(e.length,r),a=t;a<i;a++){var o=e.charCodeAt(a)-48;n<<=4,n|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return n}function c(e,t,r,n){for(var i=0,a=Math.min(e.length,r),o=t;o<a;o++){var s=e.charCodeAt(o)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===r)for(i=e.length-1,a=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===r)for(i=0,a=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,a=0;for(r=e.length-6,n=0;r>=t;r-=6)i=s(e,r,r+6),this.words[n]|=i<<a&67108863,this.words[n+1]|=i>>>26-a&4194303,(a+=24)>=26&&(a-=26,n++);r+6!==t&&(i=s(e,t,r+6),this.words[n]|=i<<a&67108863,this.words[n+1]|=i>>>26-a&4194303),this.strip()},a.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,o=a%n,s=Math.min(a,a-o)+r,u=0,p=r;p<s;p+=n)u=c(e,p,p+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var l=1;for(u=c(e,p,e.length,t),p=0;p<o;p++)l*=t;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],o=i*a,s=67108863&o,c=o/67108864|0;r.words[0]=s;for(var u=1;u<n;u++){for(var p=c>>>26,l=67108863&c,h=Math.min(u,t.length-1),d=Math.max(0,u-e.length+1);d<=h;d++){var f=u-d|0;p+=(o=(i=0|e.words[f])*(a=0|t.words[d])+l)/67108864|0,l=67108863&o}r.words[u]=0|l,c=0|p}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}a.prototype.toString=function(e,t){var r;if(e=e||10,t=0|t||1,16===e||"hex"===e){r="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],c=(16777215&(s<<i|a)).toString(16);r=0!==(a=s>>>24-i&16777215)||o!==this.length-1?u[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(r=a.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var h=p[e],d=l[e];r="";var f=this.clone();for(f.negative=0;!f.isZero();){var _=f.modn(d).toString(e);r=(f=f.idivn(d)).isZero()?_+r:u[h-_.length]+_+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return n(void 0!==o),this.toArrayLike(o,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),a=r||Math.max(1,i);n(i<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0"),this.strip();var o,s,c="le"===t,u=new e(a),p=this.clone();if(c){for(s=0;!p.isZero();s++)o=p.andln(255),p.iushrn(8),u[s]=o;for(;s<a;s++)u[s]=0}else{for(s=0;s<a-i;s++)u[s]=0;for(s=0;!p.isZero();s++)o=p.andln(255),p.iushrn(8),u[a-s-1]=o}return u},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},a.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var a=0,o=0;o<n.length;o++)a=(t=(0|r.words[o])-(0|n.words[o])+a)>>26,this.words[o]=67108863&t;for(;0!==a&&o<r.length;o++)a=(t=(0|r.words[o])+a)>>26,this.words[o]=67108863&t;if(0===a&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var d=function(e,t,r){var n,i,a,o=e.words,s=t.words,c=r.words,u=0,p=0|o[0],l=8191&p,h=p>>>13,d=0|o[1],f=8191&d,_=d>>>13,m=0|o[2],y=8191&m,g=m>>>13,E=0|o[3],T=8191&E,v=E>>>13,A=0|o[4],I=8191&A,b=A>>>13,N=0|o[5],C=8191&N,S=N>>>13,O=0|o[6],k=8191&O,L=O>>>13,x=0|o[7],R=8191&x,B=x>>>13,w=0|o[8],U=8191&w,D=w>>>13,F=0|o[9],M=8191&F,P=F>>>13,G=0|s[0],K=8191&G,z=G>>>13,H=0|s[1],V=8191&H,Y=H>>>13,W=0|s[2],X=8191&W,Q=W>>>13,q=0|s[3],j=8191&q,Z=q>>>13,J=0|s[4],$=8191&J,ee=J>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],ae=8191&ie,oe=ie>>>13,se=0|s[7],ce=8191&se,ue=se>>>13,pe=0|s[8],le=8191&pe,he=pe>>>13,de=0|s[9],fe=8191&de,_e=de>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(u+(n=Math.imul(l,K))|0)+((8191&(i=(i=Math.imul(l,z))+Math.imul(h,K)|0))<<13)|0;u=((a=Math.imul(h,z))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(f,K),i=(i=Math.imul(f,z))+Math.imul(_,K)|0,a=Math.imul(_,z);var ye=(u+(n=n+Math.imul(l,V)|0)|0)+((8191&(i=(i=i+Math.imul(l,Y)|0)+Math.imul(h,V)|0))<<13)|0;u=((a=a+Math.imul(h,Y)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,K),i=(i=Math.imul(y,z))+Math.imul(g,K)|0,a=Math.imul(g,z),n=n+Math.imul(f,V)|0,i=(i=i+Math.imul(f,Y)|0)+Math.imul(_,V)|0,a=a+Math.imul(_,Y)|0;var ge=(u+(n=n+Math.imul(l,X)|0)|0)+((8191&(i=(i=i+Math.imul(l,Q)|0)+Math.imul(h,X)|0))<<13)|0;u=((a=a+Math.imul(h,Q)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(T,K),i=(i=Math.imul(T,z))+Math.imul(v,K)|0,a=Math.imul(v,z),n=n+Math.imul(y,V)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(g,V)|0,a=a+Math.imul(g,Y)|0,n=n+Math.imul(f,X)|0,i=(i=i+Math.imul(f,Q)|0)+Math.imul(_,X)|0,a=a+Math.imul(_,Q)|0;var Ee=(u+(n=n+Math.imul(l,j)|0)|0)+((8191&(i=(i=i+Math.imul(l,Z)|0)+Math.imul(h,j)|0))<<13)|0;u=((a=a+Math.imul(h,Z)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(I,K),i=(i=Math.imul(I,z))+Math.imul(b,K)|0,a=Math.imul(b,z),n=n+Math.imul(T,V)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(v,V)|0,a=a+Math.imul(v,Y)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Q)|0)+Math.imul(g,X)|0,a=a+Math.imul(g,Q)|0,n=n+Math.imul(f,j)|0,i=(i=i+Math.imul(f,Z)|0)+Math.imul(_,j)|0,a=a+Math.imul(_,Z)|0;var Te=(u+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,ee)|0)+Math.imul(h,$)|0))<<13)|0;u=((a=a+Math.imul(h,ee)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(C,K),i=(i=Math.imul(C,z))+Math.imul(S,K)|0,a=Math.imul(S,z),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(b,V)|0,a=a+Math.imul(b,Y)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,Q)|0)+Math.imul(v,X)|0,a=a+Math.imul(v,Q)|0,n=n+Math.imul(y,j)|0,i=(i=i+Math.imul(y,Z)|0)+Math.imul(g,j)|0,a=a+Math.imul(g,Z)|0,n=n+Math.imul(f,$)|0,i=(i=i+Math.imul(f,ee)|0)+Math.imul(_,$)|0,a=a+Math.imul(_,ee)|0;var ve=(u+(n=n+Math.imul(l,re)|0)|0)+((8191&(i=(i=i+Math.imul(l,ne)|0)+Math.imul(h,re)|0))<<13)|0;u=((a=a+Math.imul(h,ne)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(k,K),i=(i=Math.imul(k,z))+Math.imul(L,K)|0,a=Math.imul(L,z),n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(S,V)|0,a=a+Math.imul(S,Y)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Q)|0)+Math.imul(b,X)|0,a=a+Math.imul(b,Q)|0,n=n+Math.imul(T,j)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(v,j)|0,a=a+Math.imul(v,Z)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(g,$)|0,a=a+Math.imul(g,ee)|0,n=n+Math.imul(f,re)|0,i=(i=i+Math.imul(f,ne)|0)+Math.imul(_,re)|0,a=a+Math.imul(_,ne)|0;var Ae=(u+(n=n+Math.imul(l,ae)|0)|0)+((8191&(i=(i=i+Math.imul(l,oe)|0)+Math.imul(h,ae)|0))<<13)|0;u=((a=a+Math.imul(h,oe)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(R,K),i=(i=Math.imul(R,z))+Math.imul(B,K)|0,a=Math.imul(B,z),n=n+Math.imul(k,V)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(L,V)|0,a=a+Math.imul(L,Y)|0,n=n+Math.imul(C,X)|0,i=(i=i+Math.imul(C,Q)|0)+Math.imul(S,X)|0,a=a+Math.imul(S,Q)|0,n=n+Math.imul(I,j)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(b,j)|0,a=a+Math.imul(b,Z)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(v,$)|0,a=a+Math.imul(v,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(g,re)|0,a=a+Math.imul(g,ne)|0,n=n+Math.imul(f,ae)|0,i=(i=i+Math.imul(f,oe)|0)+Math.imul(_,ae)|0,a=a+Math.imul(_,oe)|0;var Ie=(u+(n=n+Math.imul(l,ce)|0)|0)+((8191&(i=(i=i+Math.imul(l,ue)|0)+Math.imul(h,ce)|0))<<13)|0;u=((a=a+Math.imul(h,ue)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,K),i=(i=Math.imul(U,z))+Math.imul(D,K)|0,a=Math.imul(D,z),n=n+Math.imul(R,V)|0,i=(i=i+Math.imul(R,Y)|0)+Math.imul(B,V)|0,a=a+Math.imul(B,Y)|0,n=n+Math.imul(k,X)|0,i=(i=i+Math.imul(k,Q)|0)+Math.imul(L,X)|0,a=a+Math.imul(L,Q)|0,n=n+Math.imul(C,j)|0,i=(i=i+Math.imul(C,Z)|0)+Math.imul(S,j)|0,a=a+Math.imul(S,Z)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(v,re)|0,a=a+Math.imul(v,ne)|0,n=n+Math.imul(y,ae)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(g,ae)|0,a=a+Math.imul(g,oe)|0,n=n+Math.imul(f,ce)|0,i=(i=i+Math.imul(f,ue)|0)+Math.imul(_,ce)|0,a=a+Math.imul(_,ue)|0;var be=(u+(n=n+Math.imul(l,le)|0)|0)+((8191&(i=(i=i+Math.imul(l,he)|0)+Math.imul(h,le)|0))<<13)|0;u=((a=a+Math.imul(h,he)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(M,K),i=(i=Math.imul(M,z))+Math.imul(P,K)|0,a=Math.imul(P,z),n=n+Math.imul(U,V)|0,i=(i=i+Math.imul(U,Y)|0)+Math.imul(D,V)|0,a=a+Math.imul(D,Y)|0,n=n+Math.imul(R,X)|0,i=(i=i+Math.imul(R,Q)|0)+Math.imul(B,X)|0,a=a+Math.imul(B,Q)|0,n=n+Math.imul(k,j)|0,i=(i=i+Math.imul(k,Z)|0)+Math.imul(L,j)|0,a=a+Math.imul(L,Z)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,ee)|0)+Math.imul(S,$)|0,a=a+Math.imul(S,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(b,re)|0,a=a+Math.imul(b,ne)|0,n=n+Math.imul(T,ae)|0,i=(i=i+Math.imul(T,oe)|0)+Math.imul(v,ae)|0,a=a+Math.imul(v,oe)|0,n=n+Math.imul(y,ce)|0,i=(i=i+Math.imul(y,ue)|0)+Math.imul(g,ce)|0,a=a+Math.imul(g,ue)|0,n=n+Math.imul(f,le)|0,i=(i=i+Math.imul(f,he)|0)+Math.imul(_,le)|0,a=a+Math.imul(_,he)|0;var Ne=(u+(n=n+Math.imul(l,fe)|0)|0)+((8191&(i=(i=i+Math.imul(l,_e)|0)+Math.imul(h,fe)|0))<<13)|0;u=((a=a+Math.imul(h,_e)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(M,V),i=(i=Math.imul(M,Y))+Math.imul(P,V)|0,a=Math.imul(P,Y),n=n+Math.imul(U,X)|0,i=(i=i+Math.imul(U,Q)|0)+Math.imul(D,X)|0,a=a+Math.imul(D,Q)|0,n=n+Math.imul(R,j)|0,i=(i=i+Math.imul(R,Z)|0)+Math.imul(B,j)|0,a=a+Math.imul(B,Z)|0,n=n+Math.imul(k,$)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(L,$)|0,a=a+Math.imul(L,ee)|0,n=n+Math.imul(C,re)|0,i=(i=i+Math.imul(C,ne)|0)+Math.imul(S,re)|0,a=a+Math.imul(S,ne)|0,n=n+Math.imul(I,ae)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,oe)|0,n=n+Math.imul(T,ce)|0,i=(i=i+Math.imul(T,ue)|0)+Math.imul(v,ce)|0,a=a+Math.imul(v,ue)|0,n=n+Math.imul(y,le)|0,i=(i=i+Math.imul(y,he)|0)+Math.imul(g,le)|0,a=a+Math.imul(g,he)|0;var Ce=(u+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,_e)|0)+Math.imul(_,fe)|0))<<13)|0;u=((a=a+Math.imul(_,_e)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(M,X),i=(i=Math.imul(M,Q))+Math.imul(P,X)|0,a=Math.imul(P,Q),n=n+Math.imul(U,j)|0,i=(i=i+Math.imul(U,Z)|0)+Math.imul(D,j)|0,a=a+Math.imul(D,Z)|0,n=n+Math.imul(R,$)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(B,$)|0,a=a+Math.imul(B,ee)|0,n=n+Math.imul(k,re)|0,i=(i=i+Math.imul(k,ne)|0)+Math.imul(L,re)|0,a=a+Math.imul(L,ne)|0,n=n+Math.imul(C,ae)|0,i=(i=i+Math.imul(C,oe)|0)+Math.imul(S,ae)|0,a=a+Math.imul(S,oe)|0,n=n+Math.imul(I,ce)|0,i=(i=i+Math.imul(I,ue)|0)+Math.imul(b,ce)|0,a=a+Math.imul(b,ue)|0,n=n+Math.imul(T,le)|0,i=(i=i+Math.imul(T,he)|0)+Math.imul(v,le)|0,a=a+Math.imul(v,he)|0;var Se=(u+(n=n+Math.imul(y,fe)|0)|0)+((8191&(i=(i=i+Math.imul(y,_e)|0)+Math.imul(g,fe)|0))<<13)|0;u=((a=a+Math.imul(g,_e)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(M,j),i=(i=Math.imul(M,Z))+Math.imul(P,j)|0,a=Math.imul(P,Z),n=n+Math.imul(U,$)|0,i=(i=i+Math.imul(U,ee)|0)+Math.imul(D,$)|0,a=a+Math.imul(D,ee)|0,n=n+Math.imul(R,re)|0,i=(i=i+Math.imul(R,ne)|0)+Math.imul(B,re)|0,a=a+Math.imul(B,ne)|0,n=n+Math.imul(k,ae)|0,i=(i=i+Math.imul(k,oe)|0)+Math.imul(L,ae)|0,a=a+Math.imul(L,oe)|0,n=n+Math.imul(C,ce)|0,i=(i=i+Math.imul(C,ue)|0)+Math.imul(S,ce)|0,a=a+Math.imul(S,ue)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(b,le)|0,a=a+Math.imul(b,he)|0;var Oe=(u+(n=n+Math.imul(T,fe)|0)|0)+((8191&(i=(i=i+Math.imul(T,_e)|0)+Math.imul(v,fe)|0))<<13)|0;u=((a=a+Math.imul(v,_e)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(M,$),i=(i=Math.imul(M,ee))+Math.imul(P,$)|0,a=Math.imul(P,ee),n=n+Math.imul(U,re)|0,i=(i=i+Math.imul(U,ne)|0)+Math.imul(D,re)|0,a=a+Math.imul(D,ne)|0,n=n+Math.imul(R,ae)|0,i=(i=i+Math.imul(R,oe)|0)+Math.imul(B,ae)|0,a=a+Math.imul(B,oe)|0,n=n+Math.imul(k,ce)|0,i=(i=i+Math.imul(k,ue)|0)+Math.imul(L,ce)|0,a=a+Math.imul(L,ue)|0,n=n+Math.imul(C,le)|0,i=(i=i+Math.imul(C,he)|0)+Math.imul(S,le)|0,a=a+Math.imul(S,he)|0;var ke=(u+(n=n+Math.imul(I,fe)|0)|0)+((8191&(i=(i=i+Math.imul(I,_e)|0)+Math.imul(b,fe)|0))<<13)|0;u=((a=a+Math.imul(b,_e)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(M,re),i=(i=Math.imul(M,ne))+Math.imul(P,re)|0,a=Math.imul(P,ne),n=n+Math.imul(U,ae)|0,i=(i=i+Math.imul(U,oe)|0)+Math.imul(D,ae)|0,a=a+Math.imul(D,oe)|0,n=n+Math.imul(R,ce)|0,i=(i=i+Math.imul(R,ue)|0)+Math.imul(B,ce)|0,a=a+Math.imul(B,ue)|0,n=n+Math.imul(k,le)|0,i=(i=i+Math.imul(k,he)|0)+Math.imul(L,le)|0,a=a+Math.imul(L,he)|0;var Le=(u+(n=n+Math.imul(C,fe)|0)|0)+((8191&(i=(i=i+Math.imul(C,_e)|0)+Math.imul(S,fe)|0))<<13)|0;u=((a=a+Math.imul(S,_e)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,n=Math.imul(M,ae),i=(i=Math.imul(M,oe))+Math.imul(P,ae)|0,a=Math.imul(P,oe),n=n+Math.imul(U,ce)|0,i=(i=i+Math.imul(U,ue)|0)+Math.imul(D,ce)|0,a=a+Math.imul(D,ue)|0,n=n+Math.imul(R,le)|0,i=(i=i+Math.imul(R,he)|0)+Math.imul(B,le)|0,a=a+Math.imul(B,he)|0;var xe=(u+(n=n+Math.imul(k,fe)|0)|0)+((8191&(i=(i=i+Math.imul(k,_e)|0)+Math.imul(L,fe)|0))<<13)|0;u=((a=a+Math.imul(L,_e)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(M,ce),i=(i=Math.imul(M,ue))+Math.imul(P,ce)|0,a=Math.imul(P,ue),n=n+Math.imul(U,le)|0,i=(i=i+Math.imul(U,he)|0)+Math.imul(D,le)|0,a=a+Math.imul(D,he)|0;var Re=(u+(n=n+Math.imul(R,fe)|0)|0)+((8191&(i=(i=i+Math.imul(R,_e)|0)+Math.imul(B,fe)|0))<<13)|0;u=((a=a+Math.imul(B,_e)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(M,le),i=(i=Math.imul(M,he))+Math.imul(P,le)|0,a=Math.imul(P,he);var Be=(u+(n=n+Math.imul(U,fe)|0)|0)+((8191&(i=(i=i+Math.imul(U,_e)|0)+Math.imul(D,fe)|0))<<13)|0;u=((a=a+Math.imul(D,_e)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863;var we=(u+(n=Math.imul(M,fe))|0)+((8191&(i=(i=Math.imul(M,_e))+Math.imul(P,fe)|0))<<13)|0;return u=((a=Math.imul(P,_e))+(i>>>13)|0)+(we>>>26)|0,we&=67108863,c[0]=me,c[1]=ye,c[2]=ge,c[3]=Ee,c[4]=Te,c[5]=ve,c[6]=Ae,c[7]=Ie,c[8]=be,c[9]=Ne,c[10]=Ce,c[11]=Se,c[12]=Oe,c[13]=ke,c[14]=Le,c[15]=xe,c[16]=Re,c[17]=Be,c[18]=we,0!==u&&(c[19]=u,r.length++),r};function f(e,t,r){return(new _).mulp(e,t,r)}function _(e,t){this.x=e,this.y=t}Math.imul||(d=h),a.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?d(this,e,t):r<63?h(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var o=i;i=0;for(var s=67108863&n,c=Math.min(a,t.length-1),u=Math.max(0,a-e.length+1);u<=c;u++){var p=a-u,l=(0|e.words[p])*(0|t.words[u]),h=67108863&l;s=67108863&(h=h+s|0),i+=(o=(o=o+(l/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}r.words[a]=s,n=o,o=i}return 0!==n?r.words[a]=n:r.length--,r.strip()}(this,e,t):f(this,e,t)},_.prototype.makeRBT=function(e){for(var t=new Array(e),r=a.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},_.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},_.prototype.permute=function(e,t,r,n,i,a){for(var o=0;o<a;o++)n[o]=t[e[o]],i[o]=r[e[o]]},_.prototype.transform=function(e,t,r,n,i,a){this.permute(a,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,c=Math.cos(2*Math.PI/s),u=Math.sin(2*Math.PI/s),p=0;p<i;p+=s)for(var l=c,h=u,d=0;d<o;d++){var f=r[p+d],_=n[p+d],m=r[p+d+o],y=n[p+d+o],g=l*m-h*y;y=l*y+h*m,m=g,r[p+d]=f+m,n[p+d]=_+y,r[p+d+o]=f-m,n[p+d+o]=_-y,d!==s&&(g=c*l-u*h,h=c*h+u*l,l=g)}},_.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},_.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},_.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},_.prototype.convert13b=function(e,t,r,i){for(var a=0,o=0;o<t;o++)a+=0|e[o],r[2*o]=8191&a,a>>>=13,r[2*o+1]=8191&a,a>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===a),n(0==(-8192&a))},_.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},_.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),a=this.stub(n),o=new Array(n),s=new Array(n),c=new Array(n),u=new Array(n),p=new Array(n),l=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,u,n),this.transform(o,a,s,c,n,i),this.transform(u,a,p,l,n,i);for(var d=0;d<n;d++){var f=s[d]*p[d]-c[d]*l[d];c[d]=s[d]*l[d]+c[d]*p[d],s[d]=f}return this.conjugate(s,c,n),this.transform(s,c,h,a,n,i),this.conjugate(h,a,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),f(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[r]=67108863&a}return 0!==t&&(this.words[r]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new a(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},a.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,a=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&a,c=(0|this.words[t])-s<<r;this.words[t]=c|o,o=s>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},a.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,o=Math.min((e-a)/26,this.length),s=67108863^67108863>>>a<<a,c=r;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var p=0;for(u=this.length-1;u>=0&&(0!==p||u>=i);u--){var l=0|this.words[u];this.words[u]=p<<26-a|l>>>a,p=l&s}return c&&0!==p&&(c.words[c.length++]=p),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},a.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,r){var i,a,o=e.length+r;this._expand(o);var s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+r])+s;var c=(0|e.words[i])*t;s=((a-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&a}for(;i<this.length-r;i++)s=(a=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&a;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var s,c=n.length-i.length;if("mod"!==t){(s=new a(null)).length=c+1,s.words=new Array(s.length);for(var u=0;u<s.length;u++)s.words[u]=0}var p=n.clone()._ishlnsubmul(i,1,c);0===p.negative&&(n=p,s&&(s.words[c]=1));for(var l=c-1;l>=0;l--){var h=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(h=Math.min(h/o|0,67108863),n._ishlnsubmul(i,h,l);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);s&&(s.words[l]=h)}return s&&s.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},a.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,o,s},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},a.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new a(1),o=new a(0),s=new a(0),c=new a(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var p=r.clone(),l=t.clone();!t.isZero();){for(var h=0,d=1;0==(t.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(p),o.isub(l)),i.iushrn(1),o.iushrn(1);for(var f=0,_=1;0==(r.words[0]&_)&&f<26;++f,_<<=1);if(f>0)for(r.iushrn(f);f-- >0;)(s.isOdd()||c.isOdd())&&(s.iadd(p),c.isub(l)),s.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(s),o.isub(c)):(r.isub(t),s.isub(i),c.isub(o))}return{a:s,b:c,gcd:r.iushln(u)}},a.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new a(1),s=new a(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,p=1;0==(t.words[0]&p)&&u<26;++u,p<<=1);if(u>0)for(t.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var l=0,h=1;0==(r.words[0]&h)&&l<26;++l,h<<=1);if(l>0)for(r.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s)):(r.isub(t),s.isub(o))}return(i=0===t.cmpn(1)?o:s).cmpn(0)<0&&i.iadd(e),i},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var a=i,o=r;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new A(e)},a.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var m={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function T(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){A.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},i(g,y),g.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var a=0|e.words[n];e.words[n-10]=(4194303&a)<<4|i>>>22,i=a}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},g.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(E,y),i(T,y),i(v,y),v.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(m[e])return m[e];var t;if("k256"===e)t=new g;else if("p224"===e)t=new E;else if("p192"===e)t=new T;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new v}return m[e]=t,t},A.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},A.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},A.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},A.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},A.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},A.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},A.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},A.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},A.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},A.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},A.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},A.prototype.isqr=function(e){return this.imul(e,e.clone())},A.prototype.sqr=function(e){return this.mul(e,e)},A.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new a(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var s=new a(1).toRed(this),c=s.redNeg(),u=this.m.subn(1).iushrn(1),p=this.m.bitLength();for(p=new a(2*p*p).toRed(this);0!==this.pow(p,u).cmp(c);)p.redIAdd(c);for(var l=this.pow(p,i),h=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),f=o;0!==d.cmp(s);){for(var _=d,m=0;0!==_.cmp(s);m++)_=_.redSqr();n(m<f);var y=this.pow(l,new a(1).iushln(f-m-1));h=h.redMul(y),l=y.redSqr(),d=d.redMul(l),f=m}return h},A.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},A.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new a(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,s=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],p=c-1;p>=0;p--){var l=u>>p&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==o?(o<<=1,o|=l,(4===++s||0===n&&0===p)&&(i=this.mul(i,r[o]),s=0,o=0)):s=0}c=26}return i},A.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},A.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new I(e)},i(I,A),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},I.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===e||e,this)}).call(this,r(30)(e))},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(34),i=r(33),a=r(32);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),i=(e=s(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|d(t.length);return 0===(e=s(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function p(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(p(t),e=s(e,t<0?0:0|d(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|d(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(n)return G(e).length;t=(""+t).toLowerCase(),n=!0}}function _(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){var a,o=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var p=-1;for(a=r;a<s;a++)if(u(e,a)===u(t,-1===p?0:a-p)){if(-1===p&&(p=a),a-p+1===c)return p*o}else-1!==p&&(a-=a-p),p=-1}else for(r+c>s&&(r=s-c),a=r;a>=0;a--){for(var l=!0,h=0;h<c;h++)if(u(e,a+h)!==u(t,h)){l=!1;break}if(l)return a}return-1}function g(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function E(e,t,r,n){return z(G(t,e.length-r),e,r,n)}function T(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function v(e,t,r,n){return T(e,t,r,n)}function A(e,t,r,n){return z(K(t),e,r,n)}function I(e,t,r,n){return z(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function b(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function N(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,c,u=e[i],p=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l<=r)switch(l){case 1:u<128&&(p=u);break;case 2:128==(192&(a=e[i+1]))&&(c=(31&u)<<6|63&a)>127&&(p=c);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(c=(15&u)<<12|(63&a)<<6|63&o)>2047&&(c<55296||c>57343)&&(p=c);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(c=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(p=c)}null===p?(p=65533,l=1):p>65535&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),i+=l}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=C));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return p(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return l(null,e)},c.allocUnsafeSlow=function(e){return l(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?N(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,r);case"utf8":case"utf-8":return N(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return b(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,o=r-t,s=Math.min(a,o),u=this.slice(n,i),p=e.slice(t,r),l=0;l<s;++l)if(u[l]!==p[l]){a=u[l],o=p[l];break}return a<o?-1:o<a?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":return T(this,e,t,r);case"latin1":case"binary":return v(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function S(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function k(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=P(e[a]);return i}function L(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function x(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,i,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function B(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function w(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function U(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,a){return a||U(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,a){return a||U(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;r=new c(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUInt8=function(e,t){return t||x(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||x(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||x(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||x(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||x(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||x(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||x(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||x(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||x(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):w(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):w(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=c.isBuffer(e)?e:G(new c(e,n).toString()),s=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function P(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function K(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(5))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Operation_not_supported=100]="Operation_not_supported",e[e.Operation_is_unsafe=101]="Operation_is_unsafe",e[e.Conversion_from_type_0_to_1_requires_an_explicit_cast=200]="Conversion_from_type_0_to_1_requires_an_explicit_cast",e[e.Conversion_from_type_0_to_1_will_require_an_explicit_cast_when_switching_between_32_64_bit=201]="Conversion_from_type_0_to_1_will_require_an_explicit_cast_when_switching_between_32_64_bit",e[e.Type_0_cannot_be_changed_to_type_1=202]="Type_0_cannot_be_changed_to_type_1",e[e.Type_0_cannot_be_reinterpreted_as_type_1=203]="Type_0_cannot_be_reinterpreted_as_type_1",e[e.Basic_type_0_cannot_be_nullable=204]="Basic_type_0_cannot_be_nullable",e[e.Cannot_export_a_mutable_global=205]="Cannot_export_a_mutable_global",e[e.Compiling_constant_with_non_constant_initializer_as_mutable=206]="Compiling_constant_with_non_constant_initializer_as_mutable",e[e.Structs_cannot_extend_classes_and_vice_versa=207]="Structs_cannot_extend_classes_and_vice_versa",e[e.Structs_cannot_implement_interfaces=208]="Structs_cannot_implement_interfaces",e[e.Invalid_regular_expression_flags=209]="Invalid_regular_expression_flags",e[e.Implementation_0_must_match_the_signature_1=210]="Implementation_0_must_match_the_signature_1",e[e.Class_0_is_sealed_and_cannot_be_extended=211]="Class_0_is_sealed_and_cannot_be_extended",e[e.Unterminated_string_literal=1002]="Unterminated_string_literal",e[e.Identifier_expected=1003]="Identifier_expected",e[e._0_expected=1005]="_0_expected",e[e.A_file_cannot_have_a_reference_to_itself=1006]="A_file_cannot_have_a_reference_to_itself",e[e.Trailing_comma_not_allowed=1009]="Trailing_comma_not_allowed",e[e.Unexpected_token=1012]="Unexpected_token",e[e.A_rest_parameter_must_be_last_in_a_parameter_list=1014]="A_rest_parameter_must_be_last_in_a_parameter_list",e[e.Parameter_cannot_have_question_mark_and_initializer=1015]="Parameter_cannot_have_question_mark_and_initializer",e[e.A_required_parameter_cannot_follow_an_optional_parameter=1016]="A_required_parameter_cannot_follow_an_optional_parameter",e[e.Enum_member_must_have_initializer=1061]="Enum_member_must_have_initializer",e[e.Statements_are_not_allowed_in_ambient_contexts=1036]="Statements_are_not_allowed_in_ambient_contexts",e[e.Initializers_are_not_allowed_in_ambient_contexts=1039]="Initializers_are_not_allowed_in_ambient_contexts",e[e._0_modifier_cannot_be_used_here=1042]="_0_modifier_cannot_be_used_here",e[e.A_rest_parameter_cannot_be_optional=1047]="A_rest_parameter_cannot_be_optional",e[e.A_rest_parameter_cannot_have_an_initializer=1048]="A_rest_parameter_cannot_have_an_initializer",e[e.A_set_accessor_must_have_exactly_one_parameter=1049]="A_set_accessor_must_have_exactly_one_parameter",e[e.A_set_accessor_parameter_cannot_have_an_initializer=1052]="A_set_accessor_parameter_cannot_have_an_initializer",e[e.A_get_accessor_cannot_have_parameters=1054]="A_get_accessor_cannot_have_parameters",e[e.Type_parameters_cannot_appear_on_a_constructor_declaration=1092]="Type_parameters_cannot_appear_on_a_constructor_declaration",e[e.Type_annotation_cannot_appear_on_a_constructor_declaration=1093]="Type_annotation_cannot_appear_on_a_constructor_declaration",e[e.An_accessor_cannot_have_type_parameters=1094]="An_accessor_cannot_have_type_parameters",e[e.A_set_accessor_cannot_have_a_return_type_annotation=1095]="A_set_accessor_cannot_have_a_return_type_annotation",e[e.Type_parameter_list_cannot_be_empty=1098]="Type_parameter_list_cannot_be_empty",e[e.A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement=1104]="A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement",e[e.A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement=1105]="A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement",e[e.A_return_statement_can_only_be_used_within_a_function_body=1108]="A_return_statement_can_only_be_used_within_a_function_body",e[e.Expression_expected=1109]="Expression_expected",e[e.Type_expected=1110]="Type_expected",e[e.A_default_clause_cannot_appear_more_than_once_in_a_switch_statement=1113]="A_default_clause_cannot_appear_more_than_once_in_a_switch_statement",e[e.Duplicate_label_0=1114]="Duplicate_label_0",e[e.Octal_literals_are_not_allowed_in_strict_mode=1121]="Octal_literals_are_not_allowed_in_strict_mode",e[e.Digit_expected=1124]="Digit_expected",e[e.Hexadecimal_digit_expected=1125]="Hexadecimal_digit_expected",e[e.Unexpected_end_of_text=1126]="Unexpected_end_of_text",e[e.Invalid_character=1127]="Invalid_character",e[e._case_or_default_expected=1130]="_case_or_default_expected",e[e.A_declare_modifier_cannot_be_used_in_an_already_ambient_context=1038]="A_declare_modifier_cannot_be_used_in_an_already_ambient_context",e[e.Type_argument_expected=1140]="Type_argument_expected",e[e.String_literal_expected=1141]="String_literal_expected",e[e.Line_break_not_permitted_here=1142]="Line_break_not_permitted_here",e[e.Declaration_expected=1146]="Declaration_expected",e[e._const_declarations_must_be_initialized=1155]="_const_declarations_must_be_initialized",e[e.Unterminated_regular_expression_literal=1161]="Unterminated_regular_expression_literal",e[e.Interface_declaration_cannot_have_implements_clause=1176]="Interface_declaration_cannot_have_implements_clause",e[e.Binary_digit_expected=1177]="Binary_digit_expected",e[e.Octal_digit_expected=1178]="Octal_digit_expected",e[e.An_implementation_cannot_be_declared_in_ambient_contexts=1183]="An_implementation_cannot_be_declared_in_ambient_contexts",e[e.An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive=1198]="An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive",e[e.Unterminated_Unicode_escape_sequence=1199]="Unterminated_Unicode_escape_sequence",e[e.Decorators_are_not_valid_here=1206]="Decorators_are_not_valid_here",e[e._abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration=1242]="_abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration",e[e.A_class_may_only_extend_another_class=1311]="A_class_may_only_extend_another_class",e[e.A_parameter_property_cannot_be_declared_using_a_rest_parameter=1317]="A_parameter_property_cannot_be_declared_using_a_rest_parameter",e[e.Duplicate_identifier_0=2300]="Duplicate_identifier_0",e[e.Cannot_find_name_0=2304]="Cannot_find_name_0",e[e.Module_0_has_no_exported_member_1=2305]="Module_0_has_no_exported_member_1",e[e.Generic_type_0_requires_1_type_argument_s=2314]="Generic_type_0_requires_1_type_argument_s",e[e.Type_0_is_not_generic=2315]="Type_0_is_not_generic",e[e.Type_0_is_not_assignable_to_type_1=2322]="Type_0_is_not_assignable_to_type_1",e[e.Index_signature_is_missing_in_type_0=2329]="Index_signature_is_missing_in_type_0",e[e._this_cannot_be_referenced_in_current_location=2332]="_this_cannot_be_referenced_in_current_location",e[e._super_can_only_be_referenced_in_a_derived_class=2335]="_super_can_only_be_referenced_in_a_derived_class",e[e.Property_0_does_not_exist_on_type_1=2339]="Property_0_does_not_exist_on_type_1",e[e.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures=2349]="Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures",e[e.Cannot_use_new_with_an_expression_whose_type_lacks_a_construct_signature=2351]="Cannot_use_new_with_an_expression_whose_type_lacks_a_construct_signature",e[e.A_function_whose_declared_type_is_not_void_must_return_a_value=2355]="A_function_whose_declared_type_is_not_void_must_return_a_value",e[e.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access=2357]="The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access",e[e.The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access=2364]="The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access",e[e.Operator_0_cannot_be_applied_to_types_1_and_2=2365]="Operator_0_cannot_be_applied_to_types_1_and_2",e[e._get_and_set_accessor_must_have_the_same_type=2380]="_get_and_set_accessor_must_have_the_same_type",e[e.Constructor_implementation_is_missing=2390]="Constructor_implementation_is_missing",e[e.Function_implementation_is_missing_or_not_immediately_following_the_declaration=2391]="Function_implementation_is_missing_or_not_immediately_following_the_declaration",e[e.Multiple_constructor_implementations_are_not_allowed=2392]="Multiple_constructor_implementations_are_not_allowed",e[e.Duplicate_function_implementation=2393]="Duplicate_function_implementation",e[e.Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local=2395]="Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local",e[e.Type_0_has_no_property_1=2460]="Type_0_has_no_property_1",e[e.The_0_operator_cannot_be_applied_to_type_1=2469]="The_0_operator_cannot_be_applied_to_type_1",e[e.Export_declaration_conflicts_with_exported_declaration_of_0=2484]="Export_declaration_conflicts_with_exported_declaration_of_0",e[e.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property=2540]="Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property",e[e.The_target_of_an_assignment_must_be_a_variable_or_a_property_access=2541]="The_target_of_an_assignment_must_be_a_variable_or_a_property_access",e[e.Index_signature_in_type_0_only_permits_reading=2542]="Index_signature_in_type_0_only_permits_reading",e[e.Expected_0_arguments_but_got_1=2554]="Expected_0_arguments_but_got_1",e[e.Expected_at_least_0_arguments_but_got_1=2555]="Expected_at_least_0_arguments_but_got_1",e[e.Expected_0_type_arguments_but_got_1=2558]="Expected_0_type_arguments_but_got_1",e[e.A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums=2651]="A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums",e[e.Namespace_0_has_no_exported_member_1=2694]="Namespace_0_has_no_exported_member_1",e[e.File_0_not_found=6054]="File_0_not_found"}(t.DiagnosticCode||(t.DiagnosticCode={})),t.diagnosticCodeToString=function(e){switch(e){case 100:return"Operation not supported.";case 101:return"Operation is unsafe.";case 200:return"Conversion from type '{0}' to '{1}' requires an explicit cast.";case 201:return"Conversion from type '{0}' to '{1}' will require an explicit cast when switching between 32/64-bit.";case 202:return"Type '{0}' cannot be changed to type '{1}'.";case 203:return"Type '{0}' cannot be reinterpreted as type '{1}'.";case 204:return"Basic type '{0}' cannot be nullable.";case 205:return"Cannot export a mutable global.";case 206:return"Compiling constant with non-constant initializer as mutable.";case 207:return"Structs cannot extend classes and vice-versa.";case 208:return"Structs cannot implement interfaces.";case 209:return"Invalid regular expression flags.";case 210:return"Implementation '{0}' must match the signature '{1}'.";case 211:return"Class '{0}' is sealed and cannot be extended.";case 1002:return"Unterminated string literal.";case 1003:return"Identifier expected.";case 1005:return"'{0}' expected.";case 1006:return"A file cannot have a reference to itself.";case 1009:return"Trailing comma not allowed.";case 1012:return"Unexpected token.";case 1014:return"A rest parameter must be last in a parameter list.";case 1015:return"Parameter cannot have question mark and initializer.";case 1016:return"A required parameter cannot follow an optional parameter.";case 1061:return"Enum member must have initializer.";case 1036:return"Statements are not allowed in ambient contexts.";case 1039:return"Initializers are not allowed in ambient contexts.";case 1042:return"'{0}' modifier cannot be used here.";case 1047:return"A rest parameter cannot be optional.";case 1048:return"A rest parameter cannot have an initializer.";case 1049:return"A 'set' accessor must have exactly one parameter.";case 1052:return"A 'set' accessor parameter cannot have an initializer.";case 1054:return"A 'get' accessor cannot have parameters.";case 1092:return"Type parameters cannot appear on a constructor declaration.";case 1093:return"Type annotation cannot appear on a constructor declaration.";case 1094:return"An accessor cannot have type parameters.";case 1095:return"A 'set' accessor cannot have a return type annotation.";case 1098:return"Type parameter list cannot be empty.";case 1104:return"A 'continue' statement can only be used within an enclosing iteration statement.";case 1105:return"A 'break' statement can only be used within an enclosing iteration or switch statement.";case 1108:return"A 'return' statement can only be used within a function body.";case 1109:return"Expression expected.";case 1110:return"Type expected.";case 1113:return"A 'default' clause cannot appear more than once in a 'switch' statement.";case 1114:return"Duplicate label '{0}'.";case 1121:return"Octal literals are not allowed in strict mode.";case 1124:return"Digit expected.";case 1125:return"Hexadecimal digit expected.";case 1126:return"Unexpected end of text.";case 1127:return"Invalid character.";case 1130:return"'case' or 'default' expected.";case 1038:return"A 'declare' modifier cannot be used in an already ambient context.";case 1140:return"Type argument expected.";case 1141:return"String literal expected.";case 1142:return"Line break not permitted here.";case 1146:return"Declaration expected.";case 1155:return"'const' declarations must be initialized.";case 1161:return"Unterminated regular expression literal.";case 1176:return"Interface declaration cannot have 'implements' clause.";case 1177:return"Binary digit expected.";case 1178:return"Octal digit expected.";case 1183:return"An implementation cannot be declared in ambient contexts.";case 1198:return"An extended Unicode escape value must be between 0x0 and 0x10FFFF inclusive.";case 1199:return"Unterminated Unicode escape sequence.";case 1206:return"Decorators are not valid here.";case 1242:return"'abstract' modifier can only appear on a class, method, or property declaration.";case 1311:return"A class may only extend another class.";case 1317:return"A parameter property cannot be declared using a rest parameter.";case 2300:return"Duplicate identifier '{0}'.";case 2304:return"Cannot find name '{0}'.";case 2305:return"Module '{0}' has no exported member '{1}'.";case 2314:return"Generic type '{0}' requires {1} type argument(s).";case 2315:return"Type '{0}' is not generic.";case 2322:return"Type '{0}' is not assignable to type '{1}'.";case 2329:return"Index signature is missing in type '{0}'.";case 2332:return"'this' cannot be referenced in current location.";case 2335:return"'super' can only be referenced in a derived class.";case 2339:return"Property '{0}' does not exist on type '{1}'.";case 2349:return"Cannot invoke an expression whose type lacks a call signature. Type '{0}' has no compatible call signatures.";case 2351:return"Cannot use 'new' with an expression whose type lacks a construct signature.";case 2355:return"A function whose declared type is not 'void' must return a value.";case 2357:return"The operand of an increment or decrement operator must be a variable or a property access.";case 2364:return"The left-hand side of an assignment expression must be a variable or a property access.";case 2365:return"Operator '{0}' cannot be applied to types '{1}' and '{2}'.";case 2380:return"'get' and 'set' accessor must have the same type.";case 2390:return"Constructor implementation is missing.";case 2391:return"Function implementation is missing or not immediately following the declaration.";case 2392:return"Multiple constructor implementations are not allowed.";case 2393:return"Duplicate function implementation.";case 2395:return"Individual declarations in merged declaration '{0}' must be all exported or all local.";case 2460:return"Type '{0}' has no property '{1}'.";case 2469:return"The '{0}' operator cannot be applied to type '{1}'.";case 2484:return"Export declaration conflicts with exported declaration of '{0}'.";case 2540:return"Cannot assign to '{0}' because it is a constant or a read-only property.";case 2541:return"The target of an assignment must be a variable or a property access.";case 2542:return"Index signature in type '{0}' only permits reading.";case 2554:return"Expected {0} arguments, but got {1}.";case 2555:return"Expected at least {0} arguments, but got {1}.";case 2558:return"Expected {0} type arguments, but got {1}.";case 2651:return"A member initializer in a enum declaration cannot reference members declared after it, including members defined in other enums.";case 2694:return"Namespace '{0}' has no exported member '{1}'.";case 6054:return"File '{0}' not found.";default:return""}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=r(10),s=r(2),c=r(1),u=r(4),p=a.LIBRARY_PREFIX+"builtins.ts",l=function(e){function t(){var t=e.call(this)||this;return t.backlog=new Array,t.seenlog=new Set,t.onComment=null,t.tryParseSignatureIsSignature=!1,t.program=new a.Program(t.diagnostics),t}return i(t,e),t.prototype.parseFile=function(e,t,r){for(var n=this.program,i=c.normalizePath(t),s=u.mangleInternalPath(i),l=n.sources,h=0,d=l.length;h<d;++h)if(l[h].internalPath==s)return;this.seenlog.add(s);var f=new u.Source(i,e,r?u.SourceKind.ENTRY:t.startsWith(a.LIBRARY_PREFIX)&&t.indexOf(a.PATH_DELIMITER,a.LIBRARY_PREFIX.length)<0?u.SourceKind.LIBRARY:u.SourceKind.DEFAULT);l.push(f),f.normalizedPath==p&&f.set(a.CommonFlags.BUILTIN);var _=new o.Tokenizer(f,n.diagnostics);_.onComment=this.onComment,f.tokenizer=_;for(var m=f.statements;!_.skip(o.Token.ENDOFFILE);){var y=this.parseTopLevelStatement(_);y&&(y.parent=f,m.push(y))}_.finish()},t.prototype.parseTopLevelStatement=function(e,t){void 0===t&&(t=null);for(var r=a.CommonFlags.NONE,n=-1,i=null;e.skip(o.Token.AT);){n<0&&(n=e.tokenPos);var c=this.parseDecorator(e);if(!c)break;var p=c.name;if(p.kind==u.NodeKind.IDENTIFIER){var l=p.text;if("global"==l){r|=a.CommonFlags.GLOBAL;continue}if("unmananged"==l){r|=a.CommonFlags.UNMANAGED;continue}if("sealed"==l){r|=a.CommonFlags.SEALED;continue}}i||(i=[]),i.push(c)}r|=e.source.flags&a.CommonFlags.BUILTIN;var h=0,d=0;e.skip(o.Token.EXPORT)&&(n<0&&(n=e.tokenPos),r|=a.CommonFlags.EXPORT,h=e.tokenPos,d=e.pos);var f=null!=t&&t.is(a.CommonFlags.AMBIENT);e.skip(o.Token.DECLARE)?(n<0&&(n=e.tokenPos),f&&this.error(s.DiagnosticCode.A_declare_modifier_cannot_be_used_in_an_already_ambient_context,e.range()),r|=a.CommonFlags.DECLARE|a.CommonFlags.AMBIENT):f&&(r|=a.CommonFlags.AMBIENT);var _=null,m=e.peek();switch(n<0&&(n=e.nextTokenPos),m){case o.Token.CONST:if(e.next(),r|=a.CommonFlags.CONST,e.skip(o.Token.ENUM)){_=this.parseEnum(e,r,i,n);break}_=this.parseVariable(e,r,i,n),i=null;break;case o.Token.LET:r|=a.CommonFlags.LET;case o.Token.VAR:e.next(),_=this.parseVariable(e,r,i,n),i=null;break;case o.Token.ENUM:e.next(),_=this.parseEnum(e,r,i,n),i=null;break;case o.Token.FUNCTION:e.next(),_=this.parseFunction(e,r,i,n),i=null;break;case o.Token.ABSTRACT:if(e.next(),r|=a.CommonFlags.ABSTRACT,!e.skip(o.Token.CLASS)){this.error(s.DiagnosticCode._0_expected,e.range(e.pos),"class");break}case o.Token.CLASS:case o.Token.INTERFACE:e.next(),_=this.parseClassOrInterface(e,r,i,n),i=null;break;case o.Token.NAMESPACE:e.next(),_=this.parseNamespace(e,r,i,n),i=null;break;case o.Token.IMPORT:e.next(),_=(r|=a.CommonFlags.IMPORT)&a.CommonFlags.EXPORT?this.parseExportImport(e,n):this.parseImport(e);break;case o.Token.TYPE:e.next(),_=this.parseTypeDeclaration(e,r,i,n),i=null;break;default:r&a.CommonFlags.EXPORT?_=this.parseExport(e,r,n):(d&&this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(h,d),"export"),t||(_=this.parseStatement(e,!0)))}if(i)for(var y=0,g=i.length;y<g;++y)this.error(s.DiagnosticCode.Decorators_are_not_valid_here,i[y].range);return _},t.prototype.nextFile=function(){var e=this.backlog;return e.length?e.shift():null},t.prototype.finish=function(){if(this.backlog.length)throw new Error("backlog is not empty");return this.backlog=[],this.seenlog.clear(),this.program},t.prototype.parseType=function(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=!1);var n,i=e.next(),a=e.tokenPos;if(i==o.Token.VOID)return u.Node.createType(u.Node.createIdentifierExpression("void",e.range()),[],!1,e.range(a,e.pos));if(i==o.Token.OPENPAREN){var c=e.skip(o.Token.OPENPAREN),p=this.tryParseSignature(e);if(p){if(c){if(!e.skip(o.Token.CLOSEPAREN))return this.error(s.DiagnosticCode._0_expected,e.range(),")"),null;if(!e.skip(o.Token.BAR))return this.error(s.DiagnosticCode._0_expected,e.range(),"|"),null;e.skip(o.Token.NULL)||this.error(s.DiagnosticCode._0_expected,e.range(),"null"),p.isNullable=!0}return p}if(c||this.tryParseSignatureIsSignature)return this.error(s.DiagnosticCode.Unexpected_token,e.range()),null;if(!t)return this.error(s.DiagnosticCode.Unexpected_token,e.range()),null;var l=this.parseType(e,!1,r);if(!l)return null;if(!e.skip(o.Token.CLOSEPAREN))return r||this.error(s.DiagnosticCode._0_expected,e.range(e.pos),"}"),null;(n=l).range.start=a,n.range.end=e.pos}else if(i==o.Token.THIS)n=u.Node.createType(u.Node.createThisExpression(e.range()),[],!1,e.range(a,e.pos));else if(i==o.Token.TRUE||i==o.Token.FALSE)n=u.Node.createType(u.Node.createIdentifierExpression("bool",e.range()),[],!1,e.range(a,e.pos));else if(i==o.Token.STRINGLITERAL)e.readString(),n=u.Node.createType(u.Node.createIdentifierExpression("string",e.range()),[],!1,e.range(a,e.pos));else{if(i!=o.Token.IDENTIFIER)return r||this.error(s.DiagnosticCode.Identifier_expected,e.range()),null;var h=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),d=new Array,f=!1;if(e.skip(o.Token.LESSTHAN)){do{var _=this.parseType(e,!0,r);if(!_)return null;d.push(_)}while(e.skip(o.Token.COMMA));if(!e.skip(o.Token.GREATERTHAN))return r||this.error(s.DiagnosticCode._0_expected,e.range(e.pos),">"),null}if(e.skip(o.Token.BAR)){if(!e.skip(o.Token.NULL))return r||this.error(s.DiagnosticCode._0_expected,e.range(e.pos),"null"),null;f=!0}n=u.Node.createType(h,d,f,e.range(a,e.pos))}for(;e.skip(o.Token.OPENBRACKET);){var m=e.tokenPos;if(!e.skip(o.Token.CLOSEBRACKET))return r||this.error(s.DiagnosticCode._0_expected,e.range(),"]"),null;var y=e.range(m,e.pos);f=!1;if(e.skip(o.Token.BAR)){if(!e.skip(o.Token.NULL))return r||this.error(s.DiagnosticCode._0_expected,e.range(),"null"),null;f=!0}if(n=u.Node.createType(u.Node.createIdentifierExpression("Array",y),[n],f,e.range(a,e.pos)),f)break}return n},t.prototype.tryParseSignature=function(e){var t,r=e.mark(),n=e.tokenPos,i=null,a=null,c=!1;if(e.skip(o.Token.CLOSEPAREN))c=!0,e.discard(r),i=[];else{c=!1;do{var p=u.ParameterKind.DEFAULT;if(e.skip(o.Token.DOT_DOT_DOT)&&(c=!0,e.discard(r),p=u.ParameterKind.REST),e.skip(o.Token.THIS)){if(!e.skip(o.Token.COLON))return e.reset(r),this.tryParseSignatureIsSignature=!1,null;c=!0,e.discard(r);var l=this.parseType(e,!1);if(!l)return null;if(l.kind!=u.NodeKind.TYPE)return this.error(s.DiagnosticCode.Operation_not_supported,l.range),this.tryParseSignatureIsSignature=!0,null;a=l}else{if(!e.skip(o.Token.IDENTIFIER))return c?this.error(s.DiagnosticCode.Identifier_expected,e.range()):e.reset(r),this.tryParseSignatureIsSignature=c,null;var h=u.Node.createIdentifierExpression(e.readIdentifier(),e.range(e.tokenPos,e.pos));if(e.skip(o.Token.QUESTION)&&(c=!0,e.discard(r),p==u.ParameterKind.REST?this.error(s.DiagnosticCode.A_rest_parameter_cannot_be_optional,e.range()):p=u.ParameterKind.OPTIONAL),e.skip(o.Token.COLON)){c=!0,e.discard(r);var d=this.parseType(e);if(!d)return this.tryParseSignatureIsSignature=c,null;var f=new u.ParameterNode;f.parameterKind=p,f.name=h,f.type=d,i?i.push(f):i=[f]}else c&&this.error(s.DiagnosticCode.Type_expected,e.range())}}while(e.skip(o.Token.COMMA));if(!e.skip(o.Token.CLOSEPAREN))return this.error(s.DiagnosticCode._0_expected,e.range(),")"),this.tryParseSignatureIsSignature=c,null}return e.skip(o.Token.EQUALS_GREATERTHAN)?(c=!0,e.discard(r),(t=this.parseType(e))?(this.tryParseSignatureIsSignature=!0,u.Node.createSignature(i||[],t,a,!1,e.range(n,e.pos))):(this.tryParseSignatureIsSignature=c,null)):(c?this.error(s.DiagnosticCode._0_expected,e.range(),"=>"):e.reset(r),this.tryParseSignatureIsSignature=c,null)},t.prototype.parseDecorator=function(e){var t=e.tokenPos;if(e.skip(o.Token.IDENTIFIER)){for(var r=e.readIdentifier(),n=u.Node.createIdentifierExpression(r,e.range(t,e.pos));e.skip(o.Token.DOT);){if(!e.skip(o.Token.IDENTIFIER))return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null;r=e.readIdentifier(),n=u.Node.createPropertyAccessExpression(n,u.Node.createIdentifierExpression(r,e.range()),e.range(t,e.pos))}var i=void 0;if(!e.skip(o.Token.OPENPAREN))return u.Node.createDecorator(n,null,e.range(t,e.pos));if(i=this.parseArguments(e))return u.Node.createDecorator(n,i,e.range(t,e.pos))}else this.error(s.DiagnosticCode.Identifier_expected,e.range());return null},t.prototype.parseVariable=function(e,t,r,n){var i=new Array;do{var a=this.parseVariableDeclaration(e,t,r);if(!a)return null;i.push(a)}while(e.skip(o.Token.COMMA));var s=u.Node.createVariableStatement(i,r,t,e.range(n,e.pos));return e.skip(o.Token.SEMICOLON),s},t.prototype.parseVariableDeclaration=function(e,t,r){if(!e.skip(o.Token.IDENTIFIER))return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null;var n=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),i=t,c=null;e.skip(o.Token.COLON)&&(c=this.parseType(e));var p=null;if(e.skip(o.Token.EQUALS)){if(i&a.CommonFlags.AMBIENT&&this.error(s.DiagnosticCode.Initializers_are_not_allowed_in_ambient_contexts,e.range()),!(p=this.parseExpression(e,1)))return null}else i&a.CommonFlags.CONST?i&a.CommonFlags.AMBIENT||this.error(s.DiagnosticCode._const_declarations_must_be_initialized,n.range):c||this.error(s.DiagnosticCode.Type_expected,e.range(e.pos));return u.Node.createVariableDeclaration(n,c,p,r,i,o.Range.join(n.range,e.range()))},t.prototype.parseEnum=function(e,t,r,n){if(e.next()!=o.Token.IDENTIFIER)return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null;var i=u.Node.createIdentifierExpression(e.readIdentifier(),e.range());if(e.next()!=o.Token.OPENBRACE)return this.error(s.DiagnosticCode._0_expected,e.range(),"{"),null;var c=new Array;if(!e.skip(o.Token.CLOSEBRACE)){do{var p=this.parseEnumValue(e,a.CommonFlags.NONE);if(!p)return null;c.push(p)}while(e.skip(o.Token.COMMA));if(!e.skip(o.Token.CLOSEBRACE))return this.error(s.DiagnosticCode._0_expected,e.range(),"}"),null}var l=u.Node.createEnumDeclaration(i,c,r,t,e.range(n,e.pos));return e.skip(o.Token.SEMICOLON),l},t.prototype.parseEnumValue=function(e,t){if(!e.skip(o.Token.IDENTIFIER))return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null;var r=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),n=null;return e.skip(o.Token.EQUALS)&&!(n=this.parseExpression(e,1))?null:u.Node.createEnumValueDeclaration(r,n,t,o.Range.join(r.range,e.range()))},t.prototype.parseReturn=function(e){var t=null;if(e.peek(!0)!=o.Token.SEMICOLON&&e.nextToken!=o.Token.CLOSEBRACE&&!e.nextTokenOnNewLine&&!(t=this.parseExpression(e)))return null;var r=u.Node.createReturnStatement(t,e.range());return e.skip(o.Token.SEMICOLON),r},t.prototype.parseTypeParameters=function(e){var t=new Array;if(e.skip(o.Token.GREATERTHAN))this.error(s.DiagnosticCode.Type_parameter_list_cannot_be_empty,e.range());else{do{var r=this.parseTypeParameter(e);if(!r)return null;t.push(r)}while(e.skip(o.Token.COMMA));if(!e.skip(o.Token.GREATERTHAN))return this.error(s.DiagnosticCode._0_expected,e.range(),">"),null}return t},t.prototype.parseTypeParameter=function(e){if(e.next()==o.Token.IDENTIFIER){var t=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),r=null;if(e.skip(o.Token.EXTENDS)){var n=this.parseType(e);if(!n)return null;if(n.kind!=u.NodeKind.TYPE)return this.error(s.DiagnosticCode.Operation_not_supported,n.range),null;r=n}return u.Node.createTypeParameter(t,r,o.Range.join(t.range,e.range()))}return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null},t.prototype.parseParameters=function(e,t){void 0===t&&(t=!1);var r=new Array,n=null,i=!1,a=!1;if(e.peek()!=o.Token.CLOSEPAREN)do{var c=this.parseParameter(e,t);if(!c)return null;switch(n&&!a&&(this.error(s.DiagnosticCode.A_rest_parameter_must_be_last_in_a_parameter_list,n.name.range),a=!0),c.parameterKind){default:i&&this.error(s.DiagnosticCode.A_required_parameter_cannot_follow_an_optional_parameter,c.name.range);break;case u.ParameterKind.OPTIONAL:i=!0;break;case u.ParameterKind.REST:n=c}r.push(c)}while(e.skip(o.Token.COMMA));return e.skip(o.Token.CLOSEPAREN)?r:(this.error(s.DiagnosticCode._0_expected,e.range(),")"),null)},t.prototype.parseParameter=function(e,t){void 0===t&&(t=!1);var r=!1,n=!1,i=null,c=a.CommonFlags.NONE;if(e.skip(o.Token.PUBLIC)?(i=e.range(),t||this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,i,"public"),c|=a.CommonFlags.PUBLIC):e.skip(o.Token.PROTECTED)?(i=e.range(),t||this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,i,"protected"),c|=a.CommonFlags.PROTECTED):e.skip(o.Token.PRIVATE)&&(i=e.range(),t||this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,i,"private"),c|=a.CommonFlags.PRIVATE),e.skip(o.Token.READONLY)&&(i||(i=e.range()),t||this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,i,"readonly"),c|=a.CommonFlags.READONLY),e.skip(o.Token.DOT_DOT_DOT)&&(c?this.error(s.DiagnosticCode.A_parameter_property_cannot_be_declared_using_a_rest_parameter,e.range()):i=e.range(),r=!0),e.skip(o.Token.IDENTIFIER)){r||(i=e.range());var p=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),l=null;if((n=e.skip(o.Token.QUESTION))&&r&&this.error(s.DiagnosticCode.A_rest_parameter_cannot_be_optional,p.range),e.skip(o.Token.COLON)){if(!(l=this.parseType(e)))return null}else l=u.Node.createOmittedType(e.range(e.pos));var h=null;if(e.skip(o.Token.EQUALS)&&(r&&this.error(s.DiagnosticCode.A_rest_parameter_cannot_have_an_initializer,p.range),n?this.error(s.DiagnosticCode.Parameter_cannot_have_question_mark_and_initializer,p.range):n=!0,!(h=this.parseExpression(e,1))))return null;var d=u.Node.createParameter(p,l,h,r?u.ParameterKind.REST:n?u.ParameterKind.OPTIONAL:u.ParameterKind.DEFAULT,o.Range.join(i,e.range()));return d.flags|=c,d}return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null},t.prototype.parseFunction=function(e,t,r,n){if(!e.skip(o.Token.IDENTIFIER))return this.error(s.DiagnosticCode.Identifier_expected,e.range(e.pos)),null;var i=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),c=-1,p=null;if(e.skip(o.Token.LESSTHAN)){if(c=e.tokenPos,!(p=this.parseTypeParameters(e)))return null;t|=a.CommonFlags.GENERIC}if(!e.skip(o.Token.OPENPAREN))return this.error(s.DiagnosticCode._0_expected,e.range(e.pos),"("),null;c<0&&(c=e.tokenPos);var l=this.parseParameters(e);if(!l)return null;var h=0!=(t&a.CommonFlags.SET);h&&(1!=l.length&&this.error(s.DiagnosticCode.A_set_accessor_must_have_exactly_one_parameter,i.range),l.length&&l[0].initializer&&this.error(s.DiagnosticCode.A_set_accessor_parameter_cannot_have_an_initializer,i.range)),t&a.CommonFlags.GET&&l.length&&this.error(s.DiagnosticCode.A_get_accessor_cannot_have_parameters,i.range);var d=null;if(e.skip(o.Token.COLON)&&!(d=this.parseType(e,!0,h)))return null;d||(d=u.Node.createOmittedType(e.range(e.pos)),h||this.error(s.DiagnosticCode.Type_expected,d.range));var f=u.Node.createSignature(l,d,null,!1,e.range(c,e.pos)),_=null;if(e.skip(o.Token.OPENBRACE)){if(t&a.CommonFlags.AMBIENT&&this.error(s.DiagnosticCode.An_implementation_cannot_be_declared_in_ambient_contexts,e.range()),!(_=this.parseBlockStatement(e,!1)))return null}else t&a.CommonFlags.AMBIENT||this.error(s.DiagnosticCode.Function_implementation_is_missing_or_not_immediately_following_the_declaration,e.range(e.pos));var m=u.Node.createFunctionDeclaration(i,p,f,_,r,t,e.range(n,e.pos));return e.skip(o.Token.SEMICOLON),m},t.prototype.parseFunctionExpression=function(e){var t,r=e.tokenPos,n=!1;if(e.token==o.Token.FUNCTION){if(t=e.skip(o.Token.IDENTIFIER)?u.Node.createIdentifierExpression(e.readIdentifier(),e.range()):u.Node.createEmptyIdentifierExpression(e.range(e.pos)),!e.skip(o.Token.OPENPAREN))return this.error(s.DiagnosticCode._0_expected,e.range(e.pos),"("),null}else n=!0,assert(e.token==o.Token.OPENPAREN),t=u.Node.createEmptyIdentifierExpression(e.range(e.tokenPos));var i=e.pos,a=this.parseParameters(e);return a?this.parseFunctionExpressionCommon(e,t,a,n,r,i):null},t.prototype.parseFunctionExpressionCommon=function(e,t,r,n,i,c){void 0===i&&(i=-1),void 0===c&&(c=-1),i<0&&(i=t.range.start),c<0&&(c=i);var p=null;if(e.skip(o.Token.COLON)){if(!(p=this.parseType(e)))return null}else p=u.Node.createOmittedType(e.range(e.pos)),this.error(s.DiagnosticCode.Type_expected,p.range);if(n&&!e.skip(o.Token.EQUALS_GREATERTHAN))return this.error(s.DiagnosticCode._0_expected,e.range(e.pos),"=>"),null;var l,h=u.Node.createSignature(r,p,null,!1,e.range(c,e.pos));if(n)l=this.parseStatement(e,!1);else{if(!e.skip(o.Token.OPENBRACE))return this.error(s.DiagnosticCode._0_expected,e.range(e.pos),"{"),null;l=this.parseBlockStatement(e,!1)}if(!l)return null;var d=u.Node.createFunctionDeclaration(t,null,h,l,null,n?a.CommonFlags.ARROW:a.CommonFlags.NONE,e.range(i,e.pos));return u.Node.createFunctionExpression(d)},t.prototype.parseClassOrInterface=function(e,t,r,n){var i=e.token==o.Token.INTERFACE;if(!e.skip(o.Token.IDENTIFIER))return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null;var c,p=u.Node.createIdentifierExpression(e.readIdentifier(),e.range());if(e.skip(o.Token.LESSTHAN)){if(!(c=this.parseTypeParameters(e)))return null;t|=a.CommonFlags.GENERIC}else c=[];var l=null;if(e.skip(o.Token.EXTENDS)){var h=this.parseType(e);if(!h)return null;if(h.kind!=u.NodeKind.TYPE)return this.error(s.DiagnosticCode.Operation_not_supported,h.range),null;l=h}var d=null;if(e.skip(o.Token.IMPLEMENTS)){i&&this.error(s.DiagnosticCode.Interface_declaration_cannot_have_implements_clause,e.range());do{var f=this.parseType(e);if(!f)return null;i||(d||(d=[]),d.push(f))}while(e.skip(o.Token.COMMA))}if(!e.skip(o.Token.OPENBRACE))return this.error(s.DiagnosticCode._0_expected,e.range(),"{"),null;var _,m=new Array;if(i?(assert(!d),_=u.Node.createInterfaceDeclaration(p,c,l,m,r,t,e.range(n,e.pos))):_=u.Node.createClassDeclaration(p,c,l,d,m,r,t,e.range(n,e.pos)),!e.skip(o.Token.CLOSEBRACE))do{var y=this.parseClassMember(e,_);if(!y)return null;y.parent=_,m.push(y)}while(!e.skip(o.Token.CLOSEBRACE));return _},t.prototype.parseClassMember=function(e,t){for(var r=e.pos,n=new Array;e.skip(o.Token.AT);){var i=this.parseDecorator(e);if(!i)break;n.push(i)}var c=t.flags&a.CommonFlags.AMBIENT;e.skip(o.Token.PUBLIC)?c|=a.CommonFlags.PUBLIC:e.skip(o.Token.PRIVATE)?c|=a.CommonFlags.PRIVATE:e.skip(o.Token.PROTECTED)&&(c|=a.CommonFlags.PROTECTED);var p=0,l=0,h=0,d=0;e.skip(o.Token.STATIC)?(c|=a.CommonFlags.STATIC,p=e.tokenPos,l=e.pos):(e.skip(o.Token.ABSTRACT)?(c|=a.CommonFlags.ABSTRACT|a.CommonFlags.INSTANCE,h=e.tokenPos,d=e.pos):c|=a.CommonFlags.INSTANCE,t.flags&a.CommonFlags.GENERIC&&(c|=a.CommonFlags.GENERIC_CONTEXT));var f=0,_=0;e.skip(o.Token.READONLY)&&(c|=a.CommonFlags.READONLY,f=e.tokenPos,_=e.pos);var m=e.mark(),y=!1,g=!1,E=!1,T=0,v=0;if(e.skip(o.Token.GET)?e.peek(!0,!0)!=o.Token.IDENTIFIER||e.nextTokenOnNewLine?e.reset(m):(c|=a.CommonFlags.GET,g=!0,T=e.tokenPos,v=e.pos,c&a.CommonFlags.READONLY&&this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(f,_),"readonly")):e.skip(o.Token.SET)?e.peek(!0,!0)!=o.Token.IDENTIFIER||e.nextTokenOnNewLine?e.reset(m):(c|=a.CommonFlags.SET|a.CommonFlags.SET,E=!0,T=e.tokenPos,v=e.pos,c&a.CommonFlags.READONLY&&this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(f,_),"readonly")):e.skip(o.Token.CONSTRUCTOR)&&(y=!0,(c|=a.CommonFlags.CONSTRUCTOR)&a.CommonFlags.STATIC&&this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(p,l),"static"),c&a.CommonFlags.ABSTRACT&&this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(h,d),"abstract"),c&a.CommonFlags.READONLY&&this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(f,_),"readonly")),!y&&!e.skip(o.Token.IDENTIFIER))return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null;var A=y?u.Node.createConstructorExpression(e.range()):u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),I=null;if(e.skip(o.Token.LESSTHAN)){var b=e.tokenPos;if(!(I=this.parseTypeParameters(e)))return null;y?this.error(s.DiagnosticCode.Type_parameters_cannot_appear_on_a_constructor_declaration,e.range(b,e.pos)):g||E?this.error(s.DiagnosticCode.An_accessor_cannot_have_type_parameters,e.range(b,e.pos)):c|=a.CommonFlags.GENERIC}if(e.skip(o.Token.OPENPAREN)){var N=e.tokenPos,C=this.parseParameters(e,y);if(!C)return null;if(y)for(var S=0,O=C.length;S<O;++S){var k=C[S];if(k.isAny(a.CommonFlags.PUBLIC|a.CommonFlags.PROTECTED|a.CommonFlags.PRIVATE|a.CommonFlags.READONLY)){var L=u.Node.createFieldDeclaration(k.name,k.type,null,null,k.flags|a.CommonFlags.INSTANCE,k.range);L.parameterIndex=S,L.parent=t,k.implicitFieldDeclaration=L,t.members.push(L)}}else g?C.length&&this.error(s.DiagnosticCode.A_get_accessor_cannot_have_parameters,A.range):E&&(1!=C.length&&this.error(s.DiagnosticCode.A_set_accessor_must_have_exactly_one_parameter,A.range),C.length&&C[0].initializer&&this.error(s.DiagnosticCode.A_set_accessor_parameter_cannot_have_an_initializer,A.range));var x=null;if(e.skip(o.Token.COLON)){if(A.kind==u.NodeKind.CONSTRUCTOR?this.error(s.DiagnosticCode.Type_annotation_cannot_appear_on_a_constructor_declaration,e.range()):E&&this.error(s.DiagnosticCode.A_set_accessor_cannot_have_a_return_type_annotation,e.range()),!(x=this.parseType(e,A.kind==u.NodeKind.CONSTRUCTOR||E)))return null}else x=u.Node.createOmittedType(e.range(e.pos)),E||A.kind==u.NodeKind.CONSTRUCTOR||this.error(s.DiagnosticCode.Type_expected,x.range);var R=u.Node.createSignature(C,x,null,!1,e.range(N,e.pos)),B=null;if(e.skip(o.Token.OPENBRACE)){if(c&a.CommonFlags.AMBIENT&&this.error(s.DiagnosticCode.An_implementation_cannot_be_declared_in_ambient_contexts,e.range()),!(B=this.parseBlockStatement(e,!1)))return null}else c&a.CommonFlags.AMBIENT||this.error(s.DiagnosticCode.Function_implementation_is_missing_or_not_immediately_following_the_declaration,e.range());var w=u.Node.createMethodDeclaration(A,I,R,B,n,c,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),w}if(y)this.error(s.DiagnosticCode.Constructor_implementation_is_missing,A.range);else{if(!g&&!E){c&a.CommonFlags.ABSTRACT&&this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(h,d),"abstract"),c&a.CommonFlags.GET&&this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(0,0),"get"),c&a.CommonFlags.SET&&this.error(s.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(T,v),"set");var U=null;if(e.skip(o.Token.COLON)){if(!(U=this.parseType(e)))return null}else this.error(s.DiagnosticCode.Type_expected,e.range());var D=null;if(e.skip(o.Token.EQUALS)&&!(D=this.parseExpression(e)))return null;var F=u.Node.createFieldDeclaration(A,U,D,n,c,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),F}this.error(s.DiagnosticCode.Function_implementation_is_missing_or_not_immediately_following_the_declaration,A.range)}return null},t.prototype.parseNamespace=function(e,t,r,n){if(e.skip(o.Token.IDENTIFIER)){var i=u.Node.createIdentifierExpression(e.readIdentifier(),e.range());if(e.skip(o.Token.OPENBRACE)){for(var a=new Array,c=u.Node.createNamespaceDeclaration(i,a,r,t,e.range(n,e.pos));!e.skip(o.Token.CLOSEBRACE);){var p=this.parseTopLevelStatement(e,c);if(!p)return null;p.parent=c,a.push(p)}return e.skip(o.Token.SEMICOLON),c}this.error(s.DiagnosticCode._0_expected,e.range(),"{")}else this.error(s.DiagnosticCode.Identifier_expected,e.range());return null},t.prototype.parseExport=function(e,t,r){if(e.skip(o.Token.OPENBRACE)){var n=new Array;if(!e.skip(o.Token.CLOSEBRACE)){do{var i=this.parseExportMember(e);if(!i)return null;n.push(i)}while(e.skip(o.Token.COMMA));if(!e.skip(o.Token.CLOSEBRACE))return this.error(s.DiagnosticCode._0_expected,e.range(),"}"),null}var a=null;if(e.skip(o.Token.FROM)){if(!e.skip(o.Token.STRINGLITERAL))return this.error(s.DiagnosticCode.String_literal_expected,e.range()),null;a=u.Node.createStringLiteralExpression(e.readString(),e.range())}var c=u.Node.createExportStatement(n,a,t,e.range(r,e.pos)),p=c.internalPath;return null==p||this.seenlog.has(p)||(this.backlog.push(p),this.seenlog.add(p)),e.skip(o.Token.SEMICOLON),c}return this.error(s.DiagnosticCode._0_expected,e.range(),"{"),null},t.prototype.parseExportMember=function(e){if(e.skip(o.Token.IDENTIFIER)){var t=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),r=null;if(e.skip(o.Token.AS)){if(!e.skip(o.Token.IDENTIFIER))return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null;r=u.Node.createIdentifierExpression(e.readIdentifier(),e.range())}return u.Node.createExportMember(t,r,r?o.Range.join(t.range,r.range):t.range)}return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null},t.prototype.parseImport=function(e){var t=e.tokenPos,r=null,n=null,i=!1;if(e.skip(o.Token.OPENBRACE)){if(r=new Array,!e.skip(o.Token.CLOSEBRACE)){do{var a=this.parseImportDeclaration(e);if(!a)return null;r.push(a)}while(e.skip(o.Token.COMMA));if(!e.skip(o.Token.CLOSEBRACE))return this.error(s.DiagnosticCode._0_expected,e.range(),"}"),null}}else if(e.skip(o.Token.ASTERISK)){if(!e.skip(o.Token.AS))return this.error(s.DiagnosticCode._0_expected,e.range(),"as"),null;if(!e.skip(o.Token.IDENTIFIER))return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null;n=u.Node.createIdentifierExpression(e.readIdentifier(),e.range())}else i=!0;if(i||e.skip(o.Token.FROM)){if(e.skip(o.Token.STRINGLITERAL)){var c=u.Node.createStringLiteralExpression(e.readString(),e.range()),p=void 0;n?(assert(!r),p=u.Node.createImportStatementWithWildcard(n,c,e.range(t,e.pos))):p=u.Node.createImportStatement(r,c,e.range(t,e.pos));var l=p.internalPath;return this.seenlog.has(l)||(this.backlog.push(l),this.seenlog.add(l)),e.skip(o.Token.SEMICOLON),p}this.error(s.DiagnosticCode.String_literal_expected,e.range())}else this.error(s.DiagnosticCode._0_expected,e.range(),"from");return null},t.prototype.parseImportDeclaration=function(e){if(e.skip(o.Token.IDENTIFIER)){var t=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),r=null;if(e.skip(o.Token.AS)){if(!e.skip(o.Token.IDENTIFIER))return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null;r=u.Node.createIdentifierExpression(e.readIdentifier(),e.range())}return u.Node.createImportDeclaration(t,r,r?o.Range.join(t.range,r.range):t.range)}return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null},t.prototype.parseExportImport=function(e,t){if(e.skip(o.Token.IDENTIFIER)){var r=u.Node.createIdentifierExpression(e.readIdentifier(),e.range());if(e.skip(o.Token.EQUALS)){if(e.skip(o.Token.IDENTIFIER)){var n=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),i=u.Node.createExportImportStatement(n,r,e.range(t,e.pos));return e.skip(o.Token.SEMICOLON),i}this.error(s.DiagnosticCode.Identifier_expected,e.range())}else this.error(s.DiagnosticCode._0_expected,e.range(),"=")}else this.error(s.DiagnosticCode.Identifier_expected,e.range());return null},t.prototype.parseStatement=function(e,t){void 0===t&&(t=!1);var r=e.mark(),n=null;switch(e.next()){case o.Token.BREAK:n=this.parseBreak(e);break;case o.Token.CONST:n=this.parseVariable(e,a.CommonFlags.CONST,null,e.tokenPos);break;case o.Token.CONTINUE:n=this.parseContinue(e);break;case o.Token.DO:n=this.parseDoStatement(e);break;case o.Token.FOR:n=this.parseForStatement(e);break;case o.Token.IF:n=this.parseIfStatement(e);break;case o.Token.LET:n=this.parseVariable(e,a.CommonFlags.LET,null,e.tokenPos);break;case o.Token.VAR:n=this.parseVariable(e,a.CommonFlags.NONE,null,e.tokenPos);break;case o.Token.OPENBRACE:n=this.parseBlockStatement(e,t);break;case o.Token.RETURN:t&&this.error(s.DiagnosticCode.A_return_statement_can_only_be_used_within_a_function_body,e.range()),n=this.parseReturn(e);break;case o.Token.SEMICOLON:return u.Node.createEmptyStatement(e.range(e.tokenPos));case o.Token.SWITCH:n=this.parseSwitchStatement(e);break;case o.Token.THROW:n=this.parseThrowStatement(e);break;case o.Token.TRY:n=this.parseTryStatement(e);break;case o.Token.TYPE:n=this.parseTypeDeclaration(e,a.CommonFlags.NONE,null,e.tokenPos);break;case o.Token.VOID:n=this.parseVoidStatement(e);break;case o.Token.WHILE:n=this.parseWhileStatement(e);break;default:e.reset(r),n=this.parseExpressionStatement(e)}return n?e.discard(r):(e.reset(r),this.skipStatement(e)),n},t.prototype.parseBlockStatement=function(e,t){for(var r=e.tokenPos,n=new Array;!e.skip(o.Token.CLOSEBRACE);){var i=e.mark(),a=this.parseStatement(e,t);a?(e.discard(i),n.push(a)):(e.reset(i),this.skipStatement(e))}var s=u.Node.createBlockStatement(n,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),s},t.prototype.parseBreak=function(e){var t=null;e.peek(!0)!=o.Token.IDENTIFIER||e.nextTokenOnNewLine||(e.next(!0),t=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()));var r=u.Node.createBreakStatement(t,e.range());return e.skip(o.Token.SEMICOLON),r},t.prototype.parseContinue=function(e){var t=null;e.peek(!0)!=o.Token.IDENTIFIER||e.nextTokenOnNewLine||(e.next(!0),t=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()));var r=u.Node.createContinueStatement(t,e.range());return e.skip(o.Token.SEMICOLON),r},t.prototype.parseDoStatement=function(e){var t=e.tokenPos,r=this.parseStatement(e);if(!r)return null;if(e.skip(o.Token.WHILE))if(e.skip(o.Token.OPENPAREN)){var n=this.parseExpression(e);if(!n)return null;if(e.skip(o.Token.CLOSEPAREN)){var i=u.Node.createDoStatement(r,n,e.range(t,e.pos));return e.skip(o.Token.SEMICOLON),i}this.error(s.DiagnosticCode._0_expected,e.range(),")")}else this.error(s.DiagnosticCode._0_expected,e.range(),"(");else this.error(s.DiagnosticCode._0_expected,e.range(),"while");return null},t.prototype.parseExpressionStatement=function(e){var t=this.parseExpression(e);if(!t)return null;var r=u.Node.createExpressionStatement(t);return e.skip(o.Token.SEMICOLON),r},t.prototype.parseForStatement=function(e){var t=e.tokenPos;if(e.skip(o.Token.OPENPAREN)){var r=null;if(e.skip(o.Token.CONST))r=this.parseVariable(e,a.CommonFlags.CONST,null,e.tokenPos);else if(e.skip(o.Token.LET))r=this.parseVariable(e,a.CommonFlags.LET,null,e.tokenPos);else if(e.skip(o.Token.VAR))r=this.parseVariable(e,a.CommonFlags.NONE,null,e.tokenPos);else if(!e.skip(o.Token.SEMICOLON)&&!(r=this.parseExpressionStatement(e)))return null;if(e.token==o.Token.SEMICOLON){var n=null;if(!e.skip(o.Token.SEMICOLON)&&!(n=this.parseExpressionStatement(e)))return null;if(e.token==o.Token.SEMICOLON){var i=null;if(!e.skip(o.Token.CLOSEPAREN)){if(!(i=this.parseExpression(e)))return null;if(!e.skip(o.Token.CLOSEPAREN))return this.error(s.DiagnosticCode._0_expected,e.range(),")"),null}var c=this.parseStatement(e);return c?u.Node.createForStatement(r,n?n.expression:null,i,c,e.range(t,e.pos)):null}this.error(s.DiagnosticCode._0_expected,e.range(),";")}else this.error(s.DiagnosticCode._0_expected,e.range(),";")}else this.error(s.DiagnosticCode._0_expected,e.range(),"(");return null},t.prototype.parseIfStatement=function(e){var t=e.tokenPos;if(e.skip(o.Token.OPENPAREN)){var r=this.parseExpression(e);if(!r)return null;if(e.skip(o.Token.CLOSEPAREN)){var n=this.parseStatement(e);if(!n)return null;var i=null;return e.skip(o.Token.ELSE)&&!(i=this.parseStatement(e))?null:u.Node.createIfStatement(r,n,i,e.range(t,e.pos))}this.error(s.DiagnosticCode._0_expected,e.range(),")")}else this.error(s.DiagnosticCode._0_expected,e.range(),"(");return null},t.prototype.parseSwitchStatement=function(e){var t=e.tokenPos;if(e.skip(o.Token.OPENPAREN)){var r=this.parseExpression(e);if(!r)return null;if(e.skip(o.Token.CLOSEPAREN)){if(e.skip(o.Token.OPENBRACE)){for(var n=new Array;!e.skip(o.Token.CLOSEBRACE);){var i=this.parseSwitchCase(e);if(!i)return null;n.push(i)}var a=u.Node.createSwitchStatement(r,n,e.range(t,e.pos));return e.skip(o.Token.SEMICOLON),a}this.error(s.DiagnosticCode._0_expected,e.range(),"{")}else this.error(s.DiagnosticCode._0_expected,e.range(),")")}else this.error(s.DiagnosticCode._0_expected,e.range(),"(");return null},t.prototype.parseSwitchCase=function(e){var t,r,n=e.tokenPos;if(e.skip(o.Token.CASE)){var i=this.parseExpression(e);if(!i)return null;if(e.skip(o.Token.COLON)){for(t=new Array;e.peek()!=o.Token.CASE&&e.nextToken!=o.Token.DEFAULT&&e.nextToken!=o.Token.CLOSEBRACE;){if(!(r=this.parseStatement(e)))return null;t.push(r)}return u.Node.createSwitchCase(i,t,e.range(n,e.pos))}this.error(s.DiagnosticCode._0_expected,e.range(),":")}else if(e.skip(o.Token.DEFAULT)){if(e.skip(o.Token.COLON)){for(t=new Array;e.peek()!=o.Token.CASE&&e.nextToken!=o.Token.DEFAULT&&e.nextToken!=o.Token.CLOSEBRACE;){if(!(r=this.parseStatement(e)))return null;t.push(r)}return u.Node.createSwitchCase(null,t,e.range(n,e.pos))}this.error(s.DiagnosticCode._0_expected,e.range(),":")}else this.error(s.DiagnosticCode._case_or_default_expected,e.range());return null},t.prototype.parseThrowStatement=function(e){var t=e.tokenPos,r=this.parseExpression(e);if(!r)return null;var n=u.Node.createThrowStatement(r,e.range(t,e.pos));return e.skip(o.Token.SEMICOLON),n},t.prototype.parseTryStatement=function(e){var t,r=e.tokenPos;if(e.skip(o.Token.OPENBRACE)){for(var n=new Array;!e.skip(o.Token.CLOSEBRACE);){if(!(t=this.parseStatement(e)))return null;n.push(t)}var i=null,a=null,c=null;if(e.skip(o.Token.CATCH)){if(!e.skip(o.Token.OPENPAREN))return this.error(s.DiagnosticCode._0_expected,e.range(),"("),null;if(!e.skip(o.Token.IDENTIFIER))return this.error(s.DiagnosticCode.Identifier_expected,e.range()),null;if(i=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),!e.skip(o.Token.CLOSEPAREN))return this.error(s.DiagnosticCode._0_expected,e.range(),")"),null;if(!e.skip(o.Token.OPENBRACE))return this.error(s.DiagnosticCode._0_expected,e.range(),"{"),null;for(a=[];!e.skip(o.Token.CLOSEBRACE);){if(!(t=this.parseStatement(e)))return null;a.push(t)}}if(e.skip(o.Token.FINALLY)){if(!e.skip(o.Token.OPENBRACE))return this.error(s.DiagnosticCode._0_expected,e.range(),"{"),null;for(c=[];!e.skip(o.Token.CLOSEBRACE);){if(!(t=this.parseStatement(e)))return null;c.push(t)}}if(!a&&!c)return this.error(s.DiagnosticCode._0_expected,e.range(),"catch"),null;var p=u.Node.createTryStatement(n,i,a,c,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),p}return this.error(s.DiagnosticCode._0_expected,e.range(),"{"),null},t.prototype.parseTypeDeclaration=function(e,t,r,n){if(e.skip(o.Token.IDENTIFIER)){var i=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),c=null;if(e.skip(o.Token.LESSTHAN)){if(!(c=this.parseTypeParameters(e)))return null;t|=a.CommonFlags.GENERIC}if(e.skip(o.Token.EQUALS)){var p=this.parseType(e);if(!p)return null;var l=u.Node.createTypeDeclaration(i,c,p,r,t,e.range(n,e.pos));return e.skip(o.Token.SEMICOLON),l}this.error(s.DiagnosticCode._0_expected,e.range(),"=")}else this.error(s.DiagnosticCode.Identifier_expected,e.range());return null},t.prototype.parseVoidStatement=function(e){var t=e.tokenPos,r=this.parseExpression(e,20);if(!r)return null;var n=u.Node.createVoidStatement(r,e.range(t,e.pos));return e.skip(o.Token.SEMICOLON),n},t.prototype.parseWhileStatement=function(e){var t=e.tokenPos;if(e.skip(o.Token.OPENPAREN)){var r=this.parseExpression(e);if(!r)return null;if(e.skip(o.Token.CLOSEPAREN)){var n=this.parseStatement(e);if(!n)return null;var i=u.Node.createWhileStatement(r,n,e.range(t,e.pos));return e.skip(o.Token.SEMICOLON),i}this.error(s.DiagnosticCode._0_expected,e.range(),")")}else this.error(s.DiagnosticCode._0_expected,e.range(),"(");return null},t.prototype.parseExpressionStart=function(e){var t=e.next(!0),r=e.tokenPos,n=null;if(t==o.Token.NULL)return u.Node.createNullExpression(e.range());if(t==o.Token.TRUE)return u.Node.createTrueExpression(e.range());if(t==o.Token.FALSE)return u.Node.createFalseExpression(e.range());var i=function(e){switch(e){case o.Token.DOT_DOT_DOT:return 1;case o.Token.YIELD:return 2;case o.Token.EXCLAMATION:case o.Token.TILDE:case o.Token.PLUS:case o.Token.MINUS:case o.Token.PLUS_PLUS:case o.Token.MINUS_MINUS:case o.Token.TYPEOF:case o.Token.VOID:case o.Token.DELETE:return 16;case o.Token.NEW:return 19;default:return-1}}(t);if(-1!=i){var a=void 0;return t==o.Token.NEW?(a=this.parseExpression(e,18))?a.kind==u.NodeKind.CALL?u.Node.createNewExpression(a.expression,a.typeArguments,a.arguments,e.range(r,e.pos)):(this.error(s.DiagnosticCode.Operation_not_supported,e.range()),null):null:(a=this.parseExpression(e,i))?(t!=o.Token.PLUS_PLUS&&t!=o.Token.MINUS_MINUS||a.kind!=u.NodeKind.IDENTIFIER&&a.kind!=u.NodeKind.ELEMENTACCESS&&a.kind!=u.NodeKind.PROPERTYACCESS&&this.error(s.DiagnosticCode.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access,a.range),u.Node.createUnaryPrefixExpression(t,a,e.range(r,e.pos))):null}switch(t){case o.Token.OPENPAREN:if(e.skip(o.Token.CLOSEPAREN))return this.parseFunctionExpressionCommon(e,u.Node.createEmptyIdentifierExpression(e.range(r)),[],!0);var c=e.mark(),p=!0;do{switch(e.next(!0)){case o.Token.DOT_DOT_DOT:return e.reset(c),this.parseFunctionExpression(e);case o.Token.IDENTIFIER:switch(e.readIdentifier(),e.next()){case o.Token.CLOSEPAREN:if(!e.skip(o.Token.EQUALS_GREATERTHAN)){p=!1;break}case o.Token.COLON:return e.reset(c),this.parseFunctionExpression(e);case o.Token.QUESTION:case o.Token.COMMA:break;default:p=!1}break;default:p=!1}}while(p);return e.reset(c),(n=this.parseExpression(e))?e.skip(o.Token.CLOSEPAREN)?u.Node.createParenthesizedExpression(n,e.range(r,e.pos)):(this.error(s.DiagnosticCode._0_expected,e.range(),")"),null):null;case o.Token.OPENBRACKET:var l=new Array;if(!e.skip(o.Token.CLOSEBRACKET)){do{if(e.peek()==o.Token.COMMA)n=null;else if(!(n=this.parseExpression(e,1)))return null;if(l.push(n),e.peek()==o.Token.CLOSEBRACKET)break}while(e.skip(o.Token.COMMA));if(!e.skip(o.Token.CLOSEBRACKET))return this.error(s.DiagnosticCode._0_expected,e.range(),"]"),null}return u.Node.createArrayLiteralExpression(l,e.range(r,e.pos));case o.Token.LESSTHAN:var h=this.parseType(e);return h?e.skip(o.Token.GREATERTHAN)?(n=this.parseExpression(e,18))?u.Node.createAssertionExpression(u.AssertionKind.PREFIX,n,h,e.range(r,e.pos)):null:(this.error(s.DiagnosticCode._0_expected,e.range(),">"),null):null;case o.Token.IDENTIFIER:return u.Node.createIdentifierExpression(e.readIdentifier(),e.range(r,e.pos));case o.Token.THIS:return u.Node.createThisExpression(e.range(r,e.pos));case o.Token.CONSTRUCTOR:return u.Node.createConstructorExpression(e.range(r,e.pos));case o.Token.SUPER:return u.Node.createSuperExpression(e.range(r,e.pos));case o.Token.STRINGLITERAL:return u.Node.createStringLiteralExpression(e.readString(),e.range(r,e.pos));case o.Token.INTEGERLITERAL:return u.Node.createIntegerLiteralExpression(e.readInteger(),e.range(r,e.pos));case o.Token.FLOATLITERAL:return u.Node.createFloatLiteralExpression(e.readFloat(),e.range(r,e.pos));case o.Token.SLASH:var d=e.readRegexpPattern();return e.skip(o.Token.SLASH)?u.Node.createRegexpLiteralExpression(d,e.readRegexpFlags(),e.range(r,e.pos)):(this.error(s.DiagnosticCode._0_expected,e.range(),"/"),null);case o.Token.FUNCTION:return this.parseFunctionExpression(e);default:return this.error(s.DiagnosticCode.Expression_expected,e.range()),null}},t.prototype.tryParseTypeArgumentsBeforeArguments=function(e){var t=e.mark();if(!e.skip(o.Token.LESSTHAN))return null;var r=new Array;do{var n=this.parseType(e,!0,!0);if(!n)return e.reset(t),null;r.push(n)}while(e.skip(o.Token.COMMA));return e.skip(o.Token.GREATERTHAN)&&e.skip(o.Token.OPENPAREN)?r:(e.reset(t),null)},t.prototype.parseArguments=function(e){var t=new Array;if(!e.skip(o.Token.CLOSEPAREN)){do{var r=this.parseExpression(e,1);if(!r)return null;t.push(r)}while(e.skip(o.Token.COMMA));if(!e.skip(o.Token.CLOSEPAREN))return this.error(s.DiagnosticCode._0_expected,e.range(),")"),null}return t},t.prototype.parseExpression=function(e,t){void 0===t&&(t=0);var r=this.parseExpressionStart(e);if(!r)return null;for(var n,i,a=r.range.start;(n=this.tryParseTypeArgumentsBeforeArguments(e))||e.skip(o.Token.OPENPAREN);){var c=this.parseArguments(e);if(!c)return null;r=u.Node.createCallExpression(r,n,c,e.range(a,e.pos))}for(var p,l=null;(p=h(i=e.peek()))>=t;)switch(e.next(),i){case o.Token.AS:var f=this.parseType(e);if(!f)return null;r=u.Node.createAssertionExpression(u.AssertionKind.AS,r,f,e.range(a,e.pos));break;case o.Token.OPENBRACKET:if(!(l=this.parseExpression(e)))return null;if(!e.skip(o.Token.CLOSEBRACKET))return this.error(s.DiagnosticCode._0_expected,e.range(),"]"),null;r=u.Node.createElementAccessExpression(r,l,e.range(a,e.pos));break;case o.Token.PLUS_PLUS:case o.Token.MINUS_MINUS:r.kind!=u.NodeKind.IDENTIFIER&&r.kind!=u.NodeKind.ELEMENTACCESS&&r.kind!=u.NodeKind.PROPERTYACCESS&&this.error(s.DiagnosticCode.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access,r.range),r=u.Node.createUnaryPostfixExpression(i,r,e.range(a,e.pos));break;case o.Token.QUESTION:var _=this.parseExpression(e);if(!_)return null;if(!e.skip(o.Token.COLON))return this.error(s.DiagnosticCode._0_expected,e.range(),":"),null;var m=this.parseExpression(e);if(!m)return null;r=u.Node.createTernaryExpression(r,_,m,e.range(a,e.pos));break;case o.Token.COMMA:var y=[r];do{if(!(r=this.parseExpression(e,1)))return null;y.push(r)}while(e.skip(o.Token.COMMA));r=u.Node.createCommaExpression(y,e.range(a,e.pos));break;default:if(!(l=this.parseExpression(e,d(i)?p:p+1)))return null;if(i==o.Token.DOT)if(l.kind==u.NodeKind.IDENTIFIER)r=u.Node.createPropertyAccessExpression(r,l,e.range(a,e.pos));else{if(l.kind!=u.NodeKind.CALL)return this.error(s.DiagnosticCode.Identifier_expected,l.range),null;var g=l;if(g.expression.kind!=u.NodeKind.IDENTIFIER)return this.error(s.DiagnosticCode.Identifier_expected,g.expression.range),null;g.expression=u.Node.createPropertyAccessExpression(r,g.expression,e.range(a,e.pos)),r=g}else r=u.Node.createBinaryExpression(i,r,l,e.range(a,e.pos))}return r},t.prototype.skipStatement=function(e){for(e.peek(!0),e.nextTokenOnNewLine&&e.next();;){var t=e.peek(!0);if(t==o.Token.ENDOFFILE||t==o.Token.CLOSEBRACE)break;if(t==o.Token.SEMICOLON){e.next();break}if(e.nextTokenOnNewLine)break;switch(e.next()){case o.Token.IDENTIFIER:e.readIdentifier();break;case o.Token.STRINGLITERAL:e.readString();break;case o.Token.INTEGERLITERAL:e.readInteger();break;case o.Token.FLOATLITERAL:e.readFloat()}}},t}(s.DiagnosticEmitter);function h(e){switch(e){case o.Token.COMMA:return 0;case o.Token.EQUALS:case o.Token.PLUS_EQUALS:case o.Token.MINUS_EQUALS:case o.Token.ASTERISK_ASTERISK_EQUALS:case o.Token.ASTERISK_EQUALS:case o.Token.SLASH_EQUALS:case o.Token.PERCENT_EQUALS:case o.Token.LESSTHAN_LESSTHAN_EQUALS:case o.Token.GREATERTHAN_GREATERTHAN_EQUALS:case o.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS:case o.Token.AMPERSAND_EQUALS:case o.Token.CARET_EQUALS:case o.Token.BAR_EQUALS:return 3;case o.Token.QUESTION:return 4;case o.Token.BAR_BAR:return 5;case o.Token.AMPERSAND_AMPERSAND:return 6;case o.Token.BAR:return 7;case o.Token.CARET:return 8;case o.Token.AMPERSAND:return 9;case o.Token.EQUALS_EQUALS:case o.Token.EXCLAMATION_EQUALS:case o.Token.EQUALS_EQUALS_EQUALS:case o.Token.EXCLAMATION_EQUALS_EQUALS:return 10;case o.Token.AS:case o.Token.IN:case o.Token.INSTANCEOF:case o.Token.LESSTHAN:case o.Token.GREATERTHAN:case o.Token.LESSTHAN_EQUALS:case o.Token.GREATERTHAN_EQUALS:return 11;case o.Token.LESSTHAN_LESSTHAN:case o.Token.GREATERTHAN_GREATERTHAN:case o.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN:return 12;case o.Token.PLUS:case o.Token.MINUS:return 13;case o.Token.ASTERISK:case o.Token.SLASH:case o.Token.PERCENT:return 14;case o.Token.ASTERISK_ASTERISK:return 15;case o.Token.PLUS_PLUS:case o.Token.MINUS_MINUS:return 17;case o.Token.DOT:case o.Token.NEW:case o.Token.OPENBRACKET:return 19;default:return-1}}function d(e){switch(e){case o.Token.EQUALS:case o.Token.PLUS_EQUALS:case o.Token.MINUS_EQUALS:case o.Token.ASTERISK_ASTERISK_EQUALS:case o.Token.ASTERISK_EQUALS:case o.Token.SLASH_EQUALS:case o.Token.PERCENT_EQUALS:case o.Token.LESSTHAN_LESSTHAN_EQUALS:case o.Token.GREATERTHAN_GREATERTHAN_EQUALS:case o.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS:case o.Token.AMPERSAND_EQUALS:case o.Token.CARET_EQUALS:case o.Token.BAR_EQUALS:case o.Token.QUESTION:case o.Token.ASTERISK_ASTERISK:return!0;default:return!1}}t.Parser=l,function(e){e[e.COMMA=0]="COMMA",e[e.SPREAD=1]="SPREAD",e[e.YIELD=2]="YIELD",e[e.ASSIGNMENT=3]="ASSIGNMENT",e[e.CONDITIONAL=4]="CONDITIONAL",e[e.LOGICAL_OR=5]="LOGICAL_OR",e[e.LOGICAL_AND=6]="LOGICAL_AND",e[e.BITWISE_OR=7]="BITWISE_OR",e[e.BITWISE_XOR=8]="BITWISE_XOR",e[e.BITWISE_AND=9]="BITWISE_AND",e[e.EQUALITY=10]="EQUALITY",e[e.RELATIONAL=11]="RELATIONAL",e[e.SHIFT=12]="SHIFT",e[e.ADDITIVE=13]="ADDITIVE",e[e.MULTIPLICATIVE=14]="MULTIPLICATIVE",e[e.EXPONENTIATED=15]="EXPONENTIATED",e[e.UNARY_PREFIX=16]="UNARY_PREFIX",e[e.UNARY_POSTFIX=17]="UNARY_POSTFIX",e[e.CALL=18]="CALL",e[e.MEMBERACCESS=19]="MEMBERACCESS",e[e.GROUPING=20]="GROUPING",e[e.INVALID=-1]="INVALID"}(t.Precedence||(t.Precedence={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),c=r(1),u=function(){function e(e){this.program=e}return e.prototype.walk=function(){try{for(var e=a(this.program.moduleLevelExports.values()),t=e.next();!t.done;t=e.next()){var r=t.value;this.visitElement(r)}}catch(e){n={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(n)throw n.error}}var n,i},e.prototype.visitElement=function(e){switch(e.kind){case s.ElementKind.GLOBAL:e.is(s.CommonFlags.COMPILED)&&this.visitGlobal(e);break;case s.ElementKind.ENUM:e.is(s.CommonFlags.COMPILED)&&this.visitEnum(e);break;case s.ElementKind.FUNCTION_PROTOTYPE:try{for(var t=a(e.instances.values()),r=t.next();!r.done;r=t.next()){(o=r.value).is(s.CommonFlags.COMPILED)&&this.visitFunction(o)}}catch(e){c={error:e}}finally{try{r&&!r.done&&(u=t.return)&&u.call(t)}finally{if(c)throw c.error}}break;case s.ElementKind.CLASS_PROTOTYPE:try{for(var n=a(e.instances.values()),i=n.next();!i.done;i=n.next()){var o;(o=i.value).is(s.CommonFlags.COMPILED)&&this.visitClass(o)}}catch(e){p={error:e}}finally{try{i&&!i.done&&(l=n.return)&&l.call(n)}finally{if(p)throw p.error}}break;case s.ElementKind.NAMESPACE:e.is(s.CommonFlags.COMPILED)&&this.visitNamespace(e);break;default:assert(!1)}var c,u,p,l},e}(),p=function(e){function t(t){var r=e.call(this,t)||this;return r.sb=[],r.seen=new Set,r.indentLevel=0,r}return i(t,e),t.build=function(e){return new t(e).build()},t.prototype.visitGlobal=function(e){if(!this.seen.has(e)){this.seen.add(e);var t=this.sb,r=e.is(s.CommonFlags.INLINED);if(c.indent(t,this.indentLevel),r&&t.push("const "),t.push(this.typeToString(e.type)),t.push(" "),t.push(e.simpleName),r)switch(e.constantValueKind){case 1:t.push(" = "),t.push(i64_to_string(e.constantIntegerValue));break;case 2:t.push(" = "),t.push(e.constantFloatValue.toString());break;default:assert(!1)}t.push(";\n")}},t.prototype.visitEnum=function(e){if(!this.seen.has(e)){this.seen.add(e);var t=this.sb;c.indent(t,this.indentLevel++),t.push("interface "),t.push(e.simpleName),t.push(" {\n");var r,n,i,u,p=e.members;if(p){try{for(var l=a(p),h=l.next();!h.done;h=l.next()){var d=o(h.value,2),f=d[0];if((g=d[1]).kind==s.ElementKind.ENUMVALUE){var _=g.is(s.CommonFlags.INLINED);c.indent(t,this.indentLevel),_?t.push("const "):t.push("readonly "),t.push("unsigned long "),t.push(f),_&&(t.push(" = "),t.push(g.constantValue.toString(10))),t.push(";\n")}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}try{for(var m=a(p.values()),y=m.next();!y.done;y=m.next()){var g;(g=y.value).kind!=s.ElementKind.ENUMVALUE&&this.visitElement(g)}}catch(e){i={error:e}}finally{try{y&&!y.done&&(u=m.return)&&u.call(m)}finally{if(i)throw i.error}}}c.indent(t,--this.indentLevel),t.push("}\n")}},t.prototype.visitFunction=function(e){if(!this.seen.has(e)){this.seen.add(e);var t=this.sb,r=e.signature;c.indent(t,this.indentLevel),t.push(this.typeToString(r.returnType)),t.push(" "),t.push(e.simpleName),t.push("(");for(var n=r.parameterTypes,i=n.length,o=0;o<i;++o)o&&t.push(", "),t.push(this.typeToString(n[o])),t.push(" "),t.push(r.getParameterName(o));t.push(");\n");var s,u,p=e.members;if(p&&p.size){c.indent(t,this.indentLevel),t.push("interface "),t.push(e.simpleName),t.push(" {\n");try{for(var l=a(p.values()),h=l.next();!h.done;h=l.next()){var d=h.value;this.visitElement(d)}}catch(e){s={error:e}}finally{try{h&&!h.done&&(u=l.return)&&u.call(l)}finally{if(s)throw s.error}}c.indent(t,--this.indentLevel),t.push("}\n")}}},t.prototype.visitClass=function(e){if(!this.seen.has(e)){this.seen.add(e);var t=this.sb;c.indent(t,this.indentLevel++),t.push("interface "),t.push(e.simpleName),t.push(" {\n"),c.indent(t,--this.indentLevel),t.push("}\n")}},t.prototype.visitInterface=function(e){this.visitClass(e)},t.prototype.visitNamespace=function(e){if(!this.seen.has(e)){this.seen.add(e);var t=this.sb;c.indent(t,this.indentLevel++),t.push("interface "),t.push(e.simpleName),t.push(" {\n");var r,n,i=e.members;if(i)try{for(var o=a(i.values()),s=o.next();!s.done;s=o.next()){var u=s.value;this.visitElement(u)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}c.indent(t,--this.indentLevel),t.push("}\n")}},t.prototype.typeToString=function(e){switch(e.kind){case 0:return"byte";case 1:return"short";case 2:return"long";case 3:return"long long";case 4:return this.program.options.isWasm64?"long long":"long";case 5:return"octet";case 6:return"unsigned short";case 7:return"unsigned long";case 8:return"unsigned long long";case 9:return this.program.options.isWasm64?"unsigned long long":"unsigned long";case 10:return"boolean";case 11:return"unrestricted float";case 12:return"unrestricted double";case 13:return"void";default:return assert(!1),""}},t.prototype.build=function(){var e=this.sb;return e.push("interface ASModule {\n"),++this.indentLevel,this.walk(),--this.indentLevel,e.push("}\n"),e.join("")},t}(u);t.IDLBuilder=p;var l=function(e){function t(t){var r=e.call(this,t)||this;return r.sb=[],r.seen=new Set,r.indentLevel=0,r}return i(t,e),t.build=function(e){return new t(e).build()},t.prototype.visitGlobal=function(e){if(!this.seen.has(e)){this.seen.add(e);var t=this.sb,r=e.is(s.CommonFlags.INLINED);c.indent(t,this.indentLevel),r&&t.push("const "),t.push(e.simpleName),t.push(": "),t.push(this.typeToString(e.type)),t.push(";\n"),this.visitNamespace(e)}},t.prototype.visitEnum=function(e){if(!this.seen.has(e)){this.seen.add(e);var t=this.sb;c.indent(t,this.indentLevel++),t.push("enum "),t.push(e.simpleName),t.push(" {\n");var r,n,i=e.members;if(i){var u=i.size;try{for(var p=a(i),l=p.next();!l.done;l=p.next()){var h=o(l.value,2),d=h[0],f=h[1];f.kind==s.ElementKind.ENUMVALUE&&(this.seen.add(f),c.indent(t,this.indentLevel),t.push(d),f.is(s.CommonFlags.INLINED)&&(t.push(" = "),t.push(f.constantValue.toString(10))),t.push(",\n"),--u)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}u&&this.visitNamespace(e)}c.indent(t,--this.indentLevel),t.push("}\n")}},t.prototype.visitFunction=function(e){if(!this.seen.has(e)){this.seen.add(e);var t=this.sb,r=e.signature;c.indent(t,this.indentLevel),t.push("function "),t.push(e.simpleName),t.push("(");for(var n=r.parameterTypes,i=n.length,a=0;a<i;++a)a&&t.push(", "),t.push(r.getParameterName(a)),t.push(": "),t.push(this.typeToString(n[a]));t.push("): "),t.push(this.typeToString(r.returnType)),t.push(";\n"),this.visitNamespace(e)}},t.prototype.visitClass=function(e){if(!this.seen.has(e)){this.seen.add(e);var t=this.sb,r=e.kind==s.ElementKind.INTERFACE;c.indent(t,this.indentLevel++),r?t.push("interface "):(e.is(s.CommonFlags.ABSTRACT)&&t.push("abstract "),t.push("class ")),t.push(e.simpleName);var n=e.base;n&&(t.push(" extends "),t.push(n.simpleName)),t.push(" {\n");e.prototype.members;e.members,c.indent(t,--this.indentLevel),t.push("}\n")}},t.prototype.visitInterface=function(e){this.visitClass(e)},t.prototype.visitNamespace=function(e){var t,r,n=e.members;if(n&&n.size){var i=this.sb;c.indent(i,this.indentLevel++),i.push("namespace "),i.push(e.simpleName),i.push(" {\n");try{for(var o=a(n.values()),s=o.next();!s.done;s=o.next()){var u=s.value;this.visitElement(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}c.indent(i,--this.indentLevel),i.push("}\n")}},t.prototype.typeToString=function(e){switch(e.kind){case 0:return"i8";case 1:return"i16";case 2:return"i32";case 3:return"I64";case 4:return this.program.options.isWasm64?"I64":"i32";case 5:return"u8";case 6:return"u16";case 7:return"u32";case 8:return"U64";case 9:return this.program.options.isWasm64?"U64":"u32";case 10:return"bool";case 11:return"f32";case 12:return"f64";case 13:return"void";default:return assert(!1),""}},t.prototype.build=function(){var e=this.sb;return e.push("declare module ASModule {\n"),e.push("  type i8 = number;\n"),e.push("  type i16 = number;\n"),e.push("  type i32 = number;\n"),e.push("  type u8 = number;\n"),e.push("  type u16 = number;\n"),e.push("  type u32 = number;\n"),e.push("  type f32 = number;\n"),e.push("  type f64 = number;\n"),e.push("  type bool = any;\n"),++this.indentLevel,this.walk(),--this.indentLevel,e.push("}\n"),this.sb.join("")},t}(u);t.TSDBuilder=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=function(){function e(){this.text=[],this.functionId=0}return e.decompile=function(t){var r=new e;return r.decompile(t),r.finish()},e.prototype.decompile=function(e){throw new Error("not implemented")},e.prototype.decompileFunction=function(e){var t=n.readString(_BinaryenFunctionGetName(e))||"$"+this.functionId.toString(10),r=_BinaryenFunctionGetBody(e);this.push("function "),this.push(t),this.push("(");for(var i=0,o=_BinaryenFunctionGetNumParams(e);i<o;++i)i>0&&this.push(", "),this.push("$"),this.push(i.toString(10)),this.push(": "),this.push(a(_BinaryenFunctionGetParam(e,i)));this.push("): "),this.push(a(_BinaryenFunctionGetResult(e))),this.push(" "),_BinaryenExpressionGetId(r)!=n.ExpressionId.Block&&this.push("{\n"),this.decompileExpression(r),_BinaryenExpressionGetId(r)!=n.ExpressionId.Block&&this.push("\n}\n"),++this.functionId},e.prototype.decompileExpression=function(e){var t,r,i,o,s=_BinaryenExpressionGetId(e),c=_BinaryenExpressionGetType(e);switch(s){case n.ExpressionId.Block:for(null!=(r=n.readString(_BinaryenBlockGetName(e)))&&(this.push(r),this.push(": ")),this.push("{\n"),o=_BinaryenBlockGetNumChildren(e),i=0;i<o;++i)this.decompileExpression(_BinaryenBlockGetChild(e,i));return void this.push("}\n");case n.ExpressionId.If:return void(c==n.NativeType.None?(this.push("if ("),this.decompileExpression(_BinaryenIfGetCondition(e)),this.push(") "),this.decompileExpression(_BinaryenIfGetIfTrue(e)),(t=_BinaryenIfGetIfFalse(e))&&(this.push(" else "),this.decompileExpression(t))):(this.decompileExpression(_BinaryenIfGetCondition(e)),this.push(" ? "),this.decompileExpression(_BinaryenIfGetIfTrue(e)),this.push(" : "),this.decompileExpression(_BinaryenIfGetIfFalse(e))));case n.ExpressionId.Loop:null!=(r=n.readString(_BinaryenLoopGetName(e)))&&(this.push(r),this.push(": ")),this.push("do "),this.decompileExpression(_BinaryenLoopGetBody(e)),this.push("while (0);\n");case n.ExpressionId.Break:return(t=_BinaryenBreakGetCondition(e))&&(this.push("if ("),this.decompileExpression(t),this.push(") ")),void(null!=(r=n.readString(_BinaryenBreakGetName(e)))?(this.push("break "),this.push(r),this.push(";\n")):this.push("break;\n"));case n.ExpressionId.Switch:case n.ExpressionId.Call:case n.ExpressionId.CallImport:case n.ExpressionId.CallIndirect:throw new Error("not implemented");case n.ExpressionId.GetLocal:return this.push("$"),void this.push(_BinaryenGetLocalGetIndex(e).toString(10));case n.ExpressionId.SetLocal:return this.push("$"),this.push(_BinaryenSetLocalGetIndex(e).toString(10)),this.push(" = "),void this.decompileExpression(_BinaryenSetLocalGetValue(e));case n.ExpressionId.GetGlobal:case n.ExpressionId.SetGlobal:throw new Error("not implemented");case n.ExpressionId.Load:return this.push("load<"),this.push(a(c)),this.push(">("),this.push(_BinaryenLoadGetOffset(e).toString(10)),this.push(" + "),this.decompileExpression(_BinaryenLoadGetPtr(e)),void this.push(")");case n.ExpressionId.Store:return this.push("store<"),this.push(a(c)),this.push(">("),this.push(_BinaryenStoreGetOffset(e).toString(10)),this.push(" + "),this.decompileExpression(_BinaryenStoreGetPtr(e)),this.push(", "),this.decompileExpression(_BinaryenStoreGetValue(e)),void this.push(")");case n.ExpressionId.Const:switch(c){case n.NativeType.I32:return void this.push(_BinaryenConstGetValueI32(e).toString(10));case n.NativeType.I64:return void this.push(i64_to_string(i64_new(_BinaryenConstGetValueI64Low(e),_BinaryenConstGetValueI64High(e))));case n.NativeType.F32:return void this.push(_BinaryenConstGetValueF32(e).toString(10));case n.NativeType.F64:return void this.push(_BinaryenConstGetValueF64(e).toString(10))}break;case n.ExpressionId.Unary:switch(_BinaryenUnaryGetOp(e)){case n.UnaryOp.ClzI32:return this.push("clz<i32>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.CtzI32:return this.push("ctz<i32>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.PopcntI32:return this.push("popcnt<i32>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.NegF32:case n.UnaryOp.NegF64:return this.push("-"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.AbsF32:return this.push("abs<f32>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.CeilF32:return this.push("ceil<f32>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.FloorF32:return this.push("floor<f32>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.TruncF32:return this.push("trunc<f32>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.NearestF32:return this.push("nearest<i32>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.SqrtF32:return this.push("sqrt<f32>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.EqzI32:case n.UnaryOp.EqzI64:return this.push("!"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.ClzI64:return this.push("clz<i64>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.CtzI64:return this.push("ctz<i64>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.PopcntI64:return this.push("popcnt<i64>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.AbsF64:return this.push("abs<f64>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.CeilF64:return this.push("ceil<f64>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.FloorF64:return this.push("floor<f64>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.TruncF64:return this.push("trunc<f64>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.NearestF64:return this.push("nearest<f64>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.SqrtF64:return this.push("sqrt<f64>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.ExtendI32:return this.push("<i64>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.ExtendU32:return this.push("<i64><u64>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.WrapI64:case n.UnaryOp.TruncF32ToI32:return this.push("<i32>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.TruncF32ToI64:return this.push("<i64>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.TruncF32ToU32:return this.push("<i32><u32>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.TruncF32ToU64:return this.push("<i64><u64>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.TruncF64ToI32:return this.push("<i32>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.TruncF64ToI64:return this.push("<i64>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.TruncF64ToU32:return this.push("<i32><u32>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.TruncF64ToU64:return this.push("<i64><u64>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.ReinterpretF32:return this.push("reinterpret<f32,i32>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.ReinterpretF64:return this.push("reinterpret<f64,i64>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.ConvertI32ToF32:return this.push("<f32>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.ConvertI32ToF64:return this.push("<f64>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.ConvertU32ToF32:return this.push("<f32><u32>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.ConvertU32ToF64:return this.push("<f64><u32>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.ConvertI64ToF32:return this.push("<f32>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.ConvertI64ToF64:return this.push("<f64>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.ConvertU64ToF32:return this.push("<f32><u64>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.ConvertU64ToF64:return this.push("<f64><u64>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.PromoteF32:return this.push("<f64>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.DemoteF64:return this.push("<f32>"),void this.decompileExpression(_BinaryenUnaryGetValue(e));case n.UnaryOp.ReinterpretI32:return this.push("reinterpret<i32,f32>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")");case n.UnaryOp.ReinterpretI64:return this.push("reinterpret<i64,f64>("),this.decompileExpression(_BinaryenUnaryGetValue(e)),void this.push(")")}break;case n.ExpressionId.Binary:switch(_BinaryenBinaryGetOp(e)){case n.BinaryOp.AddI32:case n.BinaryOp.AddI64:case n.BinaryOp.AddF32:case n.BinaryOp.AddF64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" + "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.SubI32:case n.BinaryOp.SubI64:case n.BinaryOp.SubF32:case n.BinaryOp.SubF64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" - "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.MulI32:case n.BinaryOp.MulI64:case n.BinaryOp.MulF32:case n.BinaryOp.MulF64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" * "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.DivI32:case n.BinaryOp.DivI64:case n.BinaryOp.DivF32:case n.BinaryOp.DivF64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" / "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.DivU32:return this.push("<i32>(<u32>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" / <u32>"),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")");case n.BinaryOp.RemI32:case n.BinaryOp.RemI64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" % "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.RemU32:return this.push("<i32>(<u32>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" / <u32>"),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")");case n.BinaryOp.AndI32:case n.BinaryOp.AndI64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" & "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.OrI32:case n.BinaryOp.OrI64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" | "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.XorI32:case n.BinaryOp.XorI64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" ^ "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.ShlI32:case n.BinaryOp.ShlI64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" << "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.ShrU32:case n.BinaryOp.ShrU64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" >>> "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.ShrI32:case n.BinaryOp.ShrI64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" >> "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.RotlI32:return this.push("rotl<i32>("),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(", "),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")");case n.BinaryOp.RotrI32:return this.push("rotr<i32>("),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(", "),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")");case n.BinaryOp.EqI32:case n.BinaryOp.EqI64:case n.BinaryOp.EqF32:case n.BinaryOp.EqF64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" == "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.NeI32:case n.BinaryOp.NeI64:case n.BinaryOp.NeF32:case n.BinaryOp.NeF64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" != "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.LtI32:case n.BinaryOp.LtI64:case n.BinaryOp.LtF32:case n.BinaryOp.LtF64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" < "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.LtU32:return this.push("<u32>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" < <u32>"),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.LeI32:case n.BinaryOp.LeI64:case n.BinaryOp.LeF32:case n.BinaryOp.LeF64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" <= "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.LeU32:return this.push("<u32>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" <= <u32>"),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.GtI32:case n.BinaryOp.GtI64:case n.BinaryOp.GtF32:case n.BinaryOp.GtF64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" > "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.GtU32:return this.push("<u32>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" > <u32>"),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.GeI32:case n.BinaryOp.GeI64:case n.BinaryOp.GeF32:case n.BinaryOp.GeF64:return this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" >= "),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.GeU32:return this.push("<u32>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" >= <u32>"),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.DivU64:return this.push("<u64>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" / <u64>"),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.RemU64:return this.push("<u64>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" % <u64>"),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.RotlI64:return this.push("rotl<i64>("),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(", "),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")");case n.BinaryOp.RotrI64:return this.push("rotr<i64>("),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(", "),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")");case n.BinaryOp.LtU64:return this.push("<u64>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" < <u64>"),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.LeU64:return this.push("<u64>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" <= <u64>"),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.GtU64:return this.push("<u64>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" > <u64>"),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.GeU64:return this.push("<u64>"),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(" >= <u64>"),void this.decompileExpression(_BinaryenBinaryGetRight(e));case n.BinaryOp.CopysignF32:return this.push("copysign<f32>("),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(", "),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")");case n.BinaryOp.MinF32:return this.push("min<f32>("),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(", "),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")");case n.BinaryOp.MaxF32:return this.push("max<f32>("),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(", "),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")");case n.BinaryOp.CopysignF64:return this.push("copysign<f64>("),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(", "),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")");case n.BinaryOp.MinF64:return this.push("min<f64>("),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(", "),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")");case n.BinaryOp.MaxF64:return this.push("max<f64>("),this.decompileExpression(_BinaryenBinaryGetLeft(e)),this.push(", "),this.decompileExpression(_BinaryenBinaryGetRight(e)),void this.push(")")}return;case n.ExpressionId.Select:return this.push("select<"),this.push(a(c)),this.push(">("),this.decompileExpression(_BinaryenSelectGetIfTrue(e)),this.push(", "),this.decompileExpression(_BinaryenSelectGetIfFalse(e)),this.push(", "),this.decompileExpression(_BinaryenSelectGetCondition(e)),void this.push(")");case n.ExpressionId.Drop:return this.decompileExpression(_BinaryenDropGetValue(e)),void this.push(";\n");case n.ExpressionId.Return:return void((t=_BinaryenReturnGetValue(e))?(this.push("return "),this.decompileExpression(t),this.push(";\n")):this.push("return;\n"));case n.ExpressionId.Host:switch(_BinaryenHostGetOp(e)){case n.HostOp.CurrentMemory:return void this.push("current_memory()");case n.HostOp.GrowMemory:return this.push("grow_memory("),this.decompileExpression(_BinaryenHostGetOperand(e,0)),void this.push(")")}break;case n.ExpressionId.Nop:return void this.push(";\n");case n.ExpressionId.Unreachable:return void this.push("unreachable()");case n.ExpressionId.AtomicCmpxchg:case n.ExpressionId.AtomicRMW:case n.ExpressionId.AtomicWait:case n.ExpressionId.AtomicWake:}throw new Error("not implemented")},e.prototype.push=function(e){this.text.push(e)},e.prototype.finish=function(){var e=this.text.join("");return this.text=[],e},e}();function a(e){switch(e){case n.NativeType.None:return"void";case n.NativeType.I32:return"i32";case n.NativeType.I64:return"i64";case n.NativeType.F32:return"f32";case n.NativeType.F64:return"f64";case n.NativeType.Unreachable:throw new Error("unreachable type");case n.NativeType.Auto:throw new Error("auto type");default:throw new Error("unexpected type")}}t.Decompiler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=r(19),a=r(18),o=r(2);t.formatDiagnostic=o.formatDiagnosticMessage;var s=r(17),c=r(0);t.LIBRARY_PREFIX=c.LIBRARY_PREFIX,t.parseFile=function(e,t,r,n){return void 0===r&&(r=!1),void 0===n&&(n=null),n||(n=new s.Parser),n.parseFile(e,t,r),n},t.nextFile=function(e){return e.nextFile()},t.nextDiagnostic=function(e){var t=e.program;return t.diagnosticsOffset<t.diagnostics.length?t.diagnostics[t.diagnosticsOffset++]:null},t.isInfo=function(e){return e.category==o.DiagnosticCategory.INFO},t.isWarning=function(e){return e.category==o.DiagnosticCategory.WARNING},t.isError=function(e){return e.category==o.DiagnosticCategory.ERROR},t.createOptions=function(){return new n.Options},t.setTarget=function(e,t){e.target=t},t.setNoTreeShaking=function(e,t){e.noTreeShaking=t},t.setNoAssert=function(e,t){e.noAssert=t},t.setNoMemory=function(e,t){e.noMemory=t},t.setImportMemory=function(e,t){e.importMemory=t},t.setImportTable=function(e,t){e.importTable=t},t.setSourceMap=function(e,t){e.sourceMap=t},t.setMemoryBase=function(e,t){e.memoryBase=t},t.setGlobalAlias=function(e,t,r){var n=e.globalAliases;n||(e.globalAliases=n=new Map),n.set(t,r)},t.finishParsing=function(e){return e.finish()},t.compileProgram=function(e,t){return void 0===t&&(t=null),new n.Compiler(e,t).compile()},t.decompileModule=function(e){var t=new i.Decompiler;return t.decompile(e),t.finish()},t.buildIDL=function(e){return a.IDLBuilder.build(e)},t.buildTSD=function(e){return a.TSDBuilder.build(e)}},function(e,t,r){(function(e){const t=new Float64Array(1),r=new Float32Array(t.buffer),n=new Int32Array(t.buffer);e.f32_as_i32=function(e){return r[0]=e,n[0]},e.i32_as_f32=function(e){return n[0]=e,r[0]},e.f64_as_i64=function(e){return t[0]=e,i64_new(n[0],n[1])},e.i64_as_f64=function(e){return n[0]=i64_low(e),n[1]=i64_high(e),t[0]}}).call(this,r(5))},function(e,t){e.exports=n;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function i(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=i;var a={},o={};function s(e,t){var r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=o[e])?n:(r=u(e,(0|e)<0?-1:0,!0),i&&(o[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=a[e])?n:(r=u(e,e<0?-1:0,!1),i&&(a[e]=r),r)}function c(e,t){if(isNaN(e))return t?g:y;if(t){if(e<0)return g;if(e>=f)return I}else{if(e<=-_)return b;if(e+1>=_)return A}return e<0?c(-e,t).neg():u(e%d|0,e/d|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=s,n.fromNumber=c,n.fromBits=u;var p=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var i=c(p(r,8)),a=y,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+s),r);if(s<8){var h=c(p(r,s));a=a.mul(h).add(c(u))}else a=(a=a.mul(i)).add(c(u))}return a.unsigned=t,a}function h(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?l(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=h;var d=4294967296,f=d*d,_=f/2,m=s(1<<24),y=s(0);n.ZERO=y;var g=s(0,!0);n.UZERO=g;var E=s(1);n.ONE=E;var T=s(1,!0);n.UONE=T;var v=s(-1);n.NEG_ONE=v;var A=u(-1,2147483647,!1);n.MAX_VALUE=A;var I=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=I;var b=u(0,-2147483648,!1);n.MIN_VALUE=b;var N=n.prototype;N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},N.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(b)){var t=c(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=c(p(e,6),this.unsigned),a=this,o="";;){var s=a.div(i),u=(a.sub(s.mul(i)).toInt()>>>0).toString(e);if((a=s).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},N.isZero=function(){return 0===this.high&&0===this.low},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||this.high>=0},N.isOdd=function(){return 1==(1&this.low)},N.isEven=function(){return 0==(1&this.low)},N.equals=function(e){return i(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},N.eq=N.equals,N.notEquals=function(e){return!this.eq(e)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(e){return this.comp(e)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(e){return this.comp(e)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(e){return this.comp(e)>0},N.gt=N.greaterThan,N.greaterThanOrEqual=function(e){return this.comp(e)>=0},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(e){if(i(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(E)},N.neg=N.negate,N.add=function(e){i(e)||(e=h(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,a=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,p=0,l=0,d=0,f=0;return d+=(f+=a+(65535&e.low))>>>16,l+=(d+=n+c)>>>16,p+=(l+=r+s)>>>16,p+=t+o,u((d&=65535)<<16|(f&=65535),(p&=65535)<<16|(l&=65535),this.unsigned)},N.subtract=function(e){return i(e)||(e=h(e)),this.add(e.neg())},N.sub=N.subtract,N.multiply=function(e){if(this.isZero())return y;if(i(e)||(e=h(e)),r)return u(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(b))return e.isOdd()?b:y;if(e.eq(b))return this.isOdd()?b:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,o=65535&this.low,s=e.high>>>16,p=65535&e.high,l=e.low>>>16,d=65535&e.low,f=0,_=0,g=0,E=0;return g+=(E+=o*d)>>>16,_+=(g+=a*d)>>>16,g&=65535,_+=(g+=o*l)>>>16,f+=(_+=n*d)>>>16,_&=65535,f+=(_+=a*l)>>>16,_&=65535,f+=(_+=o*p)>>>16,f+=t*d+n*l+a*p+o*s,u((g&=65535)<<16|(E&=65535),(f&=65535)<<16|(_&=65535),this.unsigned)},N.mul=N.multiply,N.divide=function(e){if(i(e)||(e=h(e)),e.isZero())throw Error("division by zero");var t,n,a;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return T;a=g}else{if(this.eq(b))return e.eq(E)||e.eq(v)?b:e.eq(b)?E:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?E:v:(n=this.sub(e.mul(t)),a=t.add(n.div(e)));else if(e.eq(b))return this.unsigned?g:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=y}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),s=o<=48?1:p(2,o-48),l=c(t),d=l.mul(e);d.isNegative()||d.gt(n);)d=(l=c(t-=s,this.unsigned)).mul(e);l.isZero()&&(l=E),a=a.add(l),n=n.sub(d)}return a},N.div=N.divide,N.modulo=function(e){return i(e)||(e=h(e)),r?u((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return u(~this.low,~this.high,this.unsigned)},N.and=function(e){return i(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},N.or=function(e){return i(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},N.xor=function(e){return i(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},N.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},N.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},N.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,r){(function(e){const t=e.Long||r(22);e.i64_new=function(e,r){return t.fromBits(e,r)},e.i64_low=function(e){return e.low},e.i64_high=function(e){return e.high},e.i64_add=function(e,t){return e.add(t)},e.i64_sub=function(e,t){return e.sub(t)},e.i64_mul=function(e,t){return e.mul(t)},e.i64_div=function(e,t){return e.div(t)},e.i64_div_u=function(e,t){return e.toUnsigned().div(t.toUnsigned()).toSigned()},e.i64_rem=function(e,t){return e.mod(t)},e.i64_rem_u=function(e,t){return e.toUnsigned().mod(t.toUnsigned()).toSigned()},e.i64_and=function(e,t){return e.and(t)},e.i64_or=function(e,t){return e.or(t)},e.i64_xor=function(e,t){return e.xor(t)},e.i64_shl=function(e,t){return e.shl(t)},e.i64_shr=function(e,t){return e.shr(t)},e.i64_shr_u=function(e,t){return e.shru(t)},e.i64_not=function(e){return e.not()},e.i64_align=function(e,r){assert(r&&0==(r&r-1));var n=t.fromInt(r-1);return e.add(n).and(n.not())},e.i64_is_i8=function(e){return 0===e.high&&e.low>=0&&e.low<=i8.MAX_VALUE||-1===e.high&&e.low>=i8.MIN_VALUE&&e.low<0},e.i64_is_i16=function(e){return 0===e.high&&e.low>=0&&e.low<=i16.MAX_VALUE||-1===e.high&&e.low>=i16.MIN_VALUE&&e.low<0},e.i64_is_i32=function(e){return 0===e.high&&e.low>=0||-1===e.high&&e.low<0},e.i64_is_u8=function(e){return 0===e.high&&e.low>=0&&e.low<=u8.MAX_VALUE},e.i64_is_u16=function(e){return 0===e.high&&e.low>=0&&e.low<=u16.MAX_VALUE},e.i64_is_u32=function(e){return 0===e.high},e.i64_is_bool=function(e){return 0===e.high&&(0===e.low||1===e.low)};const n=t.fromNumber(f32.MIN_SAFE_INTEGER),i=t.fromNumber(f32.MAX_SAFE_INTEGER);e.i64_is_f32=function(e){return e.gte(n)&&e.lte(i)};const a=t.fromNumber(f64.MIN_SAFE_INTEGER),o=t.fromNumber(f64.MAX_SAFE_INTEGER);e.i64_is_f64=function(e){return e.gte(a)&&e.lte(o)},e.i64_to_f32=function(t){return e.Math.fround(t.toNumber())},e.i64_to_f64=function(e){return e.toNumber()},e.i64_to_string=function(e,t){return(t?e.toUnsigned():e).toString(10)}}).call(this,r(5))},function(e,t,r){const n=r(7);function i(e,t){const r={};switch(e){case"br_table":const n=[];for(;;){let e=t[0];if(isNaN(e))break;t.shift(),n.push(e)}return n;case"call_indirect":return r.index=t.shift(),r.reserved=0,r;case"memory_immediate":return r.flags=t.shift(),r.offset=t.shift(),r;default:return t.shift()}}e.exports=(e=>{const t=[],r=e.split(/\s|\n/);for(;r.length;){const e=r.shift(),a={};let[o,s]=e.split(".");void 0===s?s=o:a.return_type=o,a.name=s;const c=n["const"===a.name?a.return_type:a.name];c&&(a.immediates=i(c,r)),t.push(a)}return t})},function(e,t,r){const n=r(6).Buffer,i=r(8),a=r(9),o=r(7),s=e.exports=(e=>s.generate(e).buffer),c=s.LANGUAGE_TYPES={i32:127,i64:126,f32:125,f64:124,anyFunc:112,func:96,block_type:64},u=s.EXTERNAL_KIND={function:0,table:1,memory:2,global:3},p=s.SECTION_IDS={custom:0,type:1,import:2,function:3,table:4,memory:5,global:6,export:7,start:8,element:9,code:10,data:11},l=s.OPCODES={unreachable:0,nop:1,block:2,loop:3,if:4,else:5,end:11,br:12,br_if:13,br_table:14,return:15,call:16,call_indirect:17,drop:26,select:27,get_local:32,set_local:33,tee_local:34,get_global:35,set_global:36,"i32.load":40,"i64.load":41,"f32.load":42,"f64.load":43,"i32.load8_s":44,"i32.load8_u":45,"i32.load16_s":46,"i32.load16_u":47,"i64.load8_s":48,"i64.load8_u":49,"i64.load16_s":50,"i64.load16_u":51,"i64.load32_s":52,"i64.load32_u":53,"i32.store":54,"i64.store":55,"f32.store":56,"f64.store":57,"i32.store8":58,"i32.store16":59,"i64.store8":60,"i64.store16":61,"i64.store32":62,current_memory:63,grow_memory:64,"i32.const":65,"i64.const":66,"f32.const":67,"f64.const":68,"i32.eqz":69,"i32.eq":70,"i32.ne":71,"i32.lt_s":72,"i32.lt_u":73,"i32.gt_s":74,"i32.gt_u":75,"i32.le_s":76,"i32.le_u":77,"i32.ge_s":78,"i32.ge_u":79,"i64.eqz":80,"i64.eq":81,"i64.ne":82,"i64.lt_s":83,"i64.lt_u":84,"i64.gt_s":85,"i64.gt_u":86,"i64.le_s":87,"i64.le_u":88,"i64.ge_s":89,"i64.ge_u":90,"f32.eq":91,"f32.ne":92,"f32.lt":93,"f32.gt":94,"f32.le":95,"f32.ge":96,"f64.eq":97,"f64.ne":98,"f64.lt":99,"f64.gt":100,"f64.le":101,"f64.ge":102,"i32.clz":103,"i32.ctz":104,"i32.popcnt":105,"i32.add":106,"i32.sub":107,"i32.mul":108,"i32.div_s":109,"i32.div_u":110,"i32.rem_s":111,"i32.rem_u":112,"i32.and":113,"i32.or":114,"i32.xor":115,"i32.shl":116,"i32.shr_s":117,"i32.shr_u":118,"i32.rotl":119,"i32.rotr":120,"i64.clz":121,"i64.ctz":122,"i64.popcnt":123,"i64.add":124,"i64.sub":125,"i64.mul":126,"i64.div_s":127,"i64.div_u":128,"i64.rem_s":129,"i64.rem_u":130,"i64.and":131,"i64.or":132,"i64.xor":133,"i64.shl":134,"i64.shr_s":135,"i64.shr_u":136,"i64.rotl":137,"i64.rotr":138,"f32.abs":139,"f32.neg":140,"f32.ceil":141,"f32.floor":142,"f32.trunc":143,"f32.nearest":144,"f32.sqrt":145,"f32.add":146,"f32.sub":147,"f32.mul":148,"f32.div":149,"f32.min":150,"f32.max":151,"f32.copysign":152,"f64.abs":153,"f64.neg":154,"f64.ceil":155,"f64.floor":156,"f64.trunc":157,"f64.nearest":158,"f64.sqrt":159,"f64.add":160,"f64.sub":161,"f64.mul":162,"f64.div":163,"f64.min":164,"f64.max":165,"f64.copysign":166,"i32.wrap/i64":167,"i32.trunc_s/f32":168,"i32.trunc_u/f32":169,"i32.trunc_s/f64":170,"i32.trunc_u/f64":171,"i64.extend_s/i32":172,"i64.extend_u/i32":173,"i64.trunc_s/f32":174,"i64.trunc_u/f32":175,"i64.trunc_s/f64":176,"i64.trunc_u/f64":177,"f32.convert_s/i32":178,"f32.convert_u/i32":179,"f32.convert_s/i64":180,"f32.convert_u/i64":181,"f32.demote/f64":182,"f64.convert_s/i32":183,"f64.convert_u/i32":184,"f64.convert_s/i64":185,"f64.convert_u/i64":186,"f64.promote/f32":187,"i32.reinterpret/f32":188,"i64.reinterpret/f64":189,"f32.reinterpret/i32":190,"f64.reinterpret/i64":191};s.typeGenerators={function:(e,t)=>{t.write([e])},table:(e,t)=>{t.write([c[e.elementType]]),s.typeGenerators.memory(e.limits,t)},global:(e,t)=>{t.write([c[e.contentType]]),t.write([e.mutability])},memory:(e,t)=>{i.unsigned.write(Number(void 0!==e.maximum),t),i.unsigned.write(e.intial,t),void 0!==e.maximum&&i.unsigned.write(e.maximum,t)},initExpr:(e,t)=>{s.generateOp(e,t),s.generateOp({name:"end",type:"void"},t)}},s.immediataryGenerators={varuint1:(e,t)=>(t.write([e]),t),varuint32:(e,t)=>(i.unsigned.write(e,t),t),varint32:(e,t)=>(i.signed.write(e,t),t),varint64:(e,t)=>(i.signed.write(e,t),t),uint32:(e,t)=>(t.write(e),t),uint64:(e,t)=>(t.write(e),t),block_type:(e,t)=>(t.write([c[e]]),t),br_table:(e,t)=>{i.unsigned.write(e.targets.length,t);for(let r of e.targets)i.unsigned.write(r,t);return i.unsigned.write(e.defaultTarget,t),t},call_indirect:(e,t)=>(i.unsigned.write(e.index,t),t.write([e.reserved]),t),memory_immediate:(e,t)=>(i.unsigned.write(e.flags,t),i.unsigned.write(e.offset,t),t)};const h={custom:(e,t=new a)=>{t.write([0]);const r=new a;return i.unsigned.write(e.sectionName.length,r),r.write(e.sectionName),r.write(e.payload),i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t},type:(e,t=new a)=>{t.write([p.type]);let r=new a;i.unsigned.write(e.entries.length,r);for(let t of e.entries){r.write([c[t.form]]);const e=t.params.length;i.unsigned.write(e,r),0!==e&&r.write(t.params.map(e=>c[e])),r.write([t.return_type?1:0]),t.return_type&&r.write([c[t.return_type]])}return i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t},import:(e,t)=>{t.write([p.import]);let r=new a;i.unsigned.write(e.entries.length,r);for(let t of e.entries)i.unsigned.write(t.moduleStr.length,r),r.write(t.moduleStr),i.unsigned.write(t.fieldStr.length,r),r.write(t.fieldStr),r.write([u[t.kind]]),s.typeGenerators[t.kind](t.type,r);return i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t},function:(e,t=new a)=>{t.write([p.function]);let r=new a;i.unsigned.write(e.entries.length,r);for(let t of e.entries)i.unsigned.write(t,r);return i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t},table:(e,t)=>{t.write([p.table]);let r=new a;i.unsigned.write(e.entries.length,r);for(let t of e.entries)s.typeGenerators.table(t,r);return i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t},memory:(e,t)=>{t.write([p.memory]);let r=new a;i.unsigned.write(e.entries.length,r);for(let t of e.entries)s.typeGenerators.memory(t,r);return i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t},global:(e,t)=>{t.write([p.global]);let r=new a;i.unsigned.write(e.entries.length,r);for(let t of e.entries)s.typeGenerators.global(t.type,r),s.typeGenerators.initExpr(t.init,r);return i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t},export:(e,t=new a)=>{t.write([p.export]);let r=new a;i.unsigned.write(e.entries.length,r);for(let t of e.entries){const e=n.from(t.field_str),a=e.length;i.unsigned.write(a,r),r.write(e),r.write([u[t.kind]]),i.unsigned.write(t.index,r)}return i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t},start:(e,t)=>{t.write([p.start]);const r=new a;return i.unsigned.write(e.index,r),i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t},element:(e,t)=>{t.write([p.element]);let r=new a;i.unsigned.write(e.entries.length,r);for(let t of e.entries){i.unsigned.write(t.index,r),s.typeGenerators.initExpr(t.offset,r),i.unsigned.write(t.elements.length,r);for(let e of t.elements)i.unsigned.write(e,r)}return i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t},code:(e,t=new a)=>{t.write([p.code]);let r=new a;i.unsigned.write(e.entries.length,r);for(let t of e.entries){let e=new a;i.unsigned.write(t.locals.length,e);for(let r of t.locals)i.unsigned.write(r.count,e),e.write([c[r.type]]);for(let r of t.code)s.generateOp(r,e);i.unsigned.write(e.bytesWrote,r),r.write(e.buffer)}return i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t},data:(e,t)=>{t.write([p.data]);let r=new a;i.unsigned.write(e.entries.length,r);for(let t of e.entries)i.unsigned.write(t.index,r),s.typeGenerators.initExpr(t.offset,r),i.unsigned.write(t.data.length,r),r.write(t.data);return i.unsigned.write(r.bytesWrote,t),t.write(r.buffer),t}};s.generate=((e,t=new a)=>{s.generatePreramble(e.shift(),t);for(let r of e)h[r.name](r,t);return t}),s.generatePreramble=((e,t=new a)=>(t.write(e.magic),t.write(e.version),t)),s.generateOp=((e,t=new a)=>{let r=e.name;void 0!==e.return_type&&(r=e.return_type+"."+r),t.write([l[r]]);const n=o["const"===e.name?e.return_type:e.name];return n&&s.immediataryGenerators[n](e.immediates,t),t})},function(e,t,r){(function(t){const n=r(8),i=r(9),a=r(7),o=e.exports=((e,t)=>{const r=new i(e);return o.parse(r,t)}),s=o.LANGUAGE_TYPES={127:"i32",126:"i64",125:"f32",124:"f64",112:"anyFunc",96:"func",64:"block_type"},c=o.EXTERNAL_KIND={0:"function",1:"table",2:"memory",3:"global"};o.parsePreramble=(e=>{const t={name:"preramble"};return t.magic=[...e.read(4)],t.version=[...e.read(4)],t}),o.parseSectionHeader=(e=>{const t=e.read(1)[0],r=n.unsigned.readBn(e).toNumber();return{id:t,name:p[t],size:r}});const u=o.OPCODES={0:"unreachable",1:"nop",2:"block",3:"loop",4:"if",5:"else",11:"end",12:"br",13:"br_if",14:"br_table",15:"return",16:"call",17:"call_indirect",26:"drop",27:"select",32:"get_local",33:"set_local",34:"tee_local",35:"get_global",36:"set_global",40:"i32.load",41:"i64.load",42:"f32.load",43:"f64.load",44:"i32.load8_s",45:"i32.load8_u",46:"i32.load16_s",47:"i32.load16_u",48:"i64.load8_s",49:"i64.load8_u",50:"i64.load16_s",51:"i64.load16_u",52:"i64.load32_s",53:"i64.load32_u",54:"i32.store",55:"i64.store",56:"f32.store",57:"f64.store",58:"i32.store8",59:"i32.store16",60:"i64.store8",61:"i64.store16",62:"i64.store32",63:"current_memory",64:"grow_memory",65:"i32.const",66:"i64.const",67:"f32.const",68:"f64.const",69:"i32.eqz",70:"i32.eq",71:"i32.ne",72:"i32.lt_s",73:"i32.lt_u",74:"i32.gt_s",75:"i32.gt_u",76:"i32.le_s",77:"i32.le_u",78:"i32.ge_s",79:"i32.ge_u",80:"i64.eqz",81:"i64.eq",82:"i64.ne",83:"i64.lt_s",84:"i64.lt_u",85:"i64.gt_s",86:"i64.gt_u",87:"i64.le_s",88:"i64.le_u",89:"i64.ge_s",90:"i64.ge_u",91:"f32.eq",92:"f32.ne",93:"f32.lt",94:"f32.gt",95:"f32.le",96:"f32.ge",97:"f64.eq",98:"f64.ne",99:"f64.lt",100:"f64.gt",101:"f64.le",102:"f64.ge",103:"i32.clz",104:"i32.ctz",105:"i32.popcnt",106:"i32.add",107:"i32.sub",108:"i32.mul",109:"i32.div_s",110:"i32.div_u",111:"i32.rem_s",112:"i32.rem_u",113:"i32.and",114:"i32.or",115:"i32.xor",116:"i32.shl",117:"i32.shr_s",118:"i32.shr_u",119:"i32.rotl",120:"i32.rotr",121:"i64.clz",122:"i64.ctz",123:"i64.popcnt",124:"i64.add",125:"i64.sub",126:"i64.mul",127:"i64.div_s",128:"i64.div_u",129:"i64.rem_s",130:"i64.rem_u",131:"i64.and",132:"i64.or",133:"i64.xor",134:"i64.shl",135:"i64.shr_s",136:"i64.shr_u",137:"i64.rotl",138:"i64.rotr",139:"f32.abs",140:"f32.neg",141:"f32.ceil",142:"f32.floor",143:"f32.trunc",144:"f32.nearest",145:"f32.sqrt",146:"f32.add",147:"f32.sub",148:"f32.mul",149:"f32.div",150:"f32.min",151:"f32.max",152:"f32.copysign",153:"f64.abs",154:"f64.neg",155:"f64.ceil",156:"f64.floor",157:"f64.trunc",158:"f64.nearest",159:"f64.sqrt",160:"f64.add",161:"f64.sub",162:"f64.mul",163:"f64.div",164:"f64.min",165:"f64.max",166:"f64.copysign",167:"i32.wrap/i64",168:"i32.trunc_s/f32",169:"i32.trunc_u/f32",170:"i32.trunc_s/f64",171:"i32.trunc_u/f64",172:"i64.extend_s/i32",173:"i64.extend_u/i32",174:"i64.trunc_s/f32",175:"i64.trunc_u/f32",176:"i64.trunc_s/f64",177:"i64.trunc_u/f64",178:"f32.convert_s/i32",179:"f32.convert_u/i32",180:"f32.convert_s/i64",181:"f32.convert_u/i64",182:"f32.demote/f64",183:"f64.convert_s/i32",184:"f64.convert_u/i32",185:"f64.convert_s/i64",186:"f64.convert_u/i64",187:"f64.promote/f32",188:"i32.reinterpret/f32",189:"i64.reinterpret/f64",190:"f32.reinterpret/i32",191:"f64.reinterpret/i64"},p=o.SECTION_IDS={0:"custom",1:"type",2:"import",3:"function",4:"table",5:"memory",6:"global",7:"export",8:"start",9:"element",10:"code",11:"data"};o.immediataryParsers={varuint1:e=>{return e.read(1)[0]},varuint32:e=>{return n.unsigned.read(e)},varint32:e=>{return n.signed.read(e)},varint64:e=>{return n.signed.read(e)},uint32:e=>[...e.read(4)],uint64:e=>[...e.read(8)],block_type:e=>{const t=e.read(1)[0];return s[t]},br_table:e=>{const t={targets:[]},r=n.unsigned.readBn(e).toNumber();for(let i=0;i<r;i++){const r=n.unsigned.readBn(e).toNumber();t.targets.push(r)}return t.defaultTarget=n.unsigned.readBn(e).toNumber(),t},call_indirect:e=>{const t={};return t.index=n.unsigned.readBn(e).toNumber(),t.reserved=e.read(1)[0],t},memory_immediate:e=>{const t={};return t.flags=n.unsigned.readBn(e).toNumber(),t.offset=n.unsigned.readBn(e).toNumber(),t}},o.typeParsers={function:e=>n.unsigned.readBn(e).toNumber(),table:e=>{const t={},r=e.read(1)[0];return t.elementType=s[r],t.limits=o.typeParsers.memory(e),t},global:e=>{const t={};let r=e.read(1)[0];return t.contentType=s[r],t.mutability=e.read(1)[0],t},memory:e=>{const t={};return t.flags=n.unsigned.readBn(e).toNumber(),t.intial=n.unsigned.readBn(e).toNumber(),1===t.flags&&(t.maximum=n.unsigned.readBn(e).toNumber()),t},initExpr:e=>{const t=o.parseOp(e);return e.read(1),t}};const l=o.sectionParsers={custom:(e,r)=>{const a={name:"custom"},o=new i(e.read(r.size)),s=n.unsigned.readBn(o).toNumber(),c=o.read(s);return a.sectionName=t.from(c).toString(),a.payload=[...o.buffer],a},type:e=>{const t=n.unsigned.readBn(e).toNumber(),r={name:"type",entries:[]};for(let i=0;i<t;i++){let t=e.read(1)[0];const i={form:s[t],params:[]},a=n.unsigned.readBn(e).toNumber();for(let t=0;t<a;t++){const t=e.read(1)[0];i.params.push(s[t])}n.unsigned.readBn(e).toNumber()&&(t=e.read(1)[0],i.return_type=s[t]),r.entries.push(i)}return r},import:e=>{const r=n.unsigned.readBn(e).toNumber(),i={name:"import",entries:[]};for(let a=0;a<r;a++){const r={},a=n.unsigned.readBn(e).toNumber();r.moduleStr=t.from(e.read(a)).toString();const s=n.unsigned.readBn(e).toNumber();r.fieldStr=t.from(e.read(s)).toString();const u=e.read(1)[0];r.kind=c[u],r.type=o.typeParsers[r.kind](e),i.entries.push(r)}return i},function:e=>{const t=n.unsigned.readBn(e).toNumber(),r={name:"function",entries:[]};for(let i=0;i<t;i++){const t=n.unsigned.readBn(e).toNumber();r.entries.push(t)}return r},table:e=>{const t=n.unsigned.readBn(e).toNumber(),r={name:"table",entries:[]};for(let n=0;n<t;n++){const t=o.typeParsers.table(e);r.entries.push(t)}return r},memory:e=>{const t=n.unsigned.readBn(e).toNumber(),r={name:"memory",entries:[]};for(let n=0;n<t;n++){const t=o.typeParsers.memory(e);r.entries.push(t)}return r},global:e=>{const t=n.unsigned.readBn(e).toNumber(),r={name:"global",entries:[]};for(let n=0;n<t;n++){const t={};t.type=o.typeParsers.global(e),t.init=o.typeParsers.initExpr(e),r.entries.push(t)}return r},export:e=>{const r=n.unsigned.readBn(e).toNumber(),i={name:"export",entries:[]};for(let a=0;a<r;a++){const r=n.unsigned.readBn(e).toNumber(),a={};a.field_str=t.from(e.read(r)).toString();const o=e.read(1)[0];a.kind=c[o],a.index=n.unsigned.readBn(e).toNumber(),i.entries.push(a)}return i},start:e=>{const t={name:"start"};return t.index=n.unsigned.readBn(e).toNumber(),t},element:e=>{const t=n.unsigned.readBn(e).toNumber(),r={name:"element",entries:[]};for(let i=0;i<t;i++){const t={elements:[]};t.index=n.unsigned.readBn(e).toNumber(),t.offset=o.typeParsers.initExpr(e);const i=n.unsigned.readBn(e).toNumber();for(let r=0;r<i;r++){const r=n.unsigned.readBn(e).toNumber();t.elements.push(r)}r.entries.push(t)}return r},code:e=>{const t=n.unsigned.readBn(e).toNumber(),r={name:"code",entries:[]};for(let i=0;i<t;i++){const t={locals:[],code:[]};let i=n.unsigned.readBn(e).toNumber();const a=e.bytesRead+i,c=n.unsigned.readBn(e).toNumber();for(let r=0;r<c;r++){const r={};r.count=n.unsigned.readBn(e).toNumber();const i=e.read(1)[0];r.type=s[i],t.locals.push(r)}for(;e.bytesRead<a;){const r=o.parseOp(e);t.code.push(r)}r.entries.push(t)}return r},data:e=>{const t=n.unsigned.readBn(e).toNumber(),r={name:"data",entries:[]};for(let i=0;i<t;i++){const t={};t.index=n.unsigned.readBn(e).toNumber(),t.offset=o.typeParsers.initExpr(e);const i=n.unsigned.readBn(e).toNumber();t.data=[...e.read(i)],r.entries.push(t)}return r}};o.parseOp=(e=>{const t={},r=e.read(1)[0],n=u[r];let[i,s]=n.split(".");void 0===s?s=i:t.return_type=i,t.name=s;const c=a["const"===s?i:s];return c&&(t.immediates=o.immediataryParsers[c](e)),t}),o.parse=((e,t)=>{const r=[],n=o.parsePreramble(e);for(t&&!t.has("preramble")||r.push(n);!e.end;){const n=o.parseSectionHeader(e);!t||t.has(n.name)?r.push(l[n.name](e,n)):e.read(n.size)}return r})}).call(this,r(15).Buffer)},function(e,t,r){t.wasm2json=r(26),t.json2wasm=r(25),t.text2json=r(24),t.findSections=function*(e,t){let r=e[0],n=0;const i=new Set(t);let a=t.shift();for(;r;)i.has(r.sectionName||r.name)?((r.sectionName||r.name)===a?(yield r,r=e[++n]):yield,a=t.shift()):r=e[++n]}},function(e,t,r){const n=r(14),i=r(13);function a(e){return o(e).toString()}function o(e){const t=new n(0);let r,i=0;for(;r=e.read(1)[0],t.ior(new n(127&r).shln(i)),i+=7,r>>7!=0;);return 64&r&&t.setn(i),t.fromTwos(i)}function s(e,t){let r=new n(e);const i=r.isNeg();for(i&&(r=r.toTwos(r.bitLength()+8));;){const e=r.maskn(7).toNumber();if(r.ishrn(7),a(r)&&0!=(64&e)||r.isZero()&&0==(64&e)){t.write([e]);break}t.write([128|e])}function a(e){return i&&e.toString(2).indexOf("0")<0}}e.exports={encode:function(e){const t=new i;return s(e,t),t.buffer},decode:function(e){return a(new i(e))},write:s,read:a,readBn:o}},function(e,t){},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){const n=r(14),i=r(13);function a(e){return o(e).toString()}function o(e){const t=new n(0);let r,i=0;for(;r=e.read(1)[0],t.ior(new n(127&r).shln(i)),r>>7!=0;)i+=7;return t}function s(e,t){const r=new n(e);for(;;){const e=r.maskn(7).toNumber();if(r.ishrn(7),r.isZero()){t.write([e]);break}t.write([128|e])}}e.exports={encode:function(e){const t=new i;return s(e,t),t.buffer},decode:function(e){return a(new i(e))},read:a,readBn:o,write:s}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,c=(1<<s)-1,u=c>>1,p=-7,l=r?i-1:0,h=r?-1:1,d=e[t+l];for(l+=h,a=d&(1<<-p)-1,d>>=-p,p+=s;p>0;a=256*a+e[t+l],l+=h,p-=8);for(o=a&(1<<-p)-1,a>>=-p,p+=n;p>0;o=256*o+e[t+l],l+=h,p-=8);if(0===a)a=1-u;else{if(a===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=u}return(d?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,c,u=8*a-i-1,p=(1<<u)-1,l=p>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,f=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=p):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+l>=1?h/c:h*Math.pow(2,1-l))*c>=2&&(o++,c/=2),o+l>=p?(s=0,o=p):o+l>=1?(s=(t*c-1)*Math.pow(2,i),o+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=f,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[r+d]=255&o,d+=f,o/=256,u-=8);e[r+d-f]|=128*_}},function(e,t,r){"use strict";t.byteLength=function(e){return 3*e.length/4-u(e)},t.toByteArray=function(e){var t,r,n,o,s,c=e.length;o=u(e),s=new a(3*c/4-o),r=o>0?c-4:c;var p=0;for(t=0;t<r;t+=4)n=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],s[p++]=n>>16&255,s[p++]=n>>8&255,s[p++]=255&n;2===o?(n=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,s[p++]=255&n):1===o&&(n=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,s[p++]=n>>8&255,s[p++]=255&n);return s},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a="",o=[],s=0,c=r-i;s<c;s+=16383)o.push(p(e,s,s+16383>c?c:s+16383));1===i?(t=e[r-1],a+=n[t>>2],a+=n[t<<4&63],a+="=="):2===i&&(t=(e[r-2]<<8)+e[r-1],a+=n[t>>10],a+=n[t>>4&63],a+=n[t<<2&63],a+="=");return o.push(a),o.join("")};for(var n=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=o.length;s<c;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function p(e,t,r){for(var i,a,o=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t,r){const n=r(9),i=r(6).Buffer,a=r(8),{findSections:o}=r(27),s=96,c={i32:127,i64:126,f32:125,f64:124,anyref:112,module:111,func:110,data:109,elem:108,link:107,id:106},u={127:"i32",126:"i64",125:"f32",124:"f64",112:"anyref",111:"module",110:"func",109:"data",108:"elem",107:"link",106:"id"},p={0:"func",1:"table",2:"memory",3:"global"},l={func:0,table:1,memory:2,global:3};function h(e){const t=new n;return d("types",e,t,g),d("typeMap",e,t,m),d("persist",e,t,f),t.buffer}function d(e,t,r,i){let o=new n;return(t=t[e])&&(r.write([0]),a.unsigned.write(e.length,o),o.write(e),i(t,o),a.unsigned.write(o.bytesWrote,r),r.write(o.buffer)),r}function f(e,t=new n){a.unsigned.write(e.length,t);for(const r of e){const e=l[r.form];a.unsigned.write(e,t),a.unsigned.write(r.index,t),a.unsigned.write(c[r.type],t)}return t.buffer}function _(e){const t=new n(i.from(e));let r=a.unsigned.read(t);const o=[];for(;r--;){const e=p[a.unsigned.readBn(t).toNumber()];if(!e)throw new Error("invalid form");const r=a.unsigned.readBn(t).toNumber(),n=u[a.unsigned.readBn(t).toNumber()];if(!n)throw new Error("invalid param");o.push({form:e,index:r,type:n})}if(t.buffer.length)throw new Error("invalid buffer length");return o}function m(e,t=new n){a.unsigned.write(e.length,t);for(let r of e)a.unsigned.write(r.func,t),a.unsigned.write(r.type,t);return t.buffer}function y(e){const t=new n(i.from(e));let r=a.unsigned.read(t);const o=[];for(;r--;)o.push({func:a.unsigned.readBn(t).toNumber(),type:a.unsigned.readBn(t).toNumber()});if(t.buffer.length)throw new Error("invalid buffer length");return o}function g(e,t=new n){let r=new n;a.unsigned.write(e.length,r);for(let t of e){r.write([s]);const e=t.params.length;a.unsigned.write(e,r),r.write(t.params.map(e=>c[e])),r.write([0])}return t.write(r.buffer),t.buffer}function E(e){const t=new n(i.from(e)),r=a.unsigned.readBn(t).toNumber(),o=[];for(let e=0;e<r;e++){if(t.read(1)[0]!==s)throw new Error("invalid form");const e={form:"func",params:[]};let r=a.unsigned.readBn(t).toNumber();for(;r--;){const r=t.read(1)[0],n=u[r];if(!n)throw new Error("invalid param");e.params.push(n)}a.unsigned.readBn(t),o.push(e)}if(t.buffer.length)throw new Error("invalid buffer length");return o}function T(e,t){const r=t.subarray(0,8),n=t.subarray(8);return i.concat([i.from(r),i.from(e),i.from(n)])}e.exports={injectCustomSection:T,encodeAndInject:function(e,t){return T(h(e),t)},decodeType:E,decodeTypeMap:y,decodePersist:_,encodeType:g,encodeTypeMap:m,encodePersist:f,encode:h,mergeTypeSections:function(e){const t={types:[],indexes:{},exports:{},persist:[]},r=o(e,["types","typeMap","persist","type","import","function","export"]),n=new Map,i=new Map,{value:a}=r.next();if(a){const e=E(a.payload);t.types=e}let{value:s}=r.next();s&&y(s.payload).forEach(e=>n.set(e.func,e.type));let{value:c}=r.next();c&&(t.persist=_(c.payload));const{value:u}=r.next(),{value:p={entries:[]}}=r.next(),{value:l={entries:[]}}=r.next();l.entries.forEach((e,r)=>{const a=u.entries[e];if(a.return_type)throw new Error("no return types allowed");let o=n.get(r);if(void 0===o)o=i.get(e);else{if(t.types[o].params.length!==a.params.length)throw new Error("invalid param length");if(!a.params.every(e=>"i32"===e))throw new Error("invalid base param type")}void 0===o&&(o=t.types.push(a)-1,i.set(e,o)),t.indexes[r+p.entries.length]=o});const{value:h={entries:[]}}=r.next();return h.entries.forEach(e=>{"function"===e.kind&&(t.exports[e.field_str]=e.index)}),t},LANGUAGE_TYPES_BIN:u,LANGUAGE_TYPES_STRG:c}},function(e,t,r){"use strict";function n(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24}function i(e,t,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function a(e,t){var r=n(e,t),i=n(e,t+4);return i64_new(r,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.readI32=n,t.writeI32=i,t.readI64=a,t.writeI64=function(e,t,r){i(i64_low(e),t,r),i(i64_high(e),t,r+4)},t.readF32=function(e,t){return i32_as_f32(n(e,t))},t.writeF32=function(e,t,r){i(f32_as_i32(e),t,r)},t.readF64=function(e,t){return i64_as_f64(a(e,t))},t.writeF64=function(e,t,r){var n=f64_as_i64(e);i(i64_low(n),t,r),i(i64_high(n),t,r+4)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="  ",i="    ",a="        ";t.indent=function(e,t){for(;t>=4;)e.push(a),t-=4;t>=2&&(e.push(i),t-=2),t&&e.push(n)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=47;function i(e){for(var t,r=0,i=e.length;r+1<i&&46==e.charCodeAt(r)&&e.charCodeAt(r+1)==n;)r+=2;for((r>0||i<e.length)&&(e=e.substring(r,i),i-=r,r=0);r+1<i;){if(t=!1,e.charCodeAt(r)==n&&46==e.charCodeAt(r+1)){if((t=r+2==i)||r+2<i&&e.charCodeAt(r+2)==n){e=t?e.substring(0,r):e.substring(0,r)+e.substring(r+2),i-=2;continue}if((t=r+3==i)&&46==e.charCodeAt(r+2)||r+3<i&&46==e.charCodeAt(r+2)&&e.charCodeAt(r+3)==n){for(var a=r;--a>=0;)if(e.charCodeAt(a)==n){r-a==3&&46==e.charCodeAt(a+1)&&46==e.charCodeAt(a+2)||(e=t?e.substring(0,a):e.substring(0,a)+e.substring(r+3),i-=r+3-a,r=a-1);break}if(a<0&&r>0&&(2!=r||46!=e.charCodeAt(0)||46!=e.charCodeAt(1))){i=(e=e.substring(r+4)).length;continue}}}r++}return i>0?e:"."}function a(e){for(var t=e.length;--t>0;)if(e.charCodeAt(t)==n)return e.substring(0,t);return"."}t.normalizePath=i,t.resolvePath=function(e,t){return e.startsWith("std/")?e:i(a(t)+String.fromCharCode(n)+e)},t.dirname=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NULL=0]="NULL",e[e.LINEFEED=10]="LINEFEED",e[e.CARRIAGERETURN=13]="CARRIAGERETURN",e[e.LINESEPARATOR=8232]="LINESEPARATOR",e[e.PARAGRAPHSEPARATOR=8233]="PARAGRAPHSEPARATOR",e[e.NEXTLINE=133]="NEXTLINE",e[e.SPACE=32]="SPACE",e[e.NONBREAKINGSPACE=160]="NONBREAKINGSPACE",e[e.ENQUAD=8192]="ENQUAD",e[e.EMQUAD=8193]="EMQUAD",e[e.ENSPACE=8194]="ENSPACE",e[e.EMSPACE=8195]="EMSPACE",e[e.THREEPEREMSPACE=8196]="THREEPEREMSPACE",e[e.FOURPEREMSPACE=8197]="FOURPEREMSPACE",e[e.SIXPEREMSPACE=8198]="SIXPEREMSPACE",e[e.FIGURESPACE=8199]="FIGURESPACE",e[e.PUNCTUATIONSPACE=8200]="PUNCTUATIONSPACE",e[e.THINSPACE=8201]="THINSPACE",e[e.HAIRSPACE=8202]="HAIRSPACE",e[e.ZEROWIDTHSPACE=8203]="ZEROWIDTHSPACE",e[e.NARROWNOBREAKSPACE=8239]="NARROWNOBREAKSPACE",e[e.IDEOGRAPHICSPACE=12288]="IDEOGRAPHICSPACE",e[e.MATHEMATICALSPACE=8287]="MATHEMATICALSPACE",e[e.OGHAM=5760]="OGHAM",e[e._=95]="_",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.AMPERSAND=38]="AMPERSAND",e[e.ASTERISK=42]="ASTERISK",e[e.AT=64]="AT",e[e.BACKSLASH=92]="BACKSLASH",e[e.BACKTICK=96]="BACKTICK",e[e.BAR=124]="BAR",e[e.CARET=94]="CARET",e[e.CLOSEBRACE=125]="CLOSEBRACE",e[e.CLOSEBRACKET=93]="CLOSEBRACKET",e[e.CLOSEPAREN=41]="CLOSEPAREN",e[e.COLON=58]="COLON",e[e.COMMA=44]="COMMA",e[e.DOLLAR=36]="DOLLAR",e[e.DOT=46]="DOT",e[e.DOUBLEQUOTE=34]="DOUBLEQUOTE",e[e.EQUALS=61]="EQUALS",e[e.EXCLAMATION=33]="EXCLAMATION",e[e.GREATERTHAN=62]="GREATERTHAN",e[e.HASH=35]="HASH",e[e.LESSTHAN=60]="LESSTHAN",e[e.MINUS=45]="MINUS",e[e.OPENBRACE=123]="OPENBRACE",e[e.OPENBRACKET=91]="OPENBRACKET",e[e.OPENPAREN=40]="OPENPAREN",e[e.PERCENT=37]="PERCENT",e[e.PLUS=43]="PLUS",e[e.QUESTION=63]="QUESTION",e[e.SEMICOLON=59]="SEMICOLON",e[e.SINGLEQUOTE=39]="SINGLEQUOTE",e[e.SLASH=47]="SLASH",e[e.TILDE=126]="TILDE",e[e.BACKSPACE=8]="BACKSPACE",e[e.FORMFEED=12]="FORMFEED",e[e.BYTEORDERMARK=65279]="BYTEORDERMARK",e[e.TAB=9]="TAB",e[e.VERTICALTAB=11]="VERTICALTAB"}(t.CharCode||(t.CharCode={})),t.isLineBreak=function(e){switch(e){case 10:case 13:case 8232:case 8233:return!0;default:return!1}},t.isWhiteSpace=function(e){switch(e){case 32:case 9:case 11:case 12:case 160:case 133:case 5760:case 8239:case 8287:case 12288:case 65279:return!0;default:return e>=8192&&e<=8203}},t.isDecimalDigit=function(e){return e>=48&&e<=57},t.isOctalDigit=function(e){return e>=48&&e<=55},t.isIdentifierStart=function(e){return e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>127&&!((t=e)<0||t>65535)&&a(t,n);var t},t.isKeywordCharacter=function(e){return e>=97&&e<=122},t.isIdentifierPart=function(e){return e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||36==e||95==e||e>127&&!((t=e)<0||t>65535)&&a(t,i);var t};var n=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2208,2208,2210,2220,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7413,7414,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],i=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1319,1329,1366,1369,1369,1377,1415,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1520,1522,1552,1562,1568,1641,1646,1747,1749,1756,1759,1768,1770,1788,1791,1791,1808,1866,1869,1969,1984,2037,2042,2042,2048,2093,2112,2139,2208,2208,2210,2220,2276,2302,2304,2403,2406,2415,2417,2423,2425,2431,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2902,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3140,3142,3144,3146,3149,3157,3158,3160,3161,3168,3171,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3299,3302,3311,3313,3314,3330,3331,3333,3340,3342,3344,3346,3386,3389,3396,3398,3400,3402,3406,3415,3415,3424,3427,3430,3439,3450,3455,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5908,5920,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6157,6160,6169,6176,6263,6272,6314,6320,6389,6400,6428,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6912,6987,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7376,7378,7380,7414,7424,7654,7676,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8204,8205,8255,8256,8276,8276,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42647,42655,42737,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43047,43072,43123,43136,43204,43216,43225,43232,43255,43259,43259,43264,43309,43312,43347,43360,43388,43392,43456,43471,43481,43520,43574,43584,43597,43600,43609,43616,43638,43642,43643,43648,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65062,65075,65076,65101,65103,65136,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500];function a(e,t){if(e<t[0])return!1;for(var r,n=0,i=t.length;n+1<i;){if(r=n+(i-n)/2,t[r-=r%2]<=e&&e<=t[r+1])return!0;e<t[r]?i=r:n=r+2}return!1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=r(2),a=r(4),o=r(11),s=r(3),c=r(0);function u(e,t,r,n){if(0==r.length)return t&&1==t.length?t[0]:(e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,n.range,"1",t?t.length.toString(10):"0"),null);if(1==r.length){if(t)if(1==t.length)e.compileExpression(r[0],t[0],1,!1);else{if(t.length)return e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,n.range,"1",t.length.toString(10)),null;e.compileExpressionRetainType(r[0],o.Type.i32,!1)}else e.compileExpressionRetainType(r[0],o.Type.i32,!1);return e.currentType}return t&&t.length>1&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,n.range,"1",t.length.toString(10)),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,n.range,"1",r.length.toString(10)),null}function p(e,t){var r,n;return e.options.isWasm64?(r=e.precomputeExpression(t,o.Type.usize64),(_BinaryenExpressionGetId(r)!=s.ExpressionId.Const||_BinaryenExpressionGetType(r)!=s.NativeType.I64||0!=_BinaryenConstGetValueI64High(r)||(n=_BinaryenConstGetValueI64Low(r))<0)&&(e.error(i.DiagnosticCode.Operation_not_supported,t.range),n=-1)):(r=e.precomputeExpression(t,o.Type.usize32),(_BinaryenExpressionGetId(r)!=s.ExpressionId.Const||_BinaryenExpressionGetType(r)!=s.NativeType.I32||(n=_BinaryenConstGetValueI32(r))<0)&&(e.error(i.DiagnosticCode.Operation_not_supported,t.range),n=-1)),n}t.compileGetConstant=function(e,t,r){switch(t.internalName){case"NaN":return e.currentType==o.Type.f32?e.module.createF32(NaN):(e.currentType=o.Type.f64,e.module.createF64(NaN));case"Infinity":return e.currentType==o.Type.f32?e.module.createF32(1/0):(e.currentType=o.Type.f64,e.module.createF64(1/0));case"HEAP_BASE":return e.currentType=e.options.usizeType,e.module.createGetGlobal("HEAP_BASE",e.currentType.toNativeType())}return e.error(i.DiagnosticCode.Operation_not_supported,r.range),e.module.createUnreachable()},t.compileCall=function(e,t,r,l,h,f){var _,m,y,g,E=e.module;switch(t.internalName){case"isInteger":var T=u(e,r,l,f);return e.currentType=o.Type.bool,T?T.is(4)&&!T.is(256)?E.createI32(1):E.createI32(0):E.createUnreachable();case"isFloat":return T=u(e,r,l,f),e.currentType=o.Type.bool,T?T.is(8)?E.createI32(1):E.createI32(0):E.createUnreachable();case"isReference":return T=u(e,r,l,f),e.currentType=o.Type.bool,T?(e.currentType=o.Type.bool,T.is(256)?E.createI32(1):E.createI32(0)):E.createUnreachable();case"isString":if(T=u(e,r,l,f),e.currentType=o.Type.bool,!T)return E.createUnreachable();if(S=T.classReference){var v=e.program.stringInstance;if(v&&S.isAssignableTo(v))return E.createI32(1)}return E.createI32(0);case"isArray":return T=u(e,r,l,f),e.currentType=o.Type.bool,T?null!=(S=T.classReference)&&null!=S.prototype.fnIndexedGet?E.createI32(1):E.createI32(0):E.createUnreachable();case"isNaN":if(e.currentType=o.Type.bool,1!=l.length)return r&&1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.f64,0);switch(e.currentType.kind){case 11:var A=e.currentFunction.getAndFreeTempLocal(o.Type.f32);g=E.createBinary(s.BinaryOp.NeF32,E.createTeeLocal(A.index,_),E.createGetLocal(A.index,s.NativeType.F32));break;case 12:A=e.currentFunction.getAndFreeTempLocal(o.Type.f64),g=E.createBinary(s.BinaryOp.NeF64,E.createTeeLocal(A.index,_),E.createGetLocal(A.index,s.NativeType.F64));break;case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break;default:g=E.createI32(0)}return e.currentType=o.Type.bool,g;case"isFinite":if(e.currentType=o.Type.bool,1!=l.length)return r&&1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.f64,0);switch(e.currentType.kind){case 11:A=e.currentFunction.getAndFreeTempLocal(o.Type.f32),g=E.createSelect(E.createBinary(s.BinaryOp.NeF32,E.createUnary(s.UnaryOp.AbsF32,E.createTeeLocal(A.index,_)),E.createF32(1/0)),E.createI32(0),E.createBinary(s.BinaryOp.EqF32,E.createGetLocal(A.index,s.NativeType.F32),E.createGetLocal(A.index,s.NativeType.F32)));break;case 12:A=e.currentFunction.getAndFreeTempLocal(o.Type.f64),g=E.createSelect(E.createBinary(s.BinaryOp.NeF64,E.createUnary(s.UnaryOp.AbsF64,E.createTeeLocal(A.index,_)),E.createF64(1/0)),E.createI32(0),E.createBinary(s.BinaryOp.EqF64,E.createGetLocal(A.index,s.NativeType.F64),E.createGetLocal(A.index,s.NativeType.F64)));break;case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break;default:g=E.createI32(1)}return e.currentType=o.Type.bool,g;case"clz":if(1!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.i32,0);switch(e.currentType.kind){default:g=E.createUnary(s.UnaryOp.ClzI32,_);break;case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}case 4:g=E.createUnary(e.options.isWasm64?s.UnaryOp.ClzI64:s.UnaryOp.ClzI32,_);break;case 3:case 8:g=E.createUnary(s.UnaryOp.ClzI64,_);break;case 11:case 12:case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"ctz":if(1!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.i32,0);switch(e.currentType.kind){default:g=E.createUnary(s.UnaryOp.CtzI32,_);break;case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}case 4:g=E.createUnary(e.options.isWasm64?s.UnaryOp.CtzI64:s.UnaryOp.CtzI32,_);break;case 3:case 8:g=E.createUnary(s.UnaryOp.CtzI64,_);break;case 11:case 12:case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"popcnt":if(1!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.i32,0);switch(e.currentType.kind){default:g=E.createUnary(s.UnaryOp.PopcntI32,_);break;case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}case 4:g=E.createUnary(e.options.isWasm64?s.UnaryOp.PopcntI64:s.UnaryOp.PopcntI32,_);break;case 3:case 8:g=E.createUnary(s.UnaryOp.PopcntI64,_);break;case 11:case 12:case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"rotl":if(2!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"2",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.i32,0);switch(m=e.compileExpression(l[1],e.currentType),e.currentType.kind){case 0:case 1:case 5:case 6:case 10:g=n.makeSmallIntegerWrap(E.createBinary(s.BinaryOp.RotlI32,_,m),e.currentType,E);case 2:case 7:g=E.createBinary(s.BinaryOp.RotlI32,_,m);break;case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}case 4:g=E.createBinary(e.options.isWasm64?s.BinaryOp.RotlI64:s.BinaryOp.RotlI32,_,m);break;case 3:case 8:g=E.createBinary(s.BinaryOp.RotlI64,_,m);break;default:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"rotr":if(2!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"2",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.i32,0);switch(m=e.compileExpression(l[1],e.currentType),e.currentType.kind){case 0:case 1:case 5:case 6:case 10:g=n.makeSmallIntegerWrap(E.createBinary(s.BinaryOp.RotrI32,_,m),e.currentType,E);break;case 2:case 7:g=E.createBinary(s.BinaryOp.RotrI32,_,m);break;case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}case 4:g=E.createBinary(e.options.isWasm64?s.BinaryOp.RotrI64:s.BinaryOp.RotrI32,_,m);break;case 3:case 8:g=E.createBinary(s.BinaryOp.RotrI64,_,m);break;default:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"abs":if(1!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.f64,0);switch(e.currentType.kind){case 0:case 1:case 2:A=e.currentFunction.getAndFreeTempLocal(o.Type.i32),g=E.createSelect(E.createTeeLocal(A.index,_),E.createBinary(s.BinaryOp.SubI32,E.createI32(0),E.createGetLocal(A.index,s.NativeType.I32)),E.createBinary(s.BinaryOp.GtI32,E.createGetLocal(A.index,s.NativeType.I32),E.createI32(0)));break;case 4:A=e.currentFunction.getAndFreeTempLocal(e.options.usizeType),g=E.createSelect(E.createTeeLocal(A.index,_),E.createBinary(e.options.isWasm64?s.BinaryOp.SubI64:s.BinaryOp.SubI32,e.options.usizeType.toNativeZero(E),E.createGetLocal(A.index,e.options.nativeSizeType)),E.createBinary(e.options.isWasm64?s.BinaryOp.GtI64:s.BinaryOp.GtI32,E.createGetLocal(A.index,e.options.nativeSizeType),e.options.usizeType.toNativeZero(E)));break;case 3:A=e.currentFunction.getAndFreeTempLocal(o.Type.i64),g=E.createSelect(E.createTeeLocal(A.index,_),E.createBinary(s.BinaryOp.SubI64,E.createI64(0,0),E.createGetLocal(A.index,s.NativeType.I64)),E.createBinary(s.BinaryOp.GtI64,E.createGetLocal(A.index,s.NativeType.I64),E.createI64(0,0)));break;case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}case 5:case 6:case 7:case 8:case 10:g=_;break;case 11:g=E.createUnary(s.UnaryOp.AbsF32,_);break;case 12:g=E.createUnary(s.UnaryOp.AbsF64,_);break;case 13:g=E.createUnreachable();break;default:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"max":if(2!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"2",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.f64,0);switch(m=e.compileExpression(l[1],e.currentType),e.currentType.kind){case 0:case 1:case 2:var I=e.currentFunction.getTempLocal(o.Type.i32),b=e.currentFunction.getAndFreeTempLocal(o.Type.i32);e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(s.BinaryOp.GtI32,E.createGetLocal(I.index,s.NativeType.I32),E.createGetLocal(b.index,s.NativeType.I32)));break;case 5:case 6:case 7:case 10:I=e.currentFunction.getTempLocal(o.Type.i32),b=e.currentFunction.getAndFreeTempLocal(o.Type.i32),e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(s.BinaryOp.GtU32,E.createGetLocal(I.index,s.NativeType.I32),E.createGetLocal(b.index,s.NativeType.I32)));break;case 3:I=e.currentFunction.getTempLocal(o.Type.i64),b=e.currentFunction.getAndFreeTempLocal(o.Type.i64),e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(s.BinaryOp.GtI64,E.createGetLocal(I.index,s.NativeType.I64),E.createGetLocal(b.index,s.NativeType.I64)));break;case 8:I=e.currentFunction.getTempLocal(o.Type.i64),b=e.currentFunction.getAndFreeTempLocal(o.Type.i64),e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(s.BinaryOp.GtU64,E.createGetLocal(I.index,s.NativeType.I64),E.createGetLocal(b.index,s.NativeType.I64)));break;case 4:I=e.currentFunction.getTempLocal(e.options.usizeType),b=e.currentFunction.getAndFreeTempLocal(e.options.usizeType),e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(e.options.isWasm64?s.BinaryOp.GtI64:s.BinaryOp.GtI32,E.createGetLocal(I.index,e.options.nativeSizeType),E.createGetLocal(b.index,e.options.nativeSizeType)));break;case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}I=e.currentFunction.getTempLocal(e.options.usizeType),b=e.currentFunction.getAndFreeTempLocal(e.options.usizeType),e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(e.options.isWasm64?s.BinaryOp.GtU64:s.BinaryOp.GtU32,E.createGetLocal(I.index,e.options.nativeSizeType),E.createGetLocal(b.index,e.options.nativeSizeType)));break;case 11:g=E.createBinary(s.BinaryOp.MaxF32,_,m);break;case 12:g=E.createBinary(s.BinaryOp.MaxF64,_,m);break;default:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"min":if(2!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"2",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.f64,0);switch(m=e.compileExpression(l[1],e.currentType),e.currentType.kind){case 0:case 1:case 2:I=e.currentFunction.getTempLocal(o.Type.i32),b=e.currentFunction.getAndFreeTempLocal(o.Type.i32),e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(s.BinaryOp.LtI32,E.createGetLocal(I.index,s.NativeType.I32),E.createGetLocal(b.index,s.NativeType.I32)));break;case 5:case 6:case 7:case 10:I=e.currentFunction.getTempLocal(o.Type.i32),b=e.currentFunction.getAndFreeTempLocal(o.Type.i32),e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(s.BinaryOp.LtU32,E.createGetLocal(I.index,s.NativeType.I32),E.createGetLocal(b.index,s.NativeType.I32)));break;case 3:I=e.currentFunction.getTempLocal(o.Type.i64),b=e.currentFunction.getAndFreeTempLocal(o.Type.i64),e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(s.BinaryOp.LtI64,E.createGetLocal(I.index,s.NativeType.I64),E.createGetLocal(b.index,s.NativeType.I64)));break;case 8:I=e.currentFunction.getTempLocal(o.Type.i64),b=e.currentFunction.getAndFreeTempLocal(o.Type.i64),e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(s.BinaryOp.LtU64,E.createGetLocal(I.index,s.NativeType.I64),E.createGetLocal(b.index,s.NativeType.I64)));break;case 4:I=e.currentFunction.getTempLocal(e.options.usizeType),b=e.currentFunction.getAndFreeTempLocal(e.options.usizeType),e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(e.options.isWasm64?s.BinaryOp.LtI64:s.BinaryOp.LtI32,E.createGetLocal(I.index,e.options.nativeSizeType),E.createGetLocal(b.index,e.options.nativeSizeType)));break;case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}I=e.currentFunction.getTempLocal(e.options.usizeType),b=e.currentFunction.getAndFreeTempLocal(e.options.usizeType),e.currentFunction.freeTempLocal(I),g=E.createSelect(E.createTeeLocal(I.index,_),E.createTeeLocal(b.index,m),E.createBinary(e.options.isWasm64?s.BinaryOp.LtU64:s.BinaryOp.LtU32,E.createGetLocal(I.index,e.options.nativeSizeType),E.createGetLocal(b.index,e.options.nativeSizeType)));break;case 11:g=E.createBinary(s.BinaryOp.MinF32,_,m);break;case 12:g=E.createBinary(s.BinaryOp.MinF64,_,m);break;default:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"ceil":if(1!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.f64,0);switch(e.currentType.kind){case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}default:g=_;break;case 11:g=E.createUnary(s.UnaryOp.CeilF32,_);break;case 12:g=E.createUnary(s.UnaryOp.CeilF64,_);break;case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"floor":if(1!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.f64,0);switch(e.currentType.kind){case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}default:g=_;break;case 11:g=E.createUnary(s.UnaryOp.FloorF32,_);break;case 12:g=E.createUnary(s.UnaryOp.FloorF64,_);break;case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"copysign":if(2!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"2",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.f64,0);switch(m=e.compileExpression(l[1],e.currentType),e.currentType.kind){case 11:g=E.createBinary(s.BinaryOp.CopysignF32,_,m);break;case 12:g=E.createBinary(s.BinaryOp.CopysignF64,_,m);break;default:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"nearest":if(1!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.f64,0);switch(e.currentType.kind){case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}default:g=_;break;case 11:g=E.createUnary(s.UnaryOp.NearestF32,_);break;case 12:g=E.createUnary(s.UnaryOp.NearestF64,_);break;case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"reinterpret":if(1!=l.length)return r&&1==r.length||(r&&r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0")),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(!r||1!=r.length)return r&&r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0"),E.createUnreachable();switch(r[0].kind){case 2:case 7:_=e.compileExpression(l[0],o.Type.f32),g=E.createUnary(s.UnaryOp.ReinterpretF32,_);break;case 3:case 8:_=e.compileExpression(l[0],o.Type.f64),g=E.createUnary(s.UnaryOp.ReinterpretF64,_);break;case 9:if(r[0].is(256))return e.error(i.DiagnosticCode.Operation_not_supported,f.range),e.currentType=r[0],E.createUnreachable();case 4:_=e.compileExpression(l[0],e.options.isWasm64?o.Type.f64:o.Type.f32),g=E.createUnary(e.options.isWasm64?s.UnaryOp.ReinterpretF64:s.UnaryOp.ReinterpretF32,_);break;case 11:_=e.compileExpression(l[0],o.Type.u32),g=E.createUnary(s.UnaryOp.ReinterpretI32,_);break;case 12:_=e.compileExpression(l[0],o.Type.u64),g=E.createUnary(s.UnaryOp.ReinterpretI64,_);break;default:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return e.currentType=r[0],g;case"sqrt":if(1!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.f64,0);switch(e.currentType.kind){case 11:g=E.createUnary(s.UnaryOp.SqrtF32,_);break;case 12:g=E.createUnary(s.UnaryOp.SqrtF64,_);break;default:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"trunc":if(1!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(r&&r.length){if(e.currentType=r[0],1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.f64,0);switch(e.currentType.kind){case 9:if(e.currentType.is(256)){e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable();break}default:g=_;break;case 11:g=E.createUnary(s.UnaryOp.TruncF32,_);break;case 12:g=E.createUnary(s.UnaryOp.TruncF64,_);break;case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"load":return l.length<1||l.length>2?(r&&1==r.length||e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0"),l.length<1?e.error(i.DiagnosticCode.Expected_at_least_0_arguments_but_got_1,f.range,"1",l.length.toString(10)):e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"2",l.length.toString(10)),E.createUnreachable()):r&&1==r.length?(_=e.compileExpression(l[0],e.options.usizeType),(O=2==l.length?p(e,l[1]):0)<0?E.createUnreachable():(e.currentType=r[0],E.createLoad(r[0].byteSize,r[0].is(5),_,r[0].is(4)&&h.is(4)&&h.size>r[0].size?(e.currentType=h).toNativeType():(e.currentType=r[0]).toNativeType(),O))):(r&&r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0"),E.createUnreachable());case"store":return e.currentType=o.Type.void,l.length<2||l.length>3?(r&&1==r.length||e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0"),l.length<2?e.error(i.DiagnosticCode.Expected_at_least_0_arguments_but_got_1,f.range,"2",l.length.toString(10)):e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"3",l.length.toString(10)),E.createUnreachable()):r&&1==r.length?(_=e.compileExpression(l[0],e.options.usizeType),m=e.compileExpression(l[1],r[0],r[0].is(4)?0:1),T=void 0,e.currentType.is(4)&&r[0].is(4)&&r[0].size>e.currentType.size?(m=e.convertExpression(m,e.currentType,r[0],1,l[1]),T=r[0]):T=e.currentType,(O=3==l.length?p(e,l[2]):0)<0?E.createUnreachable():(e.currentType=o.Type.void,E.createStore(r[0].byteSize,_,m,T.toNativeType(),O))):(e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0"),E.createUnreachable());case"sizeof":if(e.currentType=e.options.usizeType,0!=l.length)return r&&1==r.length||e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0"),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"0",l.length.toString(10)),E.createUnreachable();r&&1==r.length||e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0");var N=r[0].byteSize;return e.options.isWasm64?h.is(4)&&h.size<=32?(e.currentType=o.Type.u32,g=E.createI32(N)):g=E.createI64(N,0):h.is(4)&&64==h.size?(e.currentType=o.Type.u64,g=E.createI64(N,0)):g=E.createI32(N),g;case"alignof":if(e.currentType=e.options.usizeType,0!=l.length)return r&&1==r.length||e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0"),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"0",l.length.toString(10)),E.createUnreachable();r&&1==r.length||e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0");var C=void 0;switch(N=r[0].byteSize){case 1:C=0;break;case 2:C=1;break;case 4:C=2;break;case 8:C=3;break;default:return assert(!1),E.createUnreachable()}return e.options.isWasm64?h.is(4)&&h.size<=32?(e.currentType=o.Type.u32,g=E.createI32(C)):g=E.createI64(C,0):h.is(4)&&64==h.size?(e.currentType=o.Type.u64,g=E.createI64(C,0)):g=E.createI32(C),g;case"offsetof":if(e.currentType=e.options.usizeType,l.length>1)return r&&1==r.length||e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0"),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),E.createUnreachable();if(!r||1!=r.length)return e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0"),E.createUnreachable();var S;if(!(S=r[0].classReference))return e.error(i.DiagnosticCode.Operation_not_supported,f.range),E.createUnreachable();var O=void 0;if(l.length){if(l[0].kind!=a.NodeKind.LITERAL||l[0].literalKind!=a.LiteralKind.STRING)return e.error(i.DiagnosticCode.String_literal_expected,l[0].range),E.createUnreachable();var k=l[0].value,L=S.members?S.members.get(k):null;if(!L||L.kind!=c.ElementKind.FIELD)return e.error(i.DiagnosticCode.Type_0_has_no_property_1,l[0].range,S.internalName,k),E.createUnreachable();O=L.memoryOffset}else O=S.currentMemoryOffset;return e.options.isWasm64?h.is(4)&&h.size<=32?(e.currentType=o.Type.u32,E.createI32(O)):E.createI64(O):h.is(4)&&64==h.size?(e.currentType=o.Type.u64,E.createI64(O)):E.createI32(O);case"select":if(3!=l.length)return r&&(r.length&&(e.currentType=r[0]),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"3",l.length.toString(10)),E.createUnreachable();if(r){if(1!=r.length)return r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpression(l[0],o.Type.i32,0);switch(T=e.currentType,m=e.compileExpression(l[1],T),y=e.compileExpression(l[2],o.Type.i32),e.currentType=T,e.currentType.kind){default:g=E.createSelect(_,m,y);break;case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=E.createUnreachable()}return g;case"unreachable":return 0!=l.length&&e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"0",l.length.toString(10)),r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),E.createUnreachable();case"current_memory":return e.currentType=o.Type.i32,0!=l.length&&e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"0",l.length.toString(10)),r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),E.createHost(s.HostOp.CurrentMemory);case"grow_memory":return e.currentType=o.Type.i32,1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"0",l.length.toString(10)),_=E.createUnreachable()):_=e.compileExpression(l[0],o.Type.i32),r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),E.createHost(s.HostOp.GrowMemory,null,[_]);case"move_memory":if(r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),3!=l.length)return e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"3",l.length.toString(10)),e.currentType=o.Type.void,E.createUnreachable();throw _=e.compileExpression(l[0],e.options.usizeType),m=e.compileExpression(l[1],e.options.usizeType),y=e.compileExpression(l[2],e.options.usizeType),e.currentType=o.Type.void,new Error("not implemented");case"set_memory":if(r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),3!=l.length)return e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"3",l.length.toString(10)),e.currentType=o.Type.void,E.createUnreachable();throw _=e.compileExpression(l[0],e.options.usizeType),m=e.compileExpression(l[1],o.Type.u32),y=e.compileExpression(l[2],e.options.usizeType),e.currentType=o.Type.void,new Error("not implemented");case"changetype":return r&&1==r.length?9!=r[0].kind?(e.error(i.DiagnosticCode.Operation_not_supported,f.range),e.currentType=r[0],E.createUnreachable()):1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=r[0],E.createUnreachable()):(_=e.compileExpression(l[0],e.options.usizeType,0),e.currentType=r[0],9!=e.currentType.kind?(e.error(i.DiagnosticCode.Operation_not_supported,f.range),E.createUnreachable()):_):(r&&r.length&&(e.currentType=r[0]),e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r?r.length.toString(10):"0"),E.createUnreachable());case"assert":if(l.length<1||l.length>2)return r&&(r.length&&(e.currentType=r[0].nonNullableType),1!=r.length&&e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10))),l.length<1?e.error(i.DiagnosticCode.Expected_at_least_0_arguments_but_got_1,f.range,"1",l.length.toString(10)):l.length>2&&e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"2",l.length.toString(10)),E.createUnreachable();if(r){if(r.length&&(e.currentType=r[0].nonNullableType),1!=r.length)return e.error(i.DiagnosticCode.Expected_0_type_arguments_but_got_1,f.range,"1",r.length.toString(10)),E.createUnreachable();_=e.compileExpression(l[0],r[0])}else _=e.compileExpressionRetainType(l[0],o.Type.i32);if(T=e.currentType,e.currentType=T.nonNullableType,e.options.noAssert)return h==o.Type.void?(e.currentType=o.Type.void,E.createNop()):_;var x=d(e,2==l.length?l[1]:null,f);if(e.currentType=T.nonNullableType,h==o.Type.void){switch(e.currentType.kind){default:g=E.createIf(E.createUnary(s.UnaryOp.EqzI32,_),x);break;case 3:case 8:g=E.createIf(E.createUnary(s.UnaryOp.EqzI64,_),x);break;case 4:case 9:g=E.createIf(E.createUnary(e.options.isWasm64?s.UnaryOp.EqzI64:s.UnaryOp.EqzI32,_),x);break;case 11:g=E.createIf(E.createBinary(s.BinaryOp.EqF32,_,E.createF32(0)),x);break;case 12:g=E.createIf(E.createBinary(s.BinaryOp.EqF64,_,E.createF64(0)),x);break;case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=x}e.currentType=o.Type.void}else switch(e.currentType.kind){default:A=e.currentFunction.getAndFreeTempLocal(o.Type.i32),g=E.createIf(E.createUnary(s.UnaryOp.EqzI32,E.createTeeLocal(A.index,_)),x,E.createGetLocal(A.index,s.NativeType.I32));break;case 3:case 8:A=e.currentFunction.getAndFreeTempLocal(o.Type.i64),g=E.createIf(E.createUnary(s.UnaryOp.EqzI64,E.createTeeLocal(A.index,_)),x,E.createGetLocal(A.index,s.NativeType.I64));break;case 4:case 9:A=e.currentFunction.getAndFreeTempLocal(e.options.usizeType),g=E.createIf(E.createUnary(e.options.isWasm64?s.UnaryOp.EqzI64:s.UnaryOp.EqzI32,E.createTeeLocal(A.index,_)),x,E.createGetLocal(A.index,e.options.nativeSizeType));break;case 11:A=e.currentFunction.getAndFreeTempLocal(o.Type.f32),g=E.createIf(E.createBinary(s.BinaryOp.EqF32,E.createTeeLocal(A.index,_),E.createF32(0)),x,E.createGetLocal(A.index,s.NativeType.F32));break;case 12:A=e.currentFunction.getAndFreeTempLocal(o.Type.f64),g=E.createIf(E.createBinary(s.BinaryOp.EqF64,E.createTeeLocal(A.index,_),E.createF64(0)),x,E.createGetLocal(A.index,s.NativeType.F64));break;case 13:e.error(i.DiagnosticCode.Operation_not_supported,f.range),g=x}return g;case"i8":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=o.Type.i8,E.createUnreachable()):e.compileExpression(l[0],o.Type.i8,2);case"i16":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=o.Type.i16,E.createUnreachable()):e.compileExpression(l[0],o.Type.i16,2);case"i32":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=o.Type.i32,E.createUnreachable()):e.compileExpression(l[0],o.Type.i32,2);case"i64":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=o.Type.i64,E.createUnreachable()):e.compileExpression(l[0],o.Type.i64,2);case"isize":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=e.options.isWasm64?o.Type.isize64:o.Type.isize32,E.createUnreachable()):e.compileExpression(l[0],e.options.isWasm64?o.Type.isize64:o.Type.isize32,2);case"u8":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=o.Type.u8,E.createUnreachable()):e.compileExpression(l[0],o.Type.u8,2);case"u16":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=o.Type.u16,E.createUnreachable()):e.compileExpression(l[0],o.Type.u16,2);case"u32":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=o.Type.u32,E.createUnreachable()):e.compileExpression(l[0],o.Type.u32,2);case"u64":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=o.Type.u64,E.createUnreachable()):e.compileExpression(l[0],o.Type.u64,2);case"usize":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=e.options.usizeType,E.createUnreachable()):e.compileExpression(l[0],e.options.usizeType,2);case"bool":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=o.Type.bool,E.createUnreachable()):e.compileExpression(l[0],o.Type.bool,2);case"f32":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=o.Type.f32,E.createUnreachable()):e.compileExpression(l[0],o.Type.f32,2);case"f64":return r&&e.error(i.DiagnosticCode.Type_0_is_not_generic,f.range,t.internalName),1!=l.length?(e.error(i.DiagnosticCode.Expected_0_arguments_but_got_1,f.range,"1",l.length.toString(10)),e.currentType=o.Type.f64,E.createUnreachable()):e.compileExpression(l[0],o.Type.f64,2)}return e.error(i.DiagnosticCode.Operation_not_supported,f.range),E.createUnreachable()};var l="allocate_memory";t.compileAllocate=function(e,t,r){var n=e.program;assert(t.program==n);var a=e.module,o=e.options,s=n.elementsLookup.get(l);if(!s)return n.error(i.DiagnosticCode.Cannot_find_name_0,r.range,l),a.createUnreachable();if(s.kind!=c.ElementKind.FUNCTION_PROTOTYPE)return n.error(i.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,r.range,s.internalName),a.createUnreachable();var u=s.resolve();return u&&e.compileFunction(u)?(e.currentType=t.type,a.createCall(u.internalName,[o.isWasm64?a.createI64(t.currentMemoryOffset):a.createI32(t.currentMemoryOffset)],o.nativeSizeType)):a.createUnreachable()};var h="abort";function d(e,t,r){var n=e.program,i=e.module,a=n.typesLookup.get("string");if(!a)return i.createUnreachable();var u=n.elementsLookup.get(h);if(!u||u.kind!=c.ElementKind.FUNCTION_PROTOTYPE)return i.createUnreachable();var p=u.resolve();if(!p||!e.compileFunction(p))return i.createUnreachable();var l=null!=t?e.compileExpression(t,a):a.toNativeZero(i),d=e.compileStaticString(r.range.source.normalizedPath);return e.currentType=o.Type.void,i.createBlock(null,[i.createCallImport(p.internalName,[l,d,i.createI32(r.range.line),i.createI32(r.range.column)],s.NativeType.None),i.createUnreachable()])}t.compileAbort=d},function(t,r){t.exports=e},function(e,t,r){(function(e){const t=e.Binaryen||r(41);for(var n in t)(n.startsWith("_Binaryen")||n.startsWith("_Relooper"))&&(e[n]=t[n]);e.allocate_memory=function(e){return e?t._malloc(e):0},e.free_memory=function(e){e&&t._free(e)},e.move_memory=function(e,r,n){return t._memmove(e,r,n)},e.store=function(e,r){t.HEAPU8[e]=r},e.load=function(e){return t.HEAPU8[e]};const i=r(3).Module;i.prototype.toText=function(){var e=t.print,r="";return t.print=function(e){r+=e+"\n"},_BinaryenModulePrint(this.ref),t.print=e,r},i.prototype.toAsmjs=function(){var e=t.print,r="";return t.print=function(e){r+=e+"\n"},_BinaryenModulePrintAsmjs(this.ref),t.print=e,r}}).call(this,r(5))},function(e,t){e.exports=(e=>{var t=new Uint8Array(0),r=0;e.allocate_memory=function(e){if(!(e>>>=0))return 0;if(r+e>t.length){var n=t;(t=new Uint8Array(Math.max(65536,t.length+e,2*t.length))).set(n)}var i=r;return 7&(r+=e)&&(r=1+(7|r)),i},e.free_memory=function(e){},e.move_memory=function(e,r,n){t.copyWithin(e,r,r+n)},e.store=function(e,r,n){"number"==typeof n&&(e+=n),t[e]=r},e.load=function(e){return"number"==typeof off&&(e+=off),t[e]}})},function(e,t){e.exports=(e=>{e.JSMath=Math})},function(e,t,r){(function(e){var t="undefined"!=typeof window&&window||void 0!==e&&e||self;function n(){Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=this.name+": "+this.message+"\n"+(new Error).stack}function i(e){this.message=e||"assertion failed",Error.captureStackTrace?Error.captureStackTrace(this,i):this.stack=this.name+": "+this.message+"\n"+(new Error).stack}Object.defineProperties(t.i8=function(e){return e<<24>>24},{MIN_VALUE:{value:-128,writable:!1},MAX_VALUE:{value:127,writable:!1}}),Object.defineProperties(t.i16=function(e){return e<<16>>16},{MIN_VALUE:{value:-32768,writable:!1},MAX_VALUE:{value:32767,writable:!1}}),Object.defineProperties(t.i32=t.isize=function(e){return 0|e},{MIN_VALUE:{value:-2147483648,writable:!1},MAX_VALUE:{value:2147483647,writable:!1}}),Object.defineProperties(t.u8=function(e){return 255&e},{MIN_VALUE:{value:0,writable:!1},MAX_VALUE:{value:255,writable:!1}}),Object.defineProperties(t.u16=function(e){return 65535&e},{MIN_VALUE:{value:0,writable:!1},MAX_VALUE:{value:65535,writable:!1}}),Object.defineProperties(t.u32=t.usize=function(e){return e>>>0},{MIN_VALUE:{value:0,writable:!1},MAX_VALUE:{value:4294967295,writable:!1}}),Object.defineProperties(t.bool=function(e){return!!e},{MIN_VALUE:{value:0,writable:!1},MAX_VALUE:{value:1,writable:!1}}),Object.defineProperties(t.f32=function(e){return Math.fround(e)},{MIN_VALUE:{value:Math.fround(-3.40282347e38),writable:!1},MAX_VALUE:{value:Math.fround(3.40282347e38),writable:!1},MIN_POSITIVE_VALUE:{value:Math.fround(1.175494351e-38),writable:!1},MIN_SAFE_INTEGER:{value:-16777215,writable:!1},MAX_SAFE_INTEGER:{value:16777215,writable:!1},EPSILON:{value:Math.fround(1.1920929e-7),writable:!1}}),Object.defineProperties(t.f64=function(e){return+e},{MIN_VALUE:{value:-1.7976931348623157e308,writable:!1},MAX_VALUE:{value:1.7976931348623157e308,writable:!1},MIN_POSITIVE_VALUE:{value:2.2250738585072014e-308,writable:!1},MIN_SAFE_INTEGER:{value:-9007199254740991,writable:!1},MAX_SAFE_INTEGER:{value:9007199254740991,writable:!1},EPSILON:{value:2.220446049250313e-16,writable:!1}}),t.clz=Math.clz32,t.abs=Math.abs,t.max=Math.max,t.min=Math.min,t.ceil=Math.ceil,t.floor=Math.floor,t.select=function(e,t,r){return r?e:t},t.sqrt=Math.sqrt,t.trunc=Math.trunc,t.bswap=function(e){var t=e>>8&16711935,r=(16711935&e)<<8;return(t=(e=t|r)>>16&65535)|(r=(65535&e)<<16)},t.bswap16=function(e){return e<<8&65280|e>>8&255|4294901760&e},n.prototype=Object.create(Error.prototype),n.prototype.name="UnreachableError",n.prototype.message="unreachable",t.unreachable=function(){throw new n},i.prototype=Object.create(Error.prototype),i.prototype.name="AssertionError",t.assert=function(e,t){if(e)return e;throw new i(t)},t.changetype=function(e){return e},t.parseI32=function(e,t){return 0|parseInt(e,void 0)},String.fromCharCodes=function(e){return String.fromCharCode.apply(String,e)},String.fromCodePoints=function(e){return String.fromCodePoint.apply(String,e)},t.isInteger=Number.isInteger,t.isFloat=function(e){return"number"==typeof e},t.isReference=function(e){return"object"==typeof e||"string"==typeof e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isArray=Array.isArray,t.fmod=function(e,t){return e%t},t.fmodf=function(e,t){return Math.fround(e%t)},r(44)(t),r(43)(t)}).call(this,r(5))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(45),r(42),r(23),r(21)},function(e,t,r){r(46),e.exports=r(20)}])});
//# sourceMappingURL=assemblyscript.js.map